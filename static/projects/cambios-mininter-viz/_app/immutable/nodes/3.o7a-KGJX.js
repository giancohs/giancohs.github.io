var Ot=Object.defineProperty;var Lt=(r,e,t)=>e in r?Ot(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t;var we=(r,e,t)=>Lt(r,typeof e!="symbol"?e+"":e,t);import{a as W,t as ne,c as Bt}from"../chunks/disclose-version.JSKf_D6i.js";import"../chunks/legacy.B_lhKkaP.js";import{i as oe,B as Re,U as Ut,a2 as Mt,z as kt,y as $t,R as Pt,a0 as ft,H as Vt,A as qe,C as Ae,I as ge,Y as qt,a5 as xe,D as ut,F as ct,G as Yt,S as Jt,P as Ye,a6 as Oe,a7 as Je,a8 as Le,a9 as zt,$ as Qt,aa as Ht,K as Gt,ab as ht,O as jt,ac as Wt,w as Xt,ad as ze,ae as Zt,W as Kt,p as er,m as tr,x as te,g as S,af as fe,s as J,n as B,l as rr,o as O,ag as Qe,t as X,ah as He,ai as Ge}from"../chunks/runtime.scT9TnH8.js";import{s as ue,e as je}from"../chunks/render.DGgI9FTb.js";import{o as We,i as Te}from"../chunks/index-client._rAuwJ6H.js";import{s as Xe}from"../chunks/attributes.Bjk3iwB7.js";import{i as nr}from"../chunks/lifecycle.WZgaBKOJ.js";import{b as Ze}from"../chunks/paths.6W14f4l5.js";function Ce(r,e){return e}function ir(r,e,t,n){for(var i=[],s=e.length,o=0;o<s;o++)zt(e[o].e,i,!0);var a=s>0&&i.length===0&&t!==null;if(a){var f=t.parentNode;Qt(f),f.append(t),n.clear(),re(r,e[0].prev,e[s-1].next)}Ht(i,()=>{for(var u=0;u<s;u++){var c=e[u];a||(n.delete(c.k),re(r,c.prev,c.next)),Gt(c.e,!a)}})}function Fe(r,e,t,n,i,s=null){var o=r,a={flags:e,items:new Map,first:null},f=(e&ht)!==0;if(f){var u=r;o=oe?Re(Ut(u)):u.appendChild(Mt())}oe&&kt();var c=null,h=!1;$t(()=>{var _=t(),g=Pt(_)?_:_==null?[]:ft(_),y=g.length;if(h&&y===0)return;h=y===0;let b=!1;if(oe){var C=o.data===Vt;C!==(y===0)&&(o=qe(),Re(o),Ae(!1),b=!0)}if(oe){for(var A=null,E,w=0;w<y;w++){if(ge.nodeType===8&&ge.data===qt){o=ge,b=!0,Ae(!1);break}var p=g[w],x=n(p,w);E=_t(ge,a,A,null,p,x,w,i,e),a.items.set(x,E),A=E}y>0&&Re(qe())}if(!oe){var z=jt;or(g,a,o,i,e,(z.f&xe)!==0,n)}s!==null&&(y===0?c?ut(c):c=ct(()=>s(o)):c!==null&&Yt(c,()=>{c=null})),b&&Ae(!0),t()}),oe&&(o=ge)}function or(r,e,t,n,i,s,o){var I,T,F,R;var a=(i&Wt)!==0,f=(i&(Oe|Le))!==0,u=r.length,c=e.items,h=e.first,_=h,g,y=null,b,C=[],A=[],E,w,p,x;if(a)for(x=0;x<u;x+=1)E=r[x],w=o(E,x),p=c.get(w),p!==void 0&&((I=p.a)==null||I.measure(),(b??(b=new Set)).add(p));for(x=0;x<u;x+=1){if(E=r[x],w=o(E,x),p=c.get(w),p===void 0){var z=_?_.e.nodes_start:t;y=_t(z,e,y,y===null?e.first:y.next,E,w,x,n,i),c.set(w,y),C=[],A=[],_=y.next;continue}if(f&&sr(p,E,x,i),p.e.f&xe&&(ut(p.e),a&&((T=p.a)==null||T.unfix(),(b??(b=new Set)).delete(p))),p!==_){if(g!==void 0&&g.has(p)){if(C.length<A.length){var ee=A[0],M;y=ee.prev;var ae=C[0],v=C[C.length-1];for(M=0;M<C.length;M+=1)Ke(C[M],ee,t);for(M=0;M<A.length;M+=1)g.delete(A[M]);re(e,ae.prev,v.next),re(e,y,ae),re(e,v,ee),_=ee,y=v,x-=1,C=[],A=[]}else g.delete(p),Ke(p,_,t),re(e,p.prev,p.next),re(e,p,y===null?e.first:y.next),re(e,y,p),y=p;continue}for(C=[],A=[];_!==null&&_.k!==w;)(s||!(_.e.f&xe))&&(g??(g=new Set)).add(_),A.push(_),_=_.next;if(_===null)continue;p=_}C.push(p),y=p,_=p.next}if(_!==null||g!==void 0){for(var d=g===void 0?[]:ft(g);_!==null;)(s||!(_.e.f&xe))&&d.push(_),_=_.next;var N=d.length;if(N>0){var m=i&ht&&u===0?t:null;if(a){for(x=0;x<N;x+=1)(F=d[x].a)==null||F.measure();for(x=0;x<N;x+=1)(R=d[x].a)==null||R.fix()}ir(e,d,m,c)}}a&&Jt(()=>{var U;if(b!==void 0)for(p of b)(U=p.a)==null||U.apply()}),Ye.first=e.first&&e.first.e,Ye.last=y&&y.e}function sr(r,e,t,n){n&Oe&&Je(r.v,e),n&Le?Je(r.i,t):r.i=t}function _t(r,e,t,n,i,s,o,a,f){var u=(f&Oe)!==0,c=(f&Zt)===0,h=u?c?Xt(i):ze(i):i,_=f&Le?ze(o):o,g={i:_,v:h,k:s,a:null,e:null,prev:t,next:n};try{return g.e=ct(()=>a(r,h,_),oe),g.e.prev=t&&t.e,g.e.next=n&&n.e,t===null?e.first=g:(t.next=g,t.e.next=g.e),n!==null&&(n.prev=g,n.e.prev=g.e),g}finally{}}function Ke(r,e,t){for(var n=r.next?r.next.e.nodes_start:t,i=e?e.e.nodes_start:t,s=r.e.nodes_start;s!==n;){var o=Kt(s);i.before(s),s=o}}function re(r,e,t){e===null?r.first=t:(e.next=t,e.e.next=t&&t.e),t!==null&&(t.prev=e,t.e.prev=e&&e.e)}function et(r,e,t){if(t){if(r.classList.contains(e))return;r.classList.add(e)}else{if(!r.classList.contains(e))return;r.classList.remove(e)}}var tt=typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{},Q=[],q=[],ar=typeof Uint8Array<"u"?Uint8Array:Array,Be=!1;function dt(){Be=!0;for(var r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",e=0,t=r.length;e<t;++e)Q[e]=r[e],q[r.charCodeAt(e)]=e;q[45]=62,q[95]=63}function lr(r){Be||dt();var e,t,n,i,s,o,a=r.length;if(a%4>0)throw new Error("Invalid string. Length must be a multiple of 4");s=r[a-2]==="="?2:r[a-1]==="="?1:0,o=new ar(a*3/4-s),n=s>0?a-4:a;var f=0;for(e=0,t=0;e<n;e+=4,t+=3)i=q[r.charCodeAt(e)]<<18|q[r.charCodeAt(e+1)]<<12|q[r.charCodeAt(e+2)]<<6|q[r.charCodeAt(e+3)],o[f++]=i>>16&255,o[f++]=i>>8&255,o[f++]=i&255;return s===2?(i=q[r.charCodeAt(e)]<<2|q[r.charCodeAt(e+1)]>>4,o[f++]=i&255):s===1&&(i=q[r.charCodeAt(e)]<<10|q[r.charCodeAt(e+1)]<<4|q[r.charCodeAt(e+2)]>>2,o[f++]=i>>8&255,o[f++]=i&255),o}function fr(r){return Q[r>>18&63]+Q[r>>12&63]+Q[r>>6&63]+Q[r&63]}function ur(r,e,t){for(var n,i=[],s=e;s<t;s+=3)n=(r[s]<<16)+(r[s+1]<<8)+r[s+2],i.push(fr(n));return i.join("")}function rt(r){Be||dt();for(var e,t=r.length,n=t%3,i="",s=[],o=16383,a=0,f=t-n;a<f;a+=o)s.push(ur(r,a,a+o>f?f:a+o));return n===1?(e=r[t-1],i+=Q[e>>2],i+=Q[e<<4&63],i+="=="):n===2&&(e=(r[t-2]<<8)+r[t-1],i+=Q[e>>10],i+=Q[e>>4&63],i+=Q[e<<2&63],i+="="),s.push(i),s.join("")}function Ee(r,e,t,n,i){var s,o,a=i*8-n-1,f=(1<<a)-1,u=f>>1,c=-7,h=t?i-1:0,_=t?-1:1,g=r[e+h];for(h+=_,s=g&(1<<-c)-1,g>>=-c,c+=a;c>0;s=s*256+r[e+h],h+=_,c-=8);for(o=s&(1<<-c)-1,s>>=-c,c+=n;c>0;o=o*256+r[e+h],h+=_,c-=8);if(s===0)s=1-u;else{if(s===f)return o?NaN:(g?-1:1)*(1/0);o=o+Math.pow(2,n),s=s-u}return(g?-1:1)*o*Math.pow(2,s-n)}function mt(r,e,t,n,i,s){var o,a,f,u=s*8-i-1,c=(1<<u)-1,h=c>>1,_=i===23?Math.pow(2,-24)-Math.pow(2,-77):0,g=n?0:s-1,y=n?1:-1,b=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,o=c):(o=Math.floor(Math.log(e)/Math.LN2),e*(f=Math.pow(2,-o))<1&&(o--,f*=2),o+h>=1?e+=_/f:e+=_*Math.pow(2,1-h),e*f>=2&&(o++,f/=2),o+h>=c?(a=0,o=c):o+h>=1?(a=(e*f-1)*Math.pow(2,i),o=o+h):(a=e*Math.pow(2,h-1)*Math.pow(2,i),o=0));i>=8;r[t+g]=a&255,g+=y,a/=256,i-=8);for(o=o<<i|a,u+=i;u>0;r[t+g]=o&255,g+=y,o/=256,u-=8);r[t+g-y]|=b*128}var cr={}.toString,pt=Array.isArray||function(r){return cr.call(r)=="[object Array]"},hr=50;l.TYPED_ARRAY_SUPPORT=tt.TYPED_ARRAY_SUPPORT!==void 0?tt.TYPED_ARRAY_SUPPORT:!0;ve();function ve(){return l.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function K(r,e){if(ve()<e)throw new RangeError("Invalid typed array length");return l.TYPED_ARRAY_SUPPORT?(r=new Uint8Array(e),r.__proto__=l.prototype):(r===null&&(r=new l(e)),r.length=e),r}function l(r,e,t){if(!l.TYPED_ARRAY_SUPPORT&&!(this instanceof l))return new l(r,e,t);if(typeof r=="number"){if(typeof e=="string")throw new Error("If encoding is specified then the first argument must be a string");return Ue(this,r)}return gt(this,r,e,t)}l.poolSize=8192;l._augment=function(r){return r.__proto__=l.prototype,r};function gt(r,e,t,n){if(typeof e=="number")throw new TypeError('"value" argument must not be a number');return typeof ArrayBuffer<"u"&&e instanceof ArrayBuffer?mr(r,e,t,n):typeof e=="string"?dr(r,e,t):pr(r,e)}l.from=function(r,e,t){return gt(null,r,e,t)};l.TYPED_ARRAY_SUPPORT&&(l.prototype.__proto__=Uint8Array.prototype,l.__proto__=Uint8Array,typeof Symbol<"u"&&Symbol.species&&l[Symbol.species]);function wt(r){if(typeof r!="number")throw new TypeError('"size" argument must be a number');if(r<0)throw new RangeError('"size" argument must not be negative')}function _r(r,e,t,n){return wt(e),e<=0?K(r,e):t!==void 0?typeof n=="string"?K(r,e).fill(t,n):K(r,e).fill(t):K(r,e)}l.alloc=function(r,e,t){return _r(null,r,e,t)};function Ue(r,e){if(wt(e),r=K(r,e<0?0:Me(e)|0),!l.TYPED_ARRAY_SUPPORT)for(var t=0;t<e;++t)r[t]=0;return r}l.allocUnsafe=function(r){return Ue(null,r)};l.allocUnsafeSlow=function(r){return Ue(null,r)};function dr(r,e,t){if((typeof t!="string"||t==="")&&(t="utf8"),!l.isEncoding(t))throw new TypeError('"encoding" must be a valid string encoding');var n=xt(e,t)|0;r=K(r,n);var i=r.write(e,t);return i!==n&&(r=r.slice(0,i)),r}function Ne(r,e){var t=e.length<0?0:Me(e.length)|0;r=K(r,t);for(var n=0;n<t;n+=1)r[n]=e[n]&255;return r}function mr(r,e,t,n){if(e.byteLength,t<0||e.byteLength<t)throw new RangeError("'offset' is out of bounds");if(e.byteLength<t+(n||0))throw new RangeError("'length' is out of bounds");return t===void 0&&n===void 0?e=new Uint8Array(e):n===void 0?e=new Uint8Array(e,t):e=new Uint8Array(e,t,n),l.TYPED_ARRAY_SUPPORT?(r=e,r.__proto__=l.prototype):r=Ne(r,e),r}function pr(r,e){if(H(e)){var t=Me(e.length)|0;return r=K(r,t),r.length===0||e.copy(r,0,0,t),r}if(e){if(typeof ArrayBuffer<"u"&&e.buffer instanceof ArrayBuffer||"length"in e)return typeof e.length!="number"||Br(e.length)?K(r,0):Ne(r,e);if(e.type==="Buffer"&&pt(e.data))return Ne(r,e.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function Me(r){if(r>=ve())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+ve().toString(16)+" bytes");return r|0}l.isBuffer=Y;function H(r){return!!(r!=null&&r._isBuffer)}l.compare=function(e,t){if(!H(e)||!H(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var n=e.length,i=t.length,s=0,o=Math.min(n,i);s<o;++s)if(e[s]!==t[s]){n=e[s],i=t[s];break}return n<i?-1:i<n?1:0};l.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}};l.concat=function(e,t){if(!pt(e))throw new TypeError('"list" argument must be an Array of Buffers');if(e.length===0)return l.alloc(0);var n;if(t===void 0)for(t=0,n=0;n<e.length;++n)t+=e[n].length;var i=l.allocUnsafe(t),s=0;for(n=0;n<e.length;++n){var o=e[n];if(!H(o))throw new TypeError('"list" argument must be an Array of Buffers');o.copy(i,s),s+=o.length}return i};function xt(r,e){if(H(r))return r.length;if(typeof ArrayBuffer<"u"&&typeof ArrayBuffer.isView=="function"&&(ArrayBuffer.isView(r)||r instanceof ArrayBuffer))return r.byteLength;typeof r!="string"&&(r=""+r);var t=r.length;if(t===0)return 0;for(var n=!1;;)switch(e){case"ascii":case"latin1":case"binary":return t;case"utf8":case"utf-8":case void 0:return ye(r).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return t*2;case"hex":return t>>>1;case"base64":return Dt(r).length;default:if(n)return ye(r).length;e=(""+e).toLowerCase(),n=!0}}l.byteLength=xt;function gr(r,e,t){var n=!1;if((e===void 0||e<0)&&(e=0),e>this.length||((t===void 0||t>this.length)&&(t=this.length),t<=0)||(t>>>=0,e>>>=0,t<=e))return"";for(r||(r="utf8");;)switch(r){case"hex":return Rr(this,e,t);case"utf8":case"utf-8":return Et(this,e,t);case"ascii":return Sr(this,e,t);case"latin1":case"binary":return Dr(this,e,t);case"base64":return Ir(this,e,t);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Ar(this,e,t);default:if(n)throw new TypeError("Unknown encoding: "+r);r=(r+"").toLowerCase(),n=!0}}l.prototype._isBuffer=!0;function se(r,e,t){var n=r[e];r[e]=r[t],r[t]=n}l.prototype.swap16=function(){var e=this.length;if(e%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)se(this,t,t+1);return this};l.prototype.swap32=function(){var e=this.length;if(e%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)se(this,t,t+3),se(this,t+1,t+2);return this};l.prototype.swap64=function(){var e=this.length;if(e%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)se(this,t,t+7),se(this,t+1,t+6),se(this,t+2,t+5),se(this,t+3,t+4);return this};l.prototype.toString=function(){var e=this.length|0;return e===0?"":arguments.length===0?Et(this,0,e):gr.apply(this,arguments)};l.prototype.equals=function(e){if(!H(e))throw new TypeError("Argument must be a Buffer");return this===e?!0:l.compare(this,e)===0};l.prototype.inspect=function(){var e="",t=hr;return this.length>0&&(e=this.toString("hex",0,t).match(/.{2}/g).join(" "),this.length>t&&(e+=" ... ")),"<Buffer "+e+">"};l.prototype.compare=function(e,t,n,i,s){if(!H(e))throw new TypeError("Argument must be a Buffer");if(t===void 0&&(t=0),n===void 0&&(n=e?e.length:0),i===void 0&&(i=0),s===void 0&&(s=this.length),t<0||n>e.length||i<0||s>this.length)throw new RangeError("out of range index");if(i>=s&&t>=n)return 0;if(i>=s)return-1;if(t>=n)return 1;if(t>>>=0,n>>>=0,i>>>=0,s>>>=0,this===e)return 0;for(var o=s-i,a=n-t,f=Math.min(o,a),u=this.slice(i,s),c=e.slice(t,n),h=0;h<f;++h)if(u[h]!==c[h]){o=u[h],a=c[h];break}return o<a?-1:a<o?1:0};function vt(r,e,t,n,i){if(r.length===0)return-1;if(typeof t=="string"?(n=t,t=0):t>2147483647?t=2147483647:t<-2147483648&&(t=-2147483648),t=+t,isNaN(t)&&(t=i?0:r.length-1),t<0&&(t=r.length+t),t>=r.length){if(i)return-1;t=r.length-1}else if(t<0)if(i)t=0;else return-1;if(typeof e=="string"&&(e=l.from(e,n)),H(e))return e.length===0?-1:nt(r,e,t,n,i);if(typeof e=="number")return e=e&255,l.TYPED_ARRAY_SUPPORT&&typeof Uint8Array.prototype.indexOf=="function"?i?Uint8Array.prototype.indexOf.call(r,e,t):Uint8Array.prototype.lastIndexOf.call(r,e,t):nt(r,[e],t,n,i);throw new TypeError("val must be string, number or Buffer")}function nt(r,e,t,n,i){var s=1,o=r.length,a=e.length;if(n!==void 0&&(n=String(n).toLowerCase(),n==="ucs2"||n==="ucs-2"||n==="utf16le"||n==="utf-16le")){if(r.length<2||e.length<2)return-1;s=2,o/=2,a/=2,t/=2}function f(g,y){return s===1?g[y]:g.readUInt16BE(y*s)}var u;if(i){var c=-1;for(u=t;u<o;u++)if(f(r,u)===f(e,c===-1?0:u-c)){if(c===-1&&(c=u),u-c+1===a)return c*s}else c!==-1&&(u-=u-c),c=-1}else for(t+a>o&&(t=o-a),u=t;u>=0;u--){for(var h=!0,_=0;_<a;_++)if(f(r,u+_)!==f(e,_)){h=!1;break}if(h)return u}return-1}l.prototype.includes=function(e,t,n){return this.indexOf(e,t,n)!==-1};l.prototype.indexOf=function(e,t,n){return vt(this,e,t,n,!0)};l.prototype.lastIndexOf=function(e,t,n){return vt(this,e,t,n,!1)};function wr(r,e,t,n){t=Number(t)||0;var i=r.length-t;n?(n=Number(n),n>i&&(n=i)):n=i;var s=e.length;if(s%2!==0)throw new TypeError("Invalid hex string");n>s/2&&(n=s/2);for(var o=0;o<n;++o){var a=parseInt(e.substr(o*2,2),16);if(isNaN(a))return o;r[t+o]=a}return o}function xr(r,e,t,n){return Se(ye(e,r.length-t),r,t,n)}function yt(r,e,t,n){return Se(Or(e),r,t,n)}function vr(r,e,t,n){return yt(r,e,t,n)}function yr(r,e,t,n){return Se(Dt(e),r,t,n)}function Er(r,e,t,n){return Se(Lr(e,r.length-t),r,t,n)}l.prototype.write=function(e,t,n,i){if(t===void 0)i="utf8",n=this.length,t=0;else if(n===void 0&&typeof t=="string")i=t,n=this.length,t=0;else if(isFinite(t))t=t|0,isFinite(n)?(n=n|0,i===void 0&&(i="utf8")):(i=n,n=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var s=this.length-t;if((n===void 0||n>s)&&(n=s),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");i||(i="utf8");for(var o=!1;;)switch(i){case"hex":return wr(this,e,t,n);case"utf8":case"utf-8":return xr(this,e,t,n);case"ascii":return yt(this,e,t,n);case"latin1":case"binary":return vr(this,e,t,n);case"base64":return yr(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Er(this,e,t,n);default:if(o)throw new TypeError("Unknown encoding: "+i);i=(""+i).toLowerCase(),o=!0}};l.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function Ir(r,e,t){return e===0&&t===r.length?rt(r):rt(r.slice(e,t))}function Et(r,e,t){t=Math.min(r.length,t);for(var n=[],i=e;i<t;){var s=r[i],o=null,a=s>239?4:s>223?3:s>191?2:1;if(i+a<=t){var f,u,c,h;switch(a){case 1:s<128&&(o=s);break;case 2:f=r[i+1],(f&192)===128&&(h=(s&31)<<6|f&63,h>127&&(o=h));break;case 3:f=r[i+1],u=r[i+2],(f&192)===128&&(u&192)===128&&(h=(s&15)<<12|(f&63)<<6|u&63,h>2047&&(h<55296||h>57343)&&(o=h));break;case 4:f=r[i+1],u=r[i+2],c=r[i+3],(f&192)===128&&(u&192)===128&&(c&192)===128&&(h=(s&15)<<18|(f&63)<<12|(u&63)<<6|c&63,h>65535&&h<1114112&&(o=h))}}o===null?(o=65533,a=1):o>65535&&(o-=65536,n.push(o>>>10&1023|55296),o=56320|o&1023),n.push(o),i+=a}return br(n)}var it=4096;function br(r){var e=r.length;if(e<=it)return String.fromCharCode.apply(String,r);for(var t="",n=0;n<e;)t+=String.fromCharCode.apply(String,r.slice(n,n+=it));return t}function Sr(r,e,t){var n="";t=Math.min(r.length,t);for(var i=e;i<t;++i)n+=String.fromCharCode(r[i]&127);return n}function Dr(r,e,t){var n="";t=Math.min(r.length,t);for(var i=e;i<t;++i)n+=String.fromCharCode(r[i]);return n}function Rr(r,e,t){var n=r.length;(!e||e<0)&&(e=0),(!t||t<0||t>n)&&(t=n);for(var i="",s=e;s<t;++s)i+=Nr(r[s]);return i}function Ar(r,e,t){for(var n=r.slice(e,t),i="",s=0;s<n.length;s+=2)i+=String.fromCharCode(n[s]+n[s+1]*256);return i}l.prototype.slice=function(e,t){var n=this.length;e=~~e,t=t===void 0?n:~~t,e<0?(e+=n,e<0&&(e=0)):e>n&&(e=n),t<0?(t+=n,t<0&&(t=0)):t>n&&(t=n),t<e&&(t=e);var i;if(l.TYPED_ARRAY_SUPPORT)i=this.subarray(e,t),i.__proto__=l.prototype;else{var s=t-e;i=new l(s,void 0);for(var o=0;o<s;++o)i[o]=this[o+e]}return i};function L(r,e,t){if(r%1!==0||r<0)throw new RangeError("offset is not uint");if(r+e>t)throw new RangeError("Trying to access beyond buffer length")}l.prototype.readUIntLE=function(e,t,n){e=e|0,t=t|0,n||L(e,t,this.length);for(var i=this[e],s=1,o=0;++o<t&&(s*=256);)i+=this[e+o]*s;return i};l.prototype.readUIntBE=function(e,t,n){e=e|0,t=t|0,n||L(e,t,this.length);for(var i=this[e+--t],s=1;t>0&&(s*=256);)i+=this[e+--t]*s;return i};l.prototype.readUInt8=function(e,t){return t||L(e,1,this.length),this[e]};l.prototype.readUInt16LE=function(e,t){return t||L(e,2,this.length),this[e]|this[e+1]<<8};l.prototype.readUInt16BE=function(e,t){return t||L(e,2,this.length),this[e]<<8|this[e+1]};l.prototype.readUInt32LE=function(e,t){return t||L(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+this[e+3]*16777216};l.prototype.readUInt32BE=function(e,t){return t||L(e,4,this.length),this[e]*16777216+(this[e+1]<<16|this[e+2]<<8|this[e+3])};l.prototype.readIntLE=function(e,t,n){e=e|0,t=t|0,n||L(e,t,this.length);for(var i=this[e],s=1,o=0;++o<t&&(s*=256);)i+=this[e+o]*s;return s*=128,i>=s&&(i-=Math.pow(2,8*t)),i};l.prototype.readIntBE=function(e,t,n){e=e|0,t=t|0,n||L(e,t,this.length);for(var i=t,s=1,o=this[e+--i];i>0&&(s*=256);)o+=this[e+--i]*s;return s*=128,o>=s&&(o-=Math.pow(2,8*t)),o};l.prototype.readInt8=function(e,t){return t||L(e,1,this.length),this[e]&128?(255-this[e]+1)*-1:this[e]};l.prototype.readInt16LE=function(e,t){t||L(e,2,this.length);var n=this[e]|this[e+1]<<8;return n&32768?n|4294901760:n};l.prototype.readInt16BE=function(e,t){t||L(e,2,this.length);var n=this[e+1]|this[e]<<8;return n&32768?n|4294901760:n};l.prototype.readInt32LE=function(e,t){return t||L(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24};l.prototype.readInt32BE=function(e,t){return t||L(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]};l.prototype.readFloatLE=function(e,t){return t||L(e,4,this.length),Ee(this,e,!0,23,4)};l.prototype.readFloatBE=function(e,t){return t||L(e,4,this.length),Ee(this,e,!1,23,4)};l.prototype.readDoubleLE=function(e,t){return t||L(e,8,this.length),Ee(this,e,!0,52,8)};l.prototype.readDoubleBE=function(e,t){return t||L(e,8,this.length),Ee(this,e,!1,52,8)};function k(r,e,t,n,i,s){if(!H(r))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>i||e<s)throw new RangeError('"value" argument is out of bounds');if(t+n>r.length)throw new RangeError("Index out of range")}l.prototype.writeUIntLE=function(e,t,n,i){if(e=+e,t=t|0,n=n|0,!i){var s=Math.pow(2,8*n)-1;k(this,e,t,n,s,0)}var o=1,a=0;for(this[t]=e&255;++a<n&&(o*=256);)this[t+a]=e/o&255;return t+n};l.prototype.writeUIntBE=function(e,t,n,i){if(e=+e,t=t|0,n=n|0,!i){var s=Math.pow(2,8*n)-1;k(this,e,t,n,s,0)}var o=n-1,a=1;for(this[t+o]=e&255;--o>=0&&(a*=256);)this[t+o]=e/a&255;return t+n};l.prototype.writeUInt8=function(e,t,n){return e=+e,t=t|0,n||k(this,e,t,1,255,0),l.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=e&255,t+1};function Ie(r,e,t,n){e<0&&(e=65535+e+1);for(var i=0,s=Math.min(r.length-t,2);i<s;++i)r[t+i]=(e&255<<8*(n?i:1-i))>>>(n?i:1-i)*8}l.prototype.writeUInt16LE=function(e,t,n){return e=+e,t=t|0,n||k(this,e,t,2,65535,0),l.TYPED_ARRAY_SUPPORT?(this[t]=e&255,this[t+1]=e>>>8):Ie(this,e,t,!0),t+2};l.prototype.writeUInt16BE=function(e,t,n){return e=+e,t=t|0,n||k(this,e,t,2,65535,0),l.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=e&255):Ie(this,e,t,!1),t+2};function be(r,e,t,n){e<0&&(e=4294967295+e+1);for(var i=0,s=Math.min(r.length-t,4);i<s;++i)r[t+i]=e>>>(n?i:3-i)*8&255}l.prototype.writeUInt32LE=function(e,t,n){return e=+e,t=t|0,n||k(this,e,t,4,4294967295,0),l.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=e&255):be(this,e,t,!0),t+4};l.prototype.writeUInt32BE=function(e,t,n){return e=+e,t=t|0,n||k(this,e,t,4,4294967295,0),l.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=e&255):be(this,e,t,!1),t+4};l.prototype.writeIntLE=function(e,t,n,i){if(e=+e,t=t|0,!i){var s=Math.pow(2,8*n-1);k(this,e,t,n,s-1,-s)}var o=0,a=1,f=0;for(this[t]=e&255;++o<n&&(a*=256);)e<0&&f===0&&this[t+o-1]!==0&&(f=1),this[t+o]=(e/a>>0)-f&255;return t+n};l.prototype.writeIntBE=function(e,t,n,i){if(e=+e,t=t|0,!i){var s=Math.pow(2,8*n-1);k(this,e,t,n,s-1,-s)}var o=n-1,a=1,f=0;for(this[t+o]=e&255;--o>=0&&(a*=256);)e<0&&f===0&&this[t+o+1]!==0&&(f=1),this[t+o]=(e/a>>0)-f&255;return t+n};l.prototype.writeInt8=function(e,t,n){return e=+e,t=t|0,n||k(this,e,t,1,127,-128),l.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=e&255,t+1};l.prototype.writeInt16LE=function(e,t,n){return e=+e,t=t|0,n||k(this,e,t,2,32767,-32768),l.TYPED_ARRAY_SUPPORT?(this[t]=e&255,this[t+1]=e>>>8):Ie(this,e,t,!0),t+2};l.prototype.writeInt16BE=function(e,t,n){return e=+e,t=t|0,n||k(this,e,t,2,32767,-32768),l.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=e&255):Ie(this,e,t,!1),t+2};l.prototype.writeInt32LE=function(e,t,n){return e=+e,t=t|0,n||k(this,e,t,4,2147483647,-2147483648),l.TYPED_ARRAY_SUPPORT?(this[t]=e&255,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):be(this,e,t,!0),t+4};l.prototype.writeInt32BE=function(e,t,n){return e=+e,t=t|0,n||k(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),l.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=e&255):be(this,e,t,!1),t+4};function It(r,e,t,n,i,s){if(t+n>r.length)throw new RangeError("Index out of range");if(t<0)throw new RangeError("Index out of range")}function bt(r,e,t,n,i){return i||It(r,e,t,4),mt(r,e,t,n,23,4),t+4}l.prototype.writeFloatLE=function(e,t,n){return bt(this,e,t,!0,n)};l.prototype.writeFloatBE=function(e,t,n){return bt(this,e,t,!1,n)};function St(r,e,t,n,i){return i||It(r,e,t,8),mt(r,e,t,n,52,8),t+8}l.prototype.writeDoubleLE=function(e,t,n){return St(this,e,t,!0,n)};l.prototype.writeDoubleBE=function(e,t,n){return St(this,e,t,!1,n)};l.prototype.copy=function(e,t,n,i){if(n||(n=0),!i&&i!==0&&(i=this.length),t>=e.length&&(t=e.length),t||(t=0),i>0&&i<n&&(i=n),i===n||e.length===0||this.length===0)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(i<0)throw new RangeError("sourceEnd out of bounds");i>this.length&&(i=this.length),e.length-t<i-n&&(i=e.length-t+n);var s=i-n,o;if(this===e&&n<t&&t<i)for(o=s-1;o>=0;--o)e[o+t]=this[o+n];else if(s<1e3||!l.TYPED_ARRAY_SUPPORT)for(o=0;o<s;++o)e[o+t]=this[o+n];else Uint8Array.prototype.set.call(e,this.subarray(n,n+s),t);return s};l.prototype.fill=function(e,t,n,i){if(typeof e=="string"){if(typeof t=="string"?(i=t,t=0,n=this.length):typeof n=="string"&&(i=n,n=this.length),e.length===1){var s=e.charCodeAt(0);s<256&&(e=s)}if(i!==void 0&&typeof i!="string")throw new TypeError("encoding must be a string");if(typeof i=="string"&&!l.isEncoding(i))throw new TypeError("Unknown encoding: "+i)}else typeof e=="number"&&(e=e&255);if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;t=t>>>0,n=n===void 0?this.length:n>>>0,e||(e=0);var o;if(typeof e=="number")for(o=t;o<n;++o)this[o]=e;else{var a=H(e)?e:ye(new l(e,i).toString()),f=a.length;for(o=0;o<n-t;++o)this[o+t]=a[o%f]}return this};var Tr=/[^+\/0-9A-Za-z-_]/g;function Cr(r){if(r=Fr(r).replace(Tr,""),r.length<2)return"";for(;r.length%4!==0;)r=r+"=";return r}function Fr(r){return r.trim?r.trim():r.replace(/^\s+|\s+$/g,"")}function Nr(r){return r<16?"0"+r.toString(16):r.toString(16)}function ye(r,e){e=e||1/0;for(var t,n=r.length,i=null,s=[],o=0;o<n;++o){if(t=r.charCodeAt(o),t>55295&&t<57344){if(!i){if(t>56319){(e-=3)>-1&&s.push(239,191,189);continue}else if(o+1===n){(e-=3)>-1&&s.push(239,191,189);continue}i=t;continue}if(t<56320){(e-=3)>-1&&s.push(239,191,189),i=t;continue}t=(i-55296<<10|t-56320)+65536}else i&&(e-=3)>-1&&s.push(239,191,189);if(i=null,t<128){if((e-=1)<0)break;s.push(t)}else if(t<2048){if((e-=2)<0)break;s.push(t>>6|192,t&63|128)}else if(t<65536){if((e-=3)<0)break;s.push(t>>12|224,t>>6&63|128,t&63|128)}else if(t<1114112){if((e-=4)<0)break;s.push(t>>18|240,t>>12&63|128,t>>6&63|128,t&63|128)}else throw new Error("Invalid code point")}return s}function Or(r){for(var e=[],t=0;t<r.length;++t)e.push(r.charCodeAt(t)&255);return e}function Lr(r,e){for(var t,n,i,s=[],o=0;o<r.length&&!((e-=2)<0);++o)t=r.charCodeAt(o),n=t>>8,i=t%256,s.push(i),s.push(n);return s}function Dt(r){return lr(Cr(r))}function Se(r,e,t,n){for(var i=0;i<n&&!(i+t>=e.length||i>=r.length);++i)e[i+t]=r[i];return i}function Br(r){return r!==r}function Y(r){return r!=null&&(!!r._isBuffer||Rt(r)||Ur(r))}function Rt(r){return!!r.constructor&&typeof r.constructor.isBuffer=="function"&&r.constructor.isBuffer(r)}function Ur(r){return typeof r.readFloatLE=="function"&&typeof r.slice=="function"&&Rt(r.slice(0,0))}class D extends Error{constructor(e,t,n,...i){Array.isArray(t)&&(t=t.join(" ").trim()),super(t),Error.captureStackTrace!==void 0&&Error.captureStackTrace(this,D),this.code=e;for(const s of i)for(const o in s){const a=s[o];this[o]=Y(a)?a.toString(n.encoding):a==null?a:JSON.parse(JSON.stringify(a))}}}const Mr=function(r){return typeof r=="object"&&r!==null&&!Array.isArray(r)},At=function(r){const e=[];for(let t=0,n=r.length;t<n;t++){const i=r[t];if(i==null||i===!1)e[t]={disabled:!0};else if(typeof i=="string")e[t]={name:i};else if(Mr(i)){if(typeof i.name!="string")throw new D("CSV_OPTION_COLUMNS_MISSING_NAME",["Option columns missing name:",`property "name" is required at position ${t}`,"when column is an object literal"]);e[t]=i}else throw new D("CSV_INVALID_COLUMN_DEFINITION",["Invalid column definition:","expect a string or a literal object,",`got ${JSON.stringify(i)} at position ${t}`])}return e};class ot{constructor(e=100){this.size=e,this.length=0,this.buf=l.allocUnsafe(e)}prepend(e){if(Y(e)){const t=this.length+e.length;if(t>=this.size&&(this.resize(),t>=this.size))throw Error("INVALID_BUFFER_STATE");const n=this.buf;this.buf=l.allocUnsafe(this.size),e.copy(this.buf,0),n.copy(this.buf,e.length),this.length+=e.length}else{const t=this.length++;t===this.size&&this.resize();const n=this.clone();this.buf[0]=e,n.copy(this.buf,1,0,t)}}append(e){const t=this.length++;t===this.size&&this.resize(),this.buf[t]=e}clone(){return l.from(this.buf.slice(0,this.length))}resize(){const e=this.length;this.size=this.size*2;const t=l.allocUnsafe(this.size);this.buf.copy(t,0,0,e),this.buf=t}toString(e){return e?this.buf.slice(0,this.length).toString(e):Uint8Array.prototype.slice.call(this.buf.slice(0,this.length))}toJSON(){return this.toString("utf8")}reset(){this.length=0}}const kr=12,$r=13,Pr=10,Vr=32,qr=9,Yr=function(r){return{bomSkipped:!1,bufBytesStart:0,castField:r.cast_function,commenting:!1,error:void 0,enabled:r.from_line===1,escaping:!1,escapeIsQuote:Y(r.escape)&&Y(r.quote)&&l.compare(r.escape,r.quote)===0,expectedRecordLength:Array.isArray(r.columns)?r.columns.length:void 0,field:new ot(20),firstLineToHeaders:r.cast_first_line_to_header,needMoreDataSize:Math.max(r.comment!==null?r.comment.length:0,...r.delimiter.map(e=>e.length),r.quote!==null?r.quote.length:0),previousBuf:void 0,quoting:!1,stop:!1,rawBuffer:new ot(100),record:[],recordHasError:!1,record_length:0,recordDelimiterMaxLength:r.record_delimiter.length===0?0:Math.max(...r.record_delimiter.map(e=>e.length)),trimChars:[l.from(" ",r.encoding)[0],l.from("	",r.encoding)[0]],wasQuoting:!1,wasRowDelimiter:!1,timchars:[l.from(l.from([$r],"utf8").toString(),r.encoding),l.from(l.from([Pr],"utf8").toString(),r.encoding),l.from(l.from([kr],"utf8").toString(),r.encoding),l.from(l.from([Vr],"utf8").toString(),r.encoding),l.from(l.from([qr],"utf8").toString(),r.encoding)]}},Jr=function(r){return r.replace(/([A-Z])/g,function(e,t){return"_"+t.toLowerCase()})},st=function(r){const e={};for(const n in r)e[Jr(n)]=r[n];if(e.encoding===void 0||e.encoding===!0)e.encoding="utf8";else if(e.encoding===null||e.encoding===!1)e.encoding=null;else if(typeof e.encoding!="string"&&e.encoding!==null)throw new D("CSV_INVALID_OPTION_ENCODING",["Invalid option encoding:","encoding must be a string or null to return a buffer,",`got ${JSON.stringify(e.encoding)}`],e);if(e.bom===void 0||e.bom===null||e.bom===!1)e.bom=!1;else if(e.bom!==!0)throw new D("CSV_INVALID_OPTION_BOM",["Invalid option bom:","bom must be true,",`got ${JSON.stringify(e.bom)}`],e);if(e.cast_function=null,e.cast===void 0||e.cast===null||e.cast===!1||e.cast==="")e.cast=void 0;else if(typeof e.cast=="function")e.cast_function=e.cast,e.cast=!0;else if(e.cast!==!0)throw new D("CSV_INVALID_OPTION_CAST",["Invalid option cast:","cast must be true or a function,",`got ${JSON.stringify(e.cast)}`],e);if(e.cast_date===void 0||e.cast_date===null||e.cast_date===!1||e.cast_date==="")e.cast_date=!1;else if(e.cast_date===!0)e.cast_date=function(n){const i=Date.parse(n);return isNaN(i)?n:new Date(i)};else if(typeof e.cast_date!="function")throw new D("CSV_INVALID_OPTION_CAST_DATE",["Invalid option cast_date:","cast_date must be true or a function,",`got ${JSON.stringify(e.cast_date)}`],e);if(e.cast_first_line_to_header=null,e.columns===!0)e.cast_first_line_to_header=void 0;else if(typeof e.columns=="function")e.cast_first_line_to_header=e.columns,e.columns=!0;else if(Array.isArray(e.columns))e.columns=At(e.columns);else if(e.columns===void 0||e.columns===null||e.columns===!1)e.columns=!1;else throw new D("CSV_INVALID_OPTION_COLUMNS",["Invalid option columns:","expect an array, a function or true,",`got ${JSON.stringify(e.columns)}`],e);if(e.group_columns_by_name===void 0||e.group_columns_by_name===null||e.group_columns_by_name===!1)e.group_columns_by_name=!1;else{if(e.group_columns_by_name!==!0)throw new D("CSV_INVALID_OPTION_GROUP_COLUMNS_BY_NAME",["Invalid option group_columns_by_name:","expect an boolean,",`got ${JSON.stringify(e.group_columns_by_name)}`],e);if(e.columns===!1)throw new D("CSV_INVALID_OPTION_GROUP_COLUMNS_BY_NAME",["Invalid option group_columns_by_name:","the `columns` mode must be activated."],e)}if(e.comment===void 0||e.comment===null||e.comment===!1||e.comment==="")e.comment=null;else if(typeof e.comment=="string"&&(e.comment=l.from(e.comment,e.encoding)),!Y(e.comment))throw new D("CSV_INVALID_OPTION_COMMENT",["Invalid option comment:","comment must be a buffer or a string,",`got ${JSON.stringify(e.comment)}`],e);if(e.comment_no_infix===void 0||e.comment_no_infix===null||e.comment_no_infix===!1)e.comment_no_infix=!1;else if(e.comment_no_infix!==!0)throw new D("CSV_INVALID_OPTION_COMMENT",["Invalid option comment_no_infix:","value must be a boolean,",`got ${JSON.stringify(e.comment_no_infix)}`],e);const t=JSON.stringify(e.delimiter);if(Array.isArray(e.delimiter)||(e.delimiter=[e.delimiter]),e.delimiter.length===0)throw new D("CSV_INVALID_OPTION_DELIMITER",["Invalid option delimiter:","delimiter must be a non empty string or buffer or array of string|buffer,",`got ${t}`],e);if(e.delimiter=e.delimiter.map(function(n){if(n==null||n===!1)return l.from(",",e.encoding);if(typeof n=="string"&&(n=l.from(n,e.encoding)),!Y(n)||n.length===0)throw new D("CSV_INVALID_OPTION_DELIMITER",["Invalid option delimiter:","delimiter must be a non empty string or buffer or array of string|buffer,",`got ${t}`],e);return n}),e.escape===void 0||e.escape===!0?e.escape=l.from('"',e.encoding):typeof e.escape=="string"?e.escape=l.from(e.escape,e.encoding):(e.escape===null||e.escape===!1)&&(e.escape=null),e.escape!==null&&!Y(e.escape))throw new Error(`Invalid Option: escape must be a buffer, a string or a boolean, got ${JSON.stringify(e.escape)}`);if(e.from===void 0||e.from===null)e.from=1;else if(typeof e.from=="string"&&/\d+/.test(e.from)&&(e.from=parseInt(e.from)),Number.isInteger(e.from)){if(e.from<0)throw new Error(`Invalid Option: from must be a positive integer, got ${JSON.stringify(r.from)}`)}else throw new Error(`Invalid Option: from must be an integer, got ${JSON.stringify(e.from)}`);if(e.from_line===void 0||e.from_line===null)e.from_line=1;else if(typeof e.from_line=="string"&&/\d+/.test(e.from_line)&&(e.from_line=parseInt(e.from_line)),Number.isInteger(e.from_line)){if(e.from_line<=0)throw new Error(`Invalid Option: from_line must be a positive integer greater than 0, got ${JSON.stringify(r.from_line)}`)}else throw new Error(`Invalid Option: from_line must be an integer, got ${JSON.stringify(r.from_line)}`);if(e.ignore_last_delimiters===void 0||e.ignore_last_delimiters===null)e.ignore_last_delimiters=!1;else if(typeof e.ignore_last_delimiters=="number")e.ignore_last_delimiters=Math.floor(e.ignore_last_delimiters),e.ignore_last_delimiters===0&&(e.ignore_last_delimiters=!1);else if(typeof e.ignore_last_delimiters!="boolean")throw new D("CSV_INVALID_OPTION_IGNORE_LAST_DELIMITERS",["Invalid option `ignore_last_delimiters`:","the value must be a boolean value or an integer,",`got ${JSON.stringify(e.ignore_last_delimiters)}`],e);if(e.ignore_last_delimiters===!0&&e.columns===!1)throw new D("CSV_IGNORE_LAST_DELIMITERS_REQUIRES_COLUMNS",["The option `ignore_last_delimiters`","requires the activation of the `columns` option"],e);if(e.info===void 0||e.info===null||e.info===!1)e.info=!1;else if(e.info!==!0)throw new Error(`Invalid Option: info must be true, got ${JSON.stringify(e.info)}`);if(e.max_record_size===void 0||e.max_record_size===null||e.max_record_size===!1)e.max_record_size=0;else if(!(Number.isInteger(e.max_record_size)&&e.max_record_size>=0))if(typeof e.max_record_size=="string"&&/\d+/.test(e.max_record_size))e.max_record_size=parseInt(e.max_record_size);else throw new Error(`Invalid Option: max_record_size must be a positive integer, got ${JSON.stringify(e.max_record_size)}`);if(e.objname===void 0||e.objname===null||e.objname===!1)e.objname=void 0;else if(Y(e.objname)){if(e.objname.length===0)throw new Error("Invalid Option: objname must be a non empty buffer");e.encoding===null||(e.objname=e.objname.toString(e.encoding))}else if(typeof e.objname=="string"){if(e.objname.length===0)throw new Error("Invalid Option: objname must be a non empty string")}else if(typeof e.objname!="number")throw new Error(`Invalid Option: objname must be a string or a buffer, got ${e.objname}`);if(e.objname!==void 0){if(typeof e.objname=="number"){if(e.columns!==!1)throw Error("Invalid Option: objname index cannot be combined with columns or be defined as a field")}else if(e.columns===!1)throw Error("Invalid Option: objname field must be combined with columns or be defined as an index")}if(e.on_record===void 0||e.on_record===null)e.on_record=void 0;else if(typeof e.on_record!="function")throw new D("CSV_INVALID_OPTION_ON_RECORD",["Invalid option `on_record`:","expect a function,",`got ${JSON.stringify(e.on_record)}`],e);if(e.on_skip!==void 0&&e.on_skip!==null&&typeof e.on_skip!="function")throw new Error(`Invalid Option: on_skip must be a function, got ${JSON.stringify(e.on_skip)}`);if(e.quote===null||e.quote===!1||e.quote==="")e.quote=null;else if(e.quote===void 0||e.quote===!0?e.quote=l.from('"',e.encoding):typeof e.quote=="string"&&(e.quote=l.from(e.quote,e.encoding)),!Y(e.quote))throw new Error(`Invalid Option: quote must be a buffer or a string, got ${JSON.stringify(e.quote)}`);if(e.raw===void 0||e.raw===null||e.raw===!1)e.raw=!1;else if(e.raw!==!0)throw new Error(`Invalid Option: raw must be true, got ${JSON.stringify(e.raw)}`);if(e.record_delimiter===void 0)e.record_delimiter=[];else if(typeof e.record_delimiter=="string"||Y(e.record_delimiter)){if(e.record_delimiter.length===0)throw new D("CSV_INVALID_OPTION_RECORD_DELIMITER",["Invalid option `record_delimiter`:","value must be a non empty string or buffer,",`got ${JSON.stringify(e.record_delimiter)}`],e);e.record_delimiter=[e.record_delimiter]}else if(!Array.isArray(e.record_delimiter))throw new D("CSV_INVALID_OPTION_RECORD_DELIMITER",["Invalid option `record_delimiter`:","value must be a string, a buffer or array of string|buffer,",`got ${JSON.stringify(e.record_delimiter)}`],e);if(e.record_delimiter=e.record_delimiter.map(function(n,i){if(typeof n!="string"&&!Y(n))throw new D("CSV_INVALID_OPTION_RECORD_DELIMITER",["Invalid option `record_delimiter`:","value must be a string, a buffer or array of string|buffer",`at index ${i},`,`got ${JSON.stringify(n)}`],e);if(n.length===0)throw new D("CSV_INVALID_OPTION_RECORD_DELIMITER",["Invalid option `record_delimiter`:","value must be a non empty string or buffer",`at index ${i},`,`got ${JSON.stringify(n)}`],e);return typeof n=="string"&&(n=l.from(n,e.encoding)),n}),typeof e.relax_column_count!="boolean")if(e.relax_column_count===void 0||e.relax_column_count===null)e.relax_column_count=!1;else throw new Error(`Invalid Option: relax_column_count must be a boolean, got ${JSON.stringify(e.relax_column_count)}`);if(typeof e.relax_column_count_less!="boolean")if(e.relax_column_count_less===void 0||e.relax_column_count_less===null)e.relax_column_count_less=!1;else throw new Error(`Invalid Option: relax_column_count_less must be a boolean, got ${JSON.stringify(e.relax_column_count_less)}`);if(typeof e.relax_column_count_more!="boolean")if(e.relax_column_count_more===void 0||e.relax_column_count_more===null)e.relax_column_count_more=!1;else throw new Error(`Invalid Option: relax_column_count_more must be a boolean, got ${JSON.stringify(e.relax_column_count_more)}`);if(typeof e.relax_quotes!="boolean")if(e.relax_quotes===void 0||e.relax_quotes===null)e.relax_quotes=!1;else throw new Error(`Invalid Option: relax_quotes must be a boolean, got ${JSON.stringify(e.relax_quotes)}`);if(typeof e.skip_empty_lines!="boolean")if(e.skip_empty_lines===void 0||e.skip_empty_lines===null)e.skip_empty_lines=!1;else throw new Error(`Invalid Option: skip_empty_lines must be a boolean, got ${JSON.stringify(e.skip_empty_lines)}`);if(typeof e.skip_records_with_empty_values!="boolean")if(e.skip_records_with_empty_values===void 0||e.skip_records_with_empty_values===null)e.skip_records_with_empty_values=!1;else throw new Error(`Invalid Option: skip_records_with_empty_values must be a boolean, got ${JSON.stringify(e.skip_records_with_empty_values)}`);if(typeof e.skip_records_with_error!="boolean")if(e.skip_records_with_error===void 0||e.skip_records_with_error===null)e.skip_records_with_error=!1;else throw new Error(`Invalid Option: skip_records_with_error must be a boolean, got ${JSON.stringify(e.skip_records_with_error)}`);if(e.rtrim===void 0||e.rtrim===null||e.rtrim===!1)e.rtrim=!1;else if(e.rtrim!==!0)throw new Error(`Invalid Option: rtrim must be a boolean, got ${JSON.stringify(e.rtrim)}`);if(e.ltrim===void 0||e.ltrim===null||e.ltrim===!1)e.ltrim=!1;else if(e.ltrim!==!0)throw new Error(`Invalid Option: ltrim must be a boolean, got ${JSON.stringify(e.ltrim)}`);if(e.trim===void 0||e.trim===null||e.trim===!1)e.trim=!1;else if(e.trim!==!0)throw new Error(`Invalid Option: trim must be a boolean, got ${JSON.stringify(e.trim)}`);if(e.trim===!0&&r.ltrim!==!1?e.ltrim=!0:e.ltrim!==!0&&(e.ltrim=!1),e.trim===!0&&r.rtrim!==!1?e.rtrim=!0:e.rtrim!==!0&&(e.rtrim=!1),e.to===void 0||e.to===null)e.to=-1;else if(typeof e.to=="string"&&/\d+/.test(e.to)&&(e.to=parseInt(e.to)),Number.isInteger(e.to)){if(e.to<=0)throw new Error(`Invalid Option: to must be a positive integer greater than 0, got ${JSON.stringify(r.to)}`)}else throw new Error(`Invalid Option: to must be an integer, got ${JSON.stringify(r.to)}`);if(e.to_line===void 0||e.to_line===null)e.to_line=-1;else if(typeof e.to_line=="string"&&/\d+/.test(e.to_line)&&(e.to_line=parseInt(e.to_line)),Number.isInteger(e.to_line)){if(e.to_line<=0)throw new Error(`Invalid Option: to_line must be a positive integer greater than 0, got ${JSON.stringify(r.to_line)}`)}else throw new Error(`Invalid Option: to_line must be an integer, got ${JSON.stringify(r.to_line)}`);return e},at=function(r){return r.every(e=>e==null||e.toString&&e.toString().trim()==="")},zr=13,Qr=10,ce={utf8:l.from([239,187,191]),utf16le:l.from([255,254])},Hr=function(r={}){const e={bytes:0,comment_lines:0,empty_lines:0,invalid_field_length:0,lines:1,records:0},t=st(r);return{info:e,original_options:r,options:t,state:Yr(t),__needMoreData:function(n,i,s){if(s)return!1;const{encoding:o,escape:a,quote:f}=this.options,{quoting:u,needMoreDataSize:c,recordDelimiterMaxLength:h}=this.state,_=i-n-1,g=Math.max(c,h===0?l.from(`\r
`,o).length:h,u?(a===null?0:a.length)+f.length:0,u?f.length+h:0);return _<g},parse:function(n,i,s,o){const{bom:a,comment_no_infix:f,encoding:u,from_line:c,ltrim:h,max_record_size:_,raw:g,relax_quotes:y,rtrim:b,skip_empty_lines:C,to:A,to_line:E}=this.options;let{comment:w,escape:p,quote:x,record_delimiter:z}=this.options;const{bomSkipped:ee,previousBuf:M,rawBuffer:ae,escapeIsQuote:v}=this.state;let d;if(M===void 0)if(n===void 0){o();return}else d=n;else M!==void 0&&n===void 0?d=M:d=l.concat([M,n]);if(ee===!1)if(a===!1)this.state.bomSkipped=!0;else if(d.length<3){if(i===!1){this.state.previousBuf=d;return}}else{for(const I in ce)if(ce[I].compare(d,0,ce[I].length)===0){const T=ce[I].length;this.state.bufBytesStart+=T,d=d.slice(T),this.options=st({...this.original_options,encoding:I}),{comment:w,escape:p,quote:x}=this.options;break}this.state.bomSkipped=!0}const N=d.length;let m;for(m=0;m<N&&!this.__needMoreData(m,N,i);m++){if(this.state.wasRowDelimiter===!0&&(this.info.lines++,this.state.wasRowDelimiter=!1),E!==-1&&this.info.lines>E){this.state.stop=!0,o();return}this.state.quoting===!1&&z.length===0&&this.__autoDiscoverRecordDelimiter(d,m)&&(z=this.options.record_delimiter);const I=d[m];if(g===!0&&ae.append(I),(I===zr||I===Qr)&&this.state.wasRowDelimiter===!1&&(this.state.wasRowDelimiter=!0),this.state.escaping===!0)this.state.escaping=!1;else{if(p!==null&&this.state.quoting===!0&&this.__isEscape(d,m,I)&&m+p.length<N)if(v){if(this.__isQuote(d,m+p.length)){this.state.escaping=!0,m+=p.length-1;continue}}else{this.state.escaping=!0,m+=p.length-1;continue}if(this.state.commenting===!1&&this.__isQuote(d,m))if(this.state.quoting===!0){const R=d[m+x.length],U=b&&this.__isCharTrimable(d,m+x.length),$=w!==null&&this.__compareBytes(w,d,m+x.length,R),G=this.__isDelimiter(d,m+x.length,R),ie=z.length===0?this.__autoDiscoverRecordDelimiter(d,m+x.length):this.__isRecordDelimiter(R,d,m+x.length);if(p!==null&&this.__isEscape(d,m,I)&&this.__isQuote(d,m+p.length))m+=p.length-1;else if(!R||G||ie||$||U){this.state.quoting=!1,this.state.wasQuoting=!0,m+=x.length-1;continue}else if(y===!1){const le=this.__error(new D("CSV_INVALID_CLOSING_QUOTE",["Invalid Closing Quote:",`got "${String.fromCharCode(R)}"`,`at line ${this.info.lines}`,"instead of delimiter, record delimiter, trimable character","(if activated) or comment"],this.options,this.__infoField()));if(le!==void 0)return le}else this.state.quoting=!1,this.state.wasQuoting=!0,this.state.field.prepend(x),m+=x.length-1}else if(this.state.field.length!==0){if(y===!1){const R=this.__infoField(),U=Object.keys(ce).map(G=>ce[G].equals(this.state.field.toString())?G:!1).filter(Boolean)[0],$=this.__error(new D("INVALID_OPENING_QUOTE",["Invalid Opening Quote:",`a quote is found on field ${JSON.stringify(R.column)} at line ${R.lines}, value is ${JSON.stringify(this.state.field.toString(u))}`,U?`(${U} bom)`:void 0],this.options,R,{field:this.state.field}));if($!==void 0)return $}}else{this.state.quoting=!0,m+=x.length-1;continue}if(this.state.quoting===!1){const R=this.__isRecordDelimiter(I,d,m);if(R!==0){if(this.state.commenting&&this.state.wasQuoting===!1&&this.state.record.length===0&&this.state.field.length===0)this.info.comment_lines++;else{if(this.state.enabled===!1&&this.info.lines+(this.state.wasRowDelimiter===!0?1:0)>=c){this.state.enabled=!0,this.__resetField(),this.__resetRecord(),m+=R-1;continue}if(C===!0&&this.state.wasQuoting===!1&&this.state.record.length===0&&this.state.field.length===0){this.info.empty_lines++,m+=R-1;continue}this.info.bytes=this.state.bufBytesStart+m;const G=this.__onField();if(G!==void 0)return G;this.info.bytes=this.state.bufBytesStart+m+R;const ie=this.__onRecord(s);if(ie!==void 0)return ie;if(A!==-1&&this.info.records>=A){this.state.stop=!0,o();return}}this.state.commenting=!1,m+=R-1;continue}if(this.state.commenting)continue;if(w!==null&&(f===!1||this.state.record.length===0&&this.state.field.length===0)&&this.__compareBytes(w,d,m,I)!==0){this.state.commenting=!0;continue}const U=this.__isDelimiter(d,m,I);if(U!==0){this.info.bytes=this.state.bufBytesStart+m;const $=this.__onField();if($!==void 0)return $;m+=U-1;continue}}}if(this.state.commenting===!1&&_!==0&&this.state.record_length+this.state.field.length>_)return this.__error(new D("CSV_MAX_RECORD_SIZE",["Max Record Size:","record exceed the maximum number of tolerated bytes",`of ${_}`,`at line ${this.info.lines}`],this.options,this.__infoField()));const T=h===!1||this.state.quoting===!0||this.state.field.length!==0||!this.__isCharTrimable(d,m),F=b===!1||this.state.wasQuoting===!1;if(T===!0&&F===!0)this.state.field.append(I);else{if(b===!0&&!this.__isCharTrimable(d,m))return this.__error(new D("CSV_NON_TRIMABLE_CHAR_AFTER_CLOSING_QUOTE",["Invalid Closing Quote:","found non trimable byte after quote",`at line ${this.info.lines}`],this.options,this.__infoField()));T===!1&&(m+=this.__isCharTrimable(d,m)-1);continue}}if(i===!0)if(this.state.quoting===!0){const I=this.__error(new D("CSV_QUOTE_NOT_CLOSED",["Quote Not Closed:",`the parsing is finished with an opening quote at line ${this.info.lines}`],this.options,this.__infoField()));if(I!==void 0)return I}else if(this.state.wasQuoting===!0||this.state.record.length!==0||this.state.field.length!==0){this.info.bytes=this.state.bufBytesStart+m;const I=this.__onField();if(I!==void 0)return I;const T=this.__onRecord(s);if(T!==void 0)return T}else this.state.wasRowDelimiter===!0?this.info.empty_lines++:this.state.commenting===!0&&this.info.comment_lines++;else this.state.bufBytesStart+=m,this.state.previousBuf=d.slice(m);this.state.wasRowDelimiter===!0&&(this.info.lines++,this.state.wasRowDelimiter=!1)},__onRecord:function(n){const{columns:i,group_columns_by_name:s,encoding:o,info:a,from:f,relax_column_count:u,relax_column_count_less:c,relax_column_count_more:h,raw:_,skip_records_with_empty_values:g}=this.options,{enabled:y,record:b}=this.state;if(y===!1)return this.__resetRecord();const C=b.length;if(i===!0){if(g===!0&&at(b)){this.__resetRecord();return}return this.__firstLineToColumns(b)}if(i===!1&&this.info.records===0&&(this.state.expectedRecordLength=C),C!==this.state.expectedRecordLength){const A=i===!1?new D("CSV_RECORD_INCONSISTENT_FIELDS_LENGTH",["Invalid Record Length:",`expect ${this.state.expectedRecordLength},`,`got ${C} on line ${this.info.lines}`],this.options,this.__infoField(),{record:b}):new D("CSV_RECORD_INCONSISTENT_COLUMNS",["Invalid Record Length:",`columns length is ${i.length},`,`got ${C} on line ${this.info.lines}`],this.options,this.__infoField(),{record:b});if(u===!0||c===!0&&C<this.state.expectedRecordLength||h===!0&&C>this.state.expectedRecordLength)this.info.invalid_field_length++,this.state.error=A;else{const E=this.__error(A);if(E)return E}}if(g===!0&&at(b)){this.__resetRecord();return}if(this.state.recordHasError===!0){this.__resetRecord(),this.state.recordHasError=!1;return}if(this.info.records++,f===1||this.info.records>=f){const{objname:A}=this.options;if(i!==!1){const E={};for(let w=0,p=b.length;w<p;w++)i[w]===void 0||i[w].disabled||(s===!0&&E[i[w].name]!==void 0?Array.isArray(E[i[w].name])?E[i[w].name]=E[i[w].name].concat(b[w]):E[i[w].name]=[E[i[w].name],b[w]]:E[i[w].name]=b[w]);if(_===!0||a===!0){const w=Object.assign({record:E},_===!0?{raw:this.state.rawBuffer.toString(o)}:{},a===!0?{info:this.__infoRecord()}:{}),p=this.__push(A===void 0?w:[E[A],w],n);if(p)return p}else{const w=this.__push(A===void 0?E:[E[A],E],n);if(w)return w}}else if(_===!0||a===!0){const E=Object.assign({record:b},_===!0?{raw:this.state.rawBuffer.toString(o)}:{},a===!0?{info:this.__infoRecord()}:{}),w=this.__push(A===void 0?E:[b[A],E],n);if(w)return w}else{const E=this.__push(A===void 0?b:[b[A],b],n);if(E)return E}}this.__resetRecord()},__firstLineToColumns:function(n){const{firstLineToHeaders:i}=this.state;try{const s=i===void 0?n:i.call(null,n);if(!Array.isArray(s))return this.__error(new D("CSV_INVALID_COLUMN_MAPPING",["Invalid Column Mapping:","expect an array from column function,",`got ${JSON.stringify(s)}`],this.options,this.__infoField(),{headers:s}));const o=At(s);this.state.expectedRecordLength=o.length,this.options.columns=o,this.__resetRecord();return}catch(s){return s}},__resetRecord:function(){this.options.raw===!0&&this.state.rawBuffer.reset(),this.state.error=void 0,this.state.record=[],this.state.record_length=0},__onField:function(){const{cast:n,encoding:i,rtrim:s,max_record_size:o}=this.options,{enabled:a,wasQuoting:f}=this.state;if(a===!1)return this.__resetField();let u=this.state.field.toString(i);if(s===!0&&f===!1&&(u=u.trimRight()),n===!0){const[c,h]=this.__cast(u);if(c!==void 0)return c;u=h}this.state.record.push(u),o!==0&&typeof u=="string"&&(this.state.record_length+=u.length),this.__resetField()},__resetField:function(){this.state.field.reset(),this.state.wasQuoting=!1},__push:function(n,i){const{on_record:s}=this.options;if(s!==void 0){const o=this.__infoRecord();try{n=s.call(null,n,o)}catch(a){return a}if(n==null)return}i(n)},__cast:function(n){const{columns:i,relax_column_count:s}=this.options;if(Array.isArray(i)===!0&&s&&this.options.columns.length<=this.state.record.length)return[void 0,void 0];if(this.state.castField!==null)try{const a=this.__infoField();return[void 0,this.state.castField.call(null,n,a)]}catch(a){return[a]}if(this.__isFloat(n))return[void 0,parseFloat(n)];if(this.options.cast_date!==!1){const a=this.__infoField();return[void 0,this.options.cast_date.call(null,n,a)]}return[void 0,n]},__isCharTrimable:function(n,i){return((o,a)=>{const{timchars:f}=this.state;e:for(let u=0;u<f.length;u++){const c=f[u];for(let h=0;h<c.length;h++)if(c[h]!==o[a+h])continue e;return c.length}return 0})(n,i)},__isFloat:function(n){return n-parseFloat(n)+1>=0},__compareBytes:function(n,i,s,o){if(n[0]!==o)return 0;const a=n.length;for(let f=1;f<a;f++)if(n[f]!==i[s+f])return 0;return a},__isDelimiter:function(n,i,s){const{delimiter:o,ignore_last_delimiters:a}=this.options;if(a===!0&&this.state.record.length===this.options.columns.length-1)return 0;if(a!==!1&&typeof a=="number"&&this.state.record.length===a-1)return 0;e:for(let f=0;f<o.length;f++){const u=o[f];if(u[0]===s){for(let c=1;c<u.length;c++)if(u[c]!==n[i+c])continue e;return u.length}}return 0},__isRecordDelimiter:function(n,i,s){const{record_delimiter:o}=this.options,a=o.length;e:for(let f=0;f<a;f++){const u=o[f],c=u.length;if(u[0]===n){for(let h=1;h<c;h++)if(u[h]!==i[s+h])continue e;return u.length}}return 0},__isEscape:function(n,i,s){const{escape:o}=this.options;if(o===null)return!1;const a=o.length;if(o[0]===s){for(let f=0;f<a;f++)if(o[f]!==n[i+f])return!1;return!0}return!1},__isQuote:function(n,i){const{quote:s}=this.options;if(s===null)return!1;const o=s.length;for(let a=0;a<o;a++)if(s[a]!==n[i+a])return!1;return!0},__autoDiscoverRecordDelimiter:function(n,i){const{encoding:s}=this.options,o=[l.from(`\r
`,s),l.from(`
`,s),l.from("\r",s)];e:for(let a=0;a<o.length;a++){const f=o[a].length;for(let u=0;u<f;u++)if(o[a][u]!==n[i+u])continue e;return this.options.record_delimiter.push(o[a]),this.state.recordDelimiterMaxLength=o[a].length,o[a].length}return 0},__error:function(n){const{encoding:i,raw:s,skip_records_with_error:o}=this.options,a=typeof n=="string"?new Error(n):n;if(o){this.state.recordHasError=!0,this.options.on_skip!==void 0&&this.options.on_skip(a,s?this.state.rawBuffer.toString(i):void 0);return}else return a},__infoDataSet:function(){return{...this.info,columns:this.options.columns}},__infoRecord:function(){const{columns:n,raw:i,encoding:s}=this.options;return{...this.__infoDataSet(),error:this.state.error,header:n===!0,index:this.state.record.length,raw:i?this.state.rawBuffer.toString(s):void 0}},__infoField:function(){const{columns:n}=this.options,i=Array.isArray(n);return{...this.__infoRecord(),column:i===!0?n.length>this.state.record.length?n[this.state.record.length].name:null:this.state.record.length,quoting:this.state.wasQuoting}}}},Tt=function(r,e={}){typeof r=="string"&&(r=l.from(r));const t=e&&e.objname?{}:[],n=Hr(e),i=f=>{n.options.objname===void 0?t.push(f):t[f[0]]=f[1]},s=()=>{},o=n.parse(r,!1,i,s);if(o!==void 0)throw o;const a=n.parse(void 0,!0,i,s);if(a!==void 0)throw a;return t};function Gr(r){console.log("Parsing CSV content for unique cargos...");try{const e=Tt(r,{columns:!0,skip_empty_lines:!0,trim:!0,delimiter:","}),t=[...new Set(e.map(n=>n.cargo))];return console.log("Found unique cargos:",t),t}catch(e){throw console.error("Error parsing CSV for cargos:",e),new Error("Failed to parse CSV for cargos: "+e.message)}}function jr(r){console.log("Starting to parse CSV content to Funcionarios...");try{const e=Tt(r,{columns:!0,skip_empty_lines:!0,trim:!0,delimiter:","});console.log(`Successfully parsed ${e.length} records from CSV`);const t=e.map((n,i)=>{var s,o;try{return{id:String(i+1),nombre:n.nombre,cargo:n.cargo,fechaInicio:lt(n.fecha_inicio),fechaFin:n.fecha_fin?lt(n.fecha_fin):null,highlighted:((s=n.highlited)==null?void 0:s.toLowerCase())==="true",color:((o=n.highlited)==null?void 0:o.toLowerCase())==="true"?"#E57373":void 0}}catch(a){throw console.error(`Error processing record ${i}:`,n,a),a}});return console.log("Successfully transformed all records to Funcionarios"),t}catch(e){throw console.error("Error parsing CSV to Funcionarios:",e),new Error("Failed to parse CSV to Funcionarios: "+e.message)}}function lt(r){const e=new Date(r);if(!isNaN(e.getTime()))return e;const[t,n,i]=r.split("/").map(o=>parseInt(o,10)),s=new Date(i,n-1,t);if(!isNaN(s.getTime()))return s;throw new Error(`Invalid date format: ${r}`)}class Wr{constructor(){we(this,"funcionarios",[]);we(this,"cargos",[]);we(this,"config",{startDate:new Date(2022,11,1),endDate:new Date(2025,2,21),timeScale:"month"})}async loadFuncionarios(){console.log("Loading funcionarios from CSV...");try{const e=`${Ze}/data/funcionarios-mininter.csv`;console.log("Fetching CSV from:",e);const t=await fetch(e);if(!t.ok)throw console.error(`Failed to fetch CSV: ${t.status} ${t.statusText}, URL: ${e}`),new Error(`HTTP error! status: ${t.status}`);console.log("CSV file fetched successfully");const n=await t.text();if(!n.trim())throw new Error("CSV file is empty");return console.log("CSV content:",n.substring(0,200)+"..."),console.log("CSV content loaded, parsing data..."),this.funcionarios=jr(n),console.log(`Parsed ${this.funcionarios.length} funcionarios`),this.cargos=Gr(n),console.log(`Found ${this.cargos.length} unique cargos:`,this.cargos),this.funcionarios.sort((i,s)=>i.fechaInicio.getTime()-s.fechaInicio.getTime()),this.funcionarios}catch(e){return console.error("Error loading funcionarios:",e),e instanceof Error&&console.error("Error details:",{message:e.message,stack:e.stack,base:Ze,location:window.location.href}),[]}}setTimeScale(e){this.config.timeScale=e}setDateRange(e,t){this.config.startDate=e,this.config.endDate=t}getConfig(){return{...this.config}}getFuncionarios(){return[...this.funcionarios]}getCargos(){return[...this.cargos]}getTimeIntervals(){const e=[];let t=new Date(this.config.startDate);for(;t<=this.config.endDate;)switch(e.push(new Date(t)),this.config.timeScale){case"day":t=new Date(t.setDate(t.getDate()+1));break;case"month":t=new Date(t.setMonth(t.getMonth()+1));break;case"year":t=new Date(t.setFullYear(t.getFullYear()+1));break}return e}}const Z=new Wr;var Xr=ne('<div class="loading svelte-1bxhanr">Cargando datos...</div>'),Zr=ne('<div class="error svelte-1bxhanr"> </div>'),Kr=ne('<span class="interim svelte-1bxhanr">(encargado)</span>'),en=ne('<div class="nombre svelte-1bxhanr"> <!></div>'),tn=ne('<div class="marker svelte-1bxhanr"><span class="marker-label svelte-1bxhanr"> </span> <div class="marker-line svelte-1bxhanr"></div></div>'),rn=ne('<div class="timeline svelte-1bxhanr"><div class="connector-line svelte-1bxhanr"></div> <div class="timeline-bar svelte-1bxhanr"><span class="dot start svelte-1bxhanr"></span> <span class="dot end svelte-1bxhanr"></span> <span class="duration-text svelte-1bxhanr"><span class="days-count svelte-1bxhanr"> </span> <span class="end-date svelte-1bxhanr"> </span></span></div></div>'),nn=ne('<div class="navigation-container svelte-1bxhanr"><button class="nav-button prev svelte-1bxhanr"><span class="arrow svelte-1bxhanr"></span></button> <section class="cargo-section svelte-1bxhanr"><h2 class="svelte-1bxhanr"> </h2> <div class="timeline-grid svelte-1bxhanr"><div class="nombres-column svelte-1bxhanr"><div class="spacer svelte-1bxhanr"></div> <!></div> <div class="timeline-column svelte-1bxhanr"><div class="year-markers svelte-1bxhanr"></div> <div class="timelines-container svelte-1bxhanr"></div></div></div></section> <button class="nav-button next svelte-1bxhanr"><span class="arrow svelte-1bxhanr"></span></button></div>'),on=ne('<div class="visualization-container svelte-1bxhanr"><div class="header svelte-1bxhanr"><h1 class="title svelte-1bxhanr">Cambios en puestos clave del Ministerio del Interior</h1> <p class="subtitle svelte-1bxhanr">Durante el gobierno de Dina Boluarte, se registraron 55 cambios en puestos de alta direccin y rganos de lneas del Ministerio del Interior. Entre los cargos de mayor rotacin est el de ministro del Interior (6 veces) y jefe del gabinete de asesores (9).</p></div> <div class="timeline-container svelte-1bxhanr"><!></div> <div class="footer svelte-1bxhanr"><p class="footnote svelte-1bxhanr">Nota: Las fechas de inicio y fin se basaron en la publicacin de las resoluciones ministeriales publicados en el diario oficial El Peruano</p> <div class="attribution svelte-1bxhanr"><p class="credit svelte-1bxhanr"><span class="label svelte-1bxhanr">Desarrollo:</span> <span class="value svelte-1bxhanr">Gianfranco Huamn</span></p> <p class="source svelte-1bxhanr"><span class="label svelte-1bxhanr">Fuente:</span> <span class="value svelte-1bxhanr">El Peruano</span></p></div></div></div>');function mn(r,e){er(e,!1);let t=[],n=fe(new Map),i=fe([]),s=fe(!0),o=fe(null),a=fe([]),f,u=fe(0);function c(v){return v<=480?12:v<=768?8:5}function h(v){const d=Z.getConfig(),N=d.startDate,m=d.endDate,I=m.getTime()-N.getTime(),T=[];let F=new Date(N);const R=c(v);for(;F<=m;){const U=(F.getTime()-N.getTime())/I*100;T.push({date:new Date(F),position:U}),F=new Date(F.setMonth(F.getMonth()+R))}return T}function _(){f=window.innerWidth,te(a,h(f))}We(async()=>{try{if(te(s,!0),te(o,null),t=await Z.loadFuncionarios(),t.length===0)throw new Error("No se pudieron cargar los datos. Por favor, intente nuevamente.");te(i,Z.getCargos()),f=window.innerWidth,te(a,h(f)),window.addEventListener("resize",_),te(n,new Map(S(i).map(v=>[v,t.filter(d=>d.cargo===v)])))}catch(v){te(o,v.message),console.error("Error loading data:",v)}finally{te(s,!1)}}),We(()=>()=>{window.removeEventListener("resize",_)});function g(v){return v.toLocaleDateString("es",{month:"short",year:"numeric"})}function y(v){const d=v.fechaInicio,N=v.fechaFin||new Date,m=Z.getConfig().endDate.getTime()-Z.getConfig().startDate.getTime(),I=d.getTime()-Z.getConfig().startDate.getTime(),T=N.getTime()-d.getTime(),F=I/m*100,R=T/m*100;return`left: ${F}%; width: ${R}%;`}function b(v){const d=Z.getConfig().endDate.getTime()-Z.getConfig().startDate.getTime(),N=v.fechaInicio.getTime()-Z.getConfig().startDate.getTime(),m=(v.fechaFin||new Date).getTime()-v.fechaInicio.getTime(),I=N/d*100,T=m/d*100;return f<=480?I+T<=75:f<=768?I+T<=80:I+T<=85}function C(v,d){const N=Math.abs(d.getTime()-v.getTime());return Math.ceil(N/(1e3*60*60*24))}function A(v){return`${v} ${v===1?"da":"das"}`}function E(v){return v.toLocaleDateString("es",{day:"numeric",month:"short",year:"numeric"})}function w(){S(u)<S(i).length-1&&Ge(u)}function p(){S(u)>0&&Ge(u,-1)}nr();var x=on(),z=J(B(x),2),ee=B(z);{var M=v=>{var d=Xr();W(v,d)},ae=v=>{var d=Bt(),N=rr(d);{var m=T=>{var F=Zr(),R=B(F,!0);O(F),X(()=>ue(R,S(o))),W(T,F)},I=T=>{var F=nn(),R=B(F),U=J(R,2),$=B(U),G=B($,!0);O($);var ie=J($,2),le=B(ie),Ct=J(B(le),2);Fe(Ct,1,()=>S(n).get(S(i)[S(u)])||[],Ce,(he,V)=>{var P=en(),j=B(P),_e=J(j);{var de=me=>{var pe=Kr();W(me,pe)};Te(_e,me=>{S(V).isInterim&&me(de)})}O(P),X(()=>{et(P,"highlighted",S(V).highlighted),ue(j,`${S(V).nombre??""} `)}),W(he,P)}),O(le);var ke=J(le,2),De=B(ke);Fe(De,5,()=>S(a),Ce,(he,V)=>{var P=tn(),j=B(P),_e=B(j,!0);X(()=>ue(_e,g(S(V).date))),O(j),Qe(2),O(P),X(()=>Xe(P,"style",`left: ${S(V).position??""}%`)),W(he,P)}),O(De);var $e=J(De,2);Fe($e,5,()=>S(n).get(S(i)[S(u)])||[],Ce,(he,V)=>{var P=rn(),j=J(B(P),2);const _e=He(()=>y(S(V)));var de=J(B(j),4);const me=He(()=>!b(S(V)));X(()=>et(de,"text-right",S(me)));var pe=B(de),Ft=B(pe,!0);X(()=>ue(Ft,A(C(S(V).fechaInicio,S(V).fechaFin||new Date)))),O(pe);var Ve=J(pe,2),Nt=B(Ve,!0);X(()=>ue(Nt,E(S(V).fechaFin||new Date))),O(Ve),O(de),O(j),O(P),X(()=>Xe(j,"style",S(_e))),W(he,P)}),O($e),O(ke),O(ie),O(U);var Pe=J(U,2);O(F),X(()=>{R.disabled=S(u)===0,ue(G,S(i)[S(u)]),Pe.disabled=S(u)===S(i).length-1}),je("click",R,p),je("click",Pe,w),W(T,F)};Te(N,T=>{S(o)?T(m):T(I,!1)},!0)}W(v,d)};Te(ee,v=>{S(s)?v(M):v(ae,!1)})}O(z),Qe(2),O(x),W(r,x),tr()}export{mn as component};
