var Wt=Object.defineProperty;var Xt=(r,e,t)=>e in r?Wt(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t;var Ee=(r,e,t)=>Xt(r,typeof e!="symbol"?e+"":e,t);import"../chunks/disclose-version.Bg9kRutz.js";import"../chunks/legacy.CtaTdtmd.js";import{i as ue,D as Be,y as Zt,x as Kt,C as er,E as tr,S as rr,a1 as Et,H as ir,G as rt,I as Ue,B as ve,Z as nr,as as Ce,J as It,K as bt,M as or,U as St,z as Fe,at as Qe,au as it,av as je,aw as sr,a0 as ar,ax as lr,N as fr,ay as Ct,Q as Ft,az as ur,v as cr,a6 as nt,aA as hr,X as dr,F as _r,aB as pr,aC as mr,ab as gr,b as wr,aD as vr,o as xe,aE as xr,O as ot,P as st,p as yr,l as Er,w as J,g as _,aF as ee,s as z,m as $,k as Ir,n as L,aG as br,t as te,an as Pe,aH as at}from"../chunks/runtime.C2nXZVA0.js";import{a as Sr,s as de,e as lt}from"../chunks/render.BFCktlAZ.js";import{o as ft,i as Ve}from"../chunks/index-client.CgNeHUIt.js";import{a as re,t as ae,c as Cr}from"../chunks/template.CiILOi1a.js";import{s as Ie}from"../chunks/attributes.B0_zK-Ie.js";import{i as Fr}from"../chunks/lifecycle.CO5-VppB.js";import{b as ut}from"../chunks/paths.D-HJgWxy.js";function qe(r,e){return e}function Ar(r,e,t,i){for(var n=[],o=e.length,s=0;s<o;s++)sr(e[s].e,n,!0);var a=o>0&&n.length===0&&t!==null;if(a){var f=t.parentNode;ar(f),f.append(t),i.clear(),se(r,e[0].prev,e[o-1].next)}lr(n,()=>{for(var u=0;u<o;u++){var c=e[u];a||(i.delete(c.k),se(r,c.prev,c.next)),fr(c.e,!a)}})}function Ye(r,e,t,i,n,o=null){var s=r,a={flags:e,items:new Map,first:null},f=(e&Ct)!==0;if(f){var u=r;s=ue?Be(Zt(u)):u.appendChild(Kt())}ue&&er();var c=null,h=!1;tr(()=>{var d=t(),p=rr(d)?d:d==null?[]:Et(d),m=p.length;if(h&&m===0)return;h=m===0;let g=!1;if(ue){var F=s.data===ir;F!==(m===0)&&(s=rt(),Be(s),Ue(!1),g=!0)}if(ue){for(var E=null,I,x=0;x<m;x++){if(ve.nodeType===8&&ve.data===nr){s=ve,g=!0,Ue(!1);break}var v=p[x],b=i(v,x);I=At(ve,a,E,null,v,b,x,n,e),a.items.set(b,I),E=I}m>0&&Be(rt())}if(!ue){var V=Ft;Tr(p,a,s,n,e,(V.f&Ce)!==0,i)}o!==null&&(m===0?c?It(c):c=bt(()=>o(s)):c!==null&&or(c,()=>{c=null})),g&&Ue(!0),t()}),ue&&(s=ve)}function Tr(r,e,t,i,n,o,s){var D,w,T,C;var a=(n&ur)!==0,f=(n&(Qe|je))!==0,u=r.length,c=e.items,h=e.first,d=h,p,m=null,g,F=[],E=[],I,x,v,b;if(a)for(b=0;b<u;b+=1)I=r[b],x=s(I,b),v=c.get(x),v!==void 0&&((D=v.a)==null||D.measure(),(g??(g=new Set)).add(v));for(b=0;b<u;b+=1){if(I=r[b],x=s(I,b),v=c.get(x),v===void 0){var V=d?d.e.nodes_start:t;m=At(V,e,m,m===null?e.first:m.next,I,x,b,i,n),c.set(x,m),F=[],E=[],d=m.next;continue}if(f&&Rr(v,I,b,n),v.e.f&Ce&&(It(v.e),a&&((w=v.a)==null||w.unfix(),(g??(g=new Set)).delete(v))),v!==d){if(p!==void 0&&p.has(v)){if(F.length<E.length){var j=E[0],M;m=j.prev;var he=F[0],Z=F[F.length-1];for(M=0;M<F.length;M+=1)ct(F[M],j,t);for(M=0;M<E.length;M+=1)p.delete(E[M]);se(e,he.prev,Z.next),se(e,m,he),se(e,Z,j),d=j,m=Z,b-=1,F=[],E=[]}else p.delete(v),ct(v,d,t),se(e,v.prev,v.next),se(e,v,m===null?e.first:m.next),se(e,m,v),m=v;continue}for(F=[],E=[];d!==null&&d.k!==x;)(o||!(d.e.f&Ce))&&(p??(p=new Set)).add(d),E.push(d),d=d.next;if(d===null)continue;v=d}F.push(v),m=v,d=v.next}if(d!==null||p!==void 0){for(var S=p===void 0?[]:Et(p);d!==null;)(o||!(d.e.f&Ce))&&S.push(d),d=d.next;var K=S.length;if(K>0){var y=n&Ct&&u===0?t:null;if(a){for(b=0;b<K;b+=1)(T=S[b].a)==null||T.measure();for(b=0;b<K;b+=1)(C=S[b].a)==null||C.fix()}Ar(e,S,y,c)}}a&&St(()=>{var O;if(g!==void 0)for(v of g)(O=v.a)==null||O.apply()}),Fe.first=e.first&&e.first.e,Fe.last=m&&m.e}function Rr(r,e,t,i){i&Qe&&it(r.v,e),i&je?it(r.i,t):r.i=t}function At(r,e,t,i,n,o,s,a,f){var u=(f&Qe)!==0,c=(f&hr)===0,h=u?c?cr(n):nt(n):n,d=f&je?nt(s):s,p={i:d,v:h,k:o,a:null,e:null,prev:t,next:i};try{return p.e=bt(()=>a(r,h,d),ue),p.e.prev=t&&t.e,p.e.next=i&&i.e,t===null?e.first=p:(t.next=p,t.e.next=p.e),i!==null&&(i.prev=p,i.e.prev=p.e),p}finally{}}function ct(r,e,t){for(var i=r.next?r.next.e.nodes_start:t,n=e?e.e.nodes_start:t,o=r.e.nodes_start;o!==i;){var s=dr(o);n.before(o),o=s}}function se(r,e,t){e===null?r.first=t:(e.next=t,e.e.next=t&&t.e),t!==null&&(t.prev=e,t.e.prev=e&&e.e)}function ht(r,e,t){if(t){if(r.classList.contains(e))return;r.classList.add(e)}else{if(!r.classList.contains(e))return;r.classList.remove(e)}}const Dr=()=>performance.now(),ne={tick:r=>requestAnimationFrame(r),now:()=>Dr(),tasks:new Set};function Tt(){const r=ne.now();ne.tasks.forEach(e=>{e.c(r)||(ne.tasks.delete(e),e.f())}),ne.tasks.size!==0&&ne.tick(Tt)}function Nr(r){let e;return ne.tasks.size===0&&ne.tick(Tt),{promise:new Promise(t=>{ne.tasks.add(e={c:r,f:t})}),abort(){ne.tasks.delete(e)}}}function be(r,e){r.dispatchEvent(new CustomEvent(e))}function Or(r){if(r==="float")return"cssFloat";if(r==="offset")return"cssOffset";if(r.startsWith("--"))return r;const e=r.split("-");return e.length===1?e[0]:e[0]+e.slice(1).map(t=>t[0].toUpperCase()+t.slice(1)).join("")}function dt(r){const e={},t=r.split(";");for(const i of t){const[n,o]=i.split(":");if(!n||o===void 0)break;const s=Or(n.trim());e[s]=o.trim()}return e}const kr=r=>r;function Se(r,e,t,i){var n=(r&xr)!==0,o="both",s,a=e.inert,f,u;function c(){var g=Ft,F=Fe;ot(null),st(null);try{return s??(s=t()(e,(i==null?void 0:i())??{},{direction:o}))}finally{ot(g),st(F)}}var h={is_global:n,in(){e.inert=a,be(e,"introstart"),f=ze(e,c(),u,1,()=>{be(e,"introend"),f==null||f.abort(),f=s=void 0})},out(g){e.inert=!0,be(e,"outrostart"),u=ze(e,c(),f,0,()=>{be(e,"outroend"),g==null||g()})},stop:()=>{f==null||f.abort(),u==null||u.abort()}},d=Fe;if((d.transitions??(d.transitions=[])).push(h),Sr){var p=n;if(!p){for(var m=d.parent;m&&m.f&_r;)for(;(m=m.parent)&&!(m.f&pr););p=!m||(m.f&mr)!==0}p&&gr(()=>{wr(()=>h.in())})}}function ze(r,e,t,i,n){var o=i===1;if(vr(e)){var s,a=!1;return St(()=>{if(!a){var F=e({direction:o?"in":"out"});s=ze(r,F,t,i,n)}}),{abort:()=>{a=!0,s==null||s.abort()},deactivate:()=>s.deactivate(),reset:()=>s.reset(),t:()=>s.t()}}if(t==null||t.deactivate(),!(e!=null&&e.duration))return n(),{abort:xe,deactivate:xe,reset:xe,t:()=>i};const{delay:f=0,css:u,tick:c,easing:h=kr}=e;var d=[];if(o&&t===void 0&&(c&&c(0,1),u)){var p=dt(u(0,1));d.push(p,p)}var m=()=>1-i,g=r.animate(d,{duration:f});return g.onfinish=()=>{var F=(t==null?void 0:t.t())??1-i;t==null||t.abort();var E=i-F,I=e.duration*Math.abs(E),x=[];if(I>0){if(u)for(var v=Math.ceil(I/16.666666666666668),b=0;b<=v;b+=1){var V=F+E*h(b/v),j=u(V,1-V);x.push(dt(j))}m=()=>{var M=g.currentTime;return F+E*h(M/I)},c&&Nr(()=>{if(g.playState!=="running")return!1;var M=m();return c(M,1-M),!0})}g=r.animate(x,{duration:I,fill:"forwards"}),g.onfinish=()=>{m=()=>i,c==null||c(i,1-i),n()}},{abort:()=>{g&&(g.cancel(),g.effect=null,g.onfinish=xe)},deactivate:()=>{n=xe},reset:()=>{i===0&&(c==null||c(1,0))},t:()=>m()}}const Mr=r=>r;function Lr(r){const e=r-1;return e*e*e+1}function Je(r,{delay:e=0,duration:t=400,easing:i=Mr}={}){const n=+getComputedStyle(r).opacity;return{delay:e,duration:t,easing:i,css:o=>`opacity: ${o*n}`}}function $r(r,{delay:e=0,duration:t=400,easing:i=Lr,axis:n="y"}={}){const o=getComputedStyle(r),s=+o.opacity,a=n==="y"?"height":"width",f=parseFloat(o[a]),u=n==="y"?["top","bottom"]:["left","right"],c=u.map(E=>`${E[0].toUpperCase()}${E.slice(1)}`),h=parseFloat(o[`padding${c[0]}`]),d=parseFloat(o[`padding${c[1]}`]),p=parseFloat(o[`margin${c[0]}`]),m=parseFloat(o[`margin${c[1]}`]),g=parseFloat(o[`border${c[0]}Width`]),F=parseFloat(o[`border${c[1]}Width`]);return{delay:e,duration:t,easing:i,css:E=>`overflow: hidden;opacity: ${Math.min(E*20,1)*s};${a}: ${E*f}px;padding-${u[0]}: ${E*h}px;padding-${u[1]}: ${E*d}px;margin-${u[0]}: ${E*p}px;margin-${u[1]}: ${E*m}px;border-${u[0]}-width: ${E*g}px;border-${u[1]}-width: ${E*F}px;`}}var _t=typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{},W=[],H=[],Br=typeof Uint8Array<"u"?Uint8Array:Array,Ge=!1;function Rt(){Ge=!0;for(var r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",e=0,t=r.length;e<t;++e)W[e]=r[e],H[r.charCodeAt(e)]=e;H[45]=62,H[95]=63}function Ur(r){Ge||Rt();var e,t,i,n,o,s,a=r.length;if(a%4>0)throw new Error("Invalid string. Length must be a multiple of 4");o=r[a-2]==="="?2:r[a-1]==="="?1:0,s=new Br(a*3/4-o),i=o>0?a-4:a;var f=0;for(e=0,t=0;e<i;e+=4,t+=3)n=H[r.charCodeAt(e)]<<18|H[r.charCodeAt(e+1)]<<12|H[r.charCodeAt(e+2)]<<6|H[r.charCodeAt(e+3)],s[f++]=n>>16&255,s[f++]=n>>8&255,s[f++]=n&255;return o===2?(n=H[r.charCodeAt(e)]<<2|H[r.charCodeAt(e+1)]>>4,s[f++]=n&255):o===1&&(n=H[r.charCodeAt(e)]<<10|H[r.charCodeAt(e+1)]<<4|H[r.charCodeAt(e+2)]>>2,s[f++]=n>>8&255,s[f++]=n&255),s}function Pr(r){return W[r>>18&63]+W[r>>12&63]+W[r>>6&63]+W[r&63]}function Vr(r,e,t){for(var i,n=[],o=e;o<t;o+=3)i=(r[o]<<16)+(r[o+1]<<8)+r[o+2],n.push(Pr(i));return n.join("")}function pt(r){Ge||Rt();for(var e,t=r.length,i=t%3,n="",o=[],s=16383,a=0,f=t-i;a<f;a+=s)o.push(Vr(r,a,a+s>f?f:a+s));return i===1?(e=r[t-1],n+=W[e>>2],n+=W[e<<4&63],n+="=="):i===2&&(e=(r[t-2]<<8)+r[t-1],n+=W[e>>10],n+=W[e>>4&63],n+=W[e<<2&63],n+="="),o.push(n),o.join("")}function Re(r,e,t,i,n){var o,s,a=n*8-i-1,f=(1<<a)-1,u=f>>1,c=-7,h=t?n-1:0,d=t?-1:1,p=r[e+h];for(h+=d,o=p&(1<<-c)-1,p>>=-c,c+=a;c>0;o=o*256+r[e+h],h+=d,c-=8);for(s=o&(1<<-c)-1,o>>=-c,c+=i;c>0;s=s*256+r[e+h],h+=d,c-=8);if(o===0)o=1-u;else{if(o===f)return s?NaN:(p?-1:1)*(1/0);s=s+Math.pow(2,i),o=o-u}return(p?-1:1)*s*Math.pow(2,o-i)}function Dt(r,e,t,i,n,o){var s,a,f,u=o*8-n-1,c=(1<<u)-1,h=c>>1,d=n===23?Math.pow(2,-24)-Math.pow(2,-77):0,p=i?0:o-1,m=i?1:-1,g=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,s=c):(s=Math.floor(Math.log(e)/Math.LN2),e*(f=Math.pow(2,-s))<1&&(s--,f*=2),s+h>=1?e+=d/f:e+=d*Math.pow(2,1-h),e*f>=2&&(s++,f/=2),s+h>=c?(a=0,s=c):s+h>=1?(a=(e*f-1)*Math.pow(2,n),s=s+h):(a=e*Math.pow(2,h-1)*Math.pow(2,n),s=0));n>=8;r[t+p]=a&255,p+=m,a/=256,n-=8);for(s=s<<n|a,u+=n;u>0;r[t+p]=s&255,p+=m,s/=256,u-=8);r[t+p-m]|=g*128}var qr={}.toString,Nt=Array.isArray||function(r){return qr.call(r)=="[object Array]"},Yr=50;l.TYPED_ARRAY_SUPPORT=_t.TYPED_ARRAY_SUPPORT!==void 0?_t.TYPED_ARRAY_SUPPORT:!0;Ae();function Ae(){return l.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function oe(r,e){if(Ae()<e)throw new RangeError("Invalid typed array length");return l.TYPED_ARRAY_SUPPORT?(r=new Uint8Array(e),r.__proto__=l.prototype):(r===null&&(r=new l(e)),r.length=e),r}function l(r,e,t){if(!l.TYPED_ARRAY_SUPPORT&&!(this instanceof l))return new l(r,e,t);if(typeof r=="number"){if(typeof e=="string")throw new Error("If encoding is specified then the first argument must be a string");return We(this,r)}return Ot(this,r,e,t)}l.poolSize=8192;l._augment=function(r){return r.__proto__=l.prototype,r};function Ot(r,e,t,i){if(typeof e=="number")throw new TypeError('"value" argument must not be a number');return typeof ArrayBuffer<"u"&&e instanceof ArrayBuffer?Hr(r,e,t,i):typeof e=="string"?zr(r,e,t):Qr(r,e)}l.from=function(r,e,t){return Ot(null,r,e,t)};l.TYPED_ARRAY_SUPPORT&&(l.prototype.__proto__=Uint8Array.prototype,l.__proto__=Uint8Array,typeof Symbol<"u"&&Symbol.species&&l[Symbol.species]);function kt(r){if(typeof r!="number")throw new TypeError('"size" argument must be a number');if(r<0)throw new RangeError('"size" argument must not be negative')}function Jr(r,e,t,i){return kt(e),e<=0?oe(r,e):t!==void 0?typeof i=="string"?oe(r,e).fill(t,i):oe(r,e).fill(t):oe(r,e)}l.alloc=function(r,e,t){return Jr(null,r,e,t)};function We(r,e){if(kt(e),r=oe(r,e<0?0:Xe(e)|0),!l.TYPED_ARRAY_SUPPORT)for(var t=0;t<e;++t)r[t]=0;return r}l.allocUnsafe=function(r){return We(null,r)};l.allocUnsafeSlow=function(r){return We(null,r)};function zr(r,e,t){if((typeof t!="string"||t==="")&&(t="utf8"),!l.isEncoding(t))throw new TypeError('"encoding" must be a valid string encoding');var i=Mt(e,t)|0;r=oe(r,i);var n=r.write(e,t);return n!==i&&(r=r.slice(0,n)),r}function He(r,e){var t=e.length<0?0:Xe(e.length)|0;r=oe(r,t);for(var i=0;i<t;i+=1)r[i]=e[i]&255;return r}function Hr(r,e,t,i){if(e.byteLength,t<0||e.byteLength<t)throw new RangeError("'offset' is out of bounds");if(e.byteLength<t+(i||0))throw new RangeError("'length' is out of bounds");return t===void 0&&i===void 0?e=new Uint8Array(e):i===void 0?e=new Uint8Array(e,t):e=new Uint8Array(e,t,i),l.TYPED_ARRAY_SUPPORT?(r=e,r.__proto__=l.prototype):r=He(r,e),r}function Qr(r,e){if(X(e)){var t=Xe(e.length)|0;return r=oe(r,t),r.length===0||e.copy(r,0,0,t),r}if(e){if(typeof ArrayBuffer<"u"&&e.buffer instanceof ArrayBuffer||"length"in e)return typeof e.length!="number"||hi(e.length)?oe(r,0):He(r,e);if(e.type==="Buffer"&&Nt(e.data))return He(r,e.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function Xe(r){if(r>=Ae())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+Ae().toString(16)+" bytes");return r|0}l.isBuffer=Q;function X(r){return!!(r!=null&&r._isBuffer)}l.compare=function(e,t){if(!X(e)||!X(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var i=e.length,n=t.length,o=0,s=Math.min(i,n);o<s;++o)if(e[o]!==t[o]){i=e[o],n=t[o];break}return i<n?-1:n<i?1:0};l.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}};l.concat=function(e,t){if(!Nt(e))throw new TypeError('"list" argument must be an Array of Buffers');if(e.length===0)return l.alloc(0);var i;if(t===void 0)for(t=0,i=0;i<e.length;++i)t+=e[i].length;var n=l.allocUnsafe(t),o=0;for(i=0;i<e.length;++i){var s=e[i];if(!X(s))throw new TypeError('"list" argument must be an Array of Buffers');s.copy(n,o),o+=s.length}return n};function Mt(r,e){if(X(r))return r.length;if(typeof ArrayBuffer<"u"&&typeof ArrayBuffer.isView=="function"&&(ArrayBuffer.isView(r)||r instanceof ArrayBuffer))return r.byteLength;typeof r!="string"&&(r=""+r);var t=r.length;if(t===0)return 0;for(var i=!1;;)switch(e){case"ascii":case"latin1":case"binary":return t;case"utf8":case"utf-8":case void 0:return Te(r).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return t*2;case"hex":return t>>>1;case"base64":return qt(r).length;default:if(i)return Te(r).length;e=(""+e).toLowerCase(),i=!0}}l.byteLength=Mt;function jr(r,e,t){var i=!1;if((e===void 0||e<0)&&(e=0),e>this.length||((t===void 0||t>this.length)&&(t=this.length),t<=0)||(t>>>=0,e>>>=0,t<=e))return"";for(r||(r="utf8");;)switch(r){case"hex":return ni(this,e,t);case"utf8":case"utf-8":return Bt(this,e,t);case"ascii":return ri(this,e,t);case"latin1":case"binary":return ii(this,e,t);case"base64":return ei(this,e,t);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return oi(this,e,t);default:if(i)throw new TypeError("Unknown encoding: "+r);r=(r+"").toLowerCase(),i=!0}}l.prototype._isBuffer=!0;function ce(r,e,t){var i=r[e];r[e]=r[t],r[t]=i}l.prototype.swap16=function(){var e=this.length;if(e%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)ce(this,t,t+1);return this};l.prototype.swap32=function(){var e=this.length;if(e%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)ce(this,t,t+3),ce(this,t+1,t+2);return this};l.prototype.swap64=function(){var e=this.length;if(e%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)ce(this,t,t+7),ce(this,t+1,t+6),ce(this,t+2,t+5),ce(this,t+3,t+4);return this};l.prototype.toString=function(){var e=this.length|0;return e===0?"":arguments.length===0?Bt(this,0,e):jr.apply(this,arguments)};l.prototype.equals=function(e){if(!X(e))throw new TypeError("Argument must be a Buffer");return this===e?!0:l.compare(this,e)===0};l.prototype.inspect=function(){var e="",t=Yr;return this.length>0&&(e=this.toString("hex",0,t).match(/.{2}/g).join(" "),this.length>t&&(e+=" ... ")),"<Buffer "+e+">"};l.prototype.compare=function(e,t,i,n,o){if(!X(e))throw new TypeError("Argument must be a Buffer");if(t===void 0&&(t=0),i===void 0&&(i=e?e.length:0),n===void 0&&(n=0),o===void 0&&(o=this.length),t<0||i>e.length||n<0||o>this.length)throw new RangeError("out of range index");if(n>=o&&t>=i)return 0;if(n>=o)return-1;if(t>=i)return 1;if(t>>>=0,i>>>=0,n>>>=0,o>>>=0,this===e)return 0;for(var s=o-n,a=i-t,f=Math.min(s,a),u=this.slice(n,o),c=e.slice(t,i),h=0;h<f;++h)if(u[h]!==c[h]){s=u[h],a=c[h];break}return s<a?-1:a<s?1:0};function Lt(r,e,t,i,n){if(r.length===0)return-1;if(typeof t=="string"?(i=t,t=0):t>2147483647?t=2147483647:t<-2147483648&&(t=-2147483648),t=+t,isNaN(t)&&(t=n?0:r.length-1),t<0&&(t=r.length+t),t>=r.length){if(n)return-1;t=r.length-1}else if(t<0)if(n)t=0;else return-1;if(typeof e=="string"&&(e=l.from(e,i)),X(e))return e.length===0?-1:mt(r,e,t,i,n);if(typeof e=="number")return e=e&255,l.TYPED_ARRAY_SUPPORT&&typeof Uint8Array.prototype.indexOf=="function"?n?Uint8Array.prototype.indexOf.call(r,e,t):Uint8Array.prototype.lastIndexOf.call(r,e,t):mt(r,[e],t,i,n);throw new TypeError("val must be string, number or Buffer")}function mt(r,e,t,i,n){var o=1,s=r.length,a=e.length;if(i!==void 0&&(i=String(i).toLowerCase(),i==="ucs2"||i==="ucs-2"||i==="utf16le"||i==="utf-16le")){if(r.length<2||e.length<2)return-1;o=2,s/=2,a/=2,t/=2}function f(p,m){return o===1?p[m]:p.readUInt16BE(m*o)}var u;if(n){var c=-1;for(u=t;u<s;u++)if(f(r,u)===f(e,c===-1?0:u-c)){if(c===-1&&(c=u),u-c+1===a)return c*o}else c!==-1&&(u-=u-c),c=-1}else for(t+a>s&&(t=s-a),u=t;u>=0;u--){for(var h=!0,d=0;d<a;d++)if(f(r,u+d)!==f(e,d)){h=!1;break}if(h)return u}return-1}l.prototype.includes=function(e,t,i){return this.indexOf(e,t,i)!==-1};l.prototype.indexOf=function(e,t,i){return Lt(this,e,t,i,!0)};l.prototype.lastIndexOf=function(e,t,i){return Lt(this,e,t,i,!1)};function Gr(r,e,t,i){t=Number(t)||0;var n=r.length-t;i?(i=Number(i),i>n&&(i=n)):i=n;var o=e.length;if(o%2!==0)throw new TypeError("Invalid hex string");i>o/2&&(i=o/2);for(var s=0;s<i;++s){var a=parseInt(e.substr(s*2,2),16);if(isNaN(a))return s;r[t+s]=a}return s}function Wr(r,e,t,i){return Oe(Te(e,r.length-t),r,t,i)}function $t(r,e,t,i){return Oe(ui(e),r,t,i)}function Xr(r,e,t,i){return $t(r,e,t,i)}function Zr(r,e,t,i){return Oe(qt(e),r,t,i)}function Kr(r,e,t,i){return Oe(ci(e,r.length-t),r,t,i)}l.prototype.write=function(e,t,i,n){if(t===void 0)n="utf8",i=this.length,t=0;else if(i===void 0&&typeof t=="string")n=t,i=this.length,t=0;else if(isFinite(t))t=t|0,isFinite(i)?(i=i|0,n===void 0&&(n="utf8")):(n=i,i=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var o=this.length-t;if((i===void 0||i>o)&&(i=o),e.length>0&&(i<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var s=!1;;)switch(n){case"hex":return Gr(this,e,t,i);case"utf8":case"utf-8":return Wr(this,e,t,i);case"ascii":return $t(this,e,t,i);case"latin1":case"binary":return Xr(this,e,t,i);case"base64":return Zr(this,e,t,i);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Kr(this,e,t,i);default:if(s)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),s=!0}};l.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function ei(r,e,t){return e===0&&t===r.length?pt(r):pt(r.slice(e,t))}function Bt(r,e,t){t=Math.min(r.length,t);for(var i=[],n=e;n<t;){var o=r[n],s=null,a=o>239?4:o>223?3:o>191?2:1;if(n+a<=t){var f,u,c,h;switch(a){case 1:o<128&&(s=o);break;case 2:f=r[n+1],(f&192)===128&&(h=(o&31)<<6|f&63,h>127&&(s=h));break;case 3:f=r[n+1],u=r[n+2],(f&192)===128&&(u&192)===128&&(h=(o&15)<<12|(f&63)<<6|u&63,h>2047&&(h<55296||h>57343)&&(s=h));break;case 4:f=r[n+1],u=r[n+2],c=r[n+3],(f&192)===128&&(u&192)===128&&(c&192)===128&&(h=(o&15)<<18|(f&63)<<12|(u&63)<<6|c&63,h>65535&&h<1114112&&(s=h))}}s===null?(s=65533,a=1):s>65535&&(s-=65536,i.push(s>>>10&1023|55296),s=56320|s&1023),i.push(s),n+=a}return ti(i)}var gt=4096;function ti(r){var e=r.length;if(e<=gt)return String.fromCharCode.apply(String,r);for(var t="",i=0;i<e;)t+=String.fromCharCode.apply(String,r.slice(i,i+=gt));return t}function ri(r,e,t){var i="";t=Math.min(r.length,t);for(var n=e;n<t;++n)i+=String.fromCharCode(r[n]&127);return i}function ii(r,e,t){var i="";t=Math.min(r.length,t);for(var n=e;n<t;++n)i+=String.fromCharCode(r[n]);return i}function ni(r,e,t){var i=r.length;(!e||e<0)&&(e=0),(!t||t<0||t>i)&&(t=i);for(var n="",o=e;o<t;++o)n+=fi(r[o]);return n}function oi(r,e,t){for(var i=r.slice(e,t),n="",o=0;o<i.length;o+=2)n+=String.fromCharCode(i[o]+i[o+1]*256);return n}l.prototype.slice=function(e,t){var i=this.length;e=~~e,t=t===void 0?i:~~t,e<0?(e+=i,e<0&&(e=0)):e>i&&(e=i),t<0?(t+=i,t<0&&(t=0)):t>i&&(t=i),t<e&&(t=e);var n;if(l.TYPED_ARRAY_SUPPORT)n=this.subarray(e,t),n.__proto__=l.prototype;else{var o=t-e;n=new l(o,void 0);for(var s=0;s<o;++s)n[s]=this[s+e]}return n};function B(r,e,t){if(r%1!==0||r<0)throw new RangeError("offset is not uint");if(r+e>t)throw new RangeError("Trying to access beyond buffer length")}l.prototype.readUIntLE=function(e,t,i){e=e|0,t=t|0,i||B(e,t,this.length);for(var n=this[e],o=1,s=0;++s<t&&(o*=256);)n+=this[e+s]*o;return n};l.prototype.readUIntBE=function(e,t,i){e=e|0,t=t|0,i||B(e,t,this.length);for(var n=this[e+--t],o=1;t>0&&(o*=256);)n+=this[e+--t]*o;return n};l.prototype.readUInt8=function(e,t){return t||B(e,1,this.length),this[e]};l.prototype.readUInt16LE=function(e,t){return t||B(e,2,this.length),this[e]|this[e+1]<<8};l.prototype.readUInt16BE=function(e,t){return t||B(e,2,this.length),this[e]<<8|this[e+1]};l.prototype.readUInt32LE=function(e,t){return t||B(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+this[e+3]*16777216};l.prototype.readUInt32BE=function(e,t){return t||B(e,4,this.length),this[e]*16777216+(this[e+1]<<16|this[e+2]<<8|this[e+3])};l.prototype.readIntLE=function(e,t,i){e=e|0,t=t|0,i||B(e,t,this.length);for(var n=this[e],o=1,s=0;++s<t&&(o*=256);)n+=this[e+s]*o;return o*=128,n>=o&&(n-=Math.pow(2,8*t)),n};l.prototype.readIntBE=function(e,t,i){e=e|0,t=t|0,i||B(e,t,this.length);for(var n=t,o=1,s=this[e+--n];n>0&&(o*=256);)s+=this[e+--n]*o;return o*=128,s>=o&&(s-=Math.pow(2,8*t)),s};l.prototype.readInt8=function(e,t){return t||B(e,1,this.length),this[e]&128?(255-this[e]+1)*-1:this[e]};l.prototype.readInt16LE=function(e,t){t||B(e,2,this.length);var i=this[e]|this[e+1]<<8;return i&32768?i|4294901760:i};l.prototype.readInt16BE=function(e,t){t||B(e,2,this.length);var i=this[e+1]|this[e]<<8;return i&32768?i|4294901760:i};l.prototype.readInt32LE=function(e,t){return t||B(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24};l.prototype.readInt32BE=function(e,t){return t||B(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]};l.prototype.readFloatLE=function(e,t){return t||B(e,4,this.length),Re(this,e,!0,23,4)};l.prototype.readFloatBE=function(e,t){return t||B(e,4,this.length),Re(this,e,!1,23,4)};l.prototype.readDoubleLE=function(e,t){return t||B(e,8,this.length),Re(this,e,!0,52,8)};l.prototype.readDoubleBE=function(e,t){return t||B(e,8,this.length),Re(this,e,!1,52,8)};function U(r,e,t,i,n,o){if(!X(r))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>n||e<o)throw new RangeError('"value" argument is out of bounds');if(t+i>r.length)throw new RangeError("Index out of range")}l.prototype.writeUIntLE=function(e,t,i,n){if(e=+e,t=t|0,i=i|0,!n){var o=Math.pow(2,8*i)-1;U(this,e,t,i,o,0)}var s=1,a=0;for(this[t]=e&255;++a<i&&(s*=256);)this[t+a]=e/s&255;return t+i};l.prototype.writeUIntBE=function(e,t,i,n){if(e=+e,t=t|0,i=i|0,!n){var o=Math.pow(2,8*i)-1;U(this,e,t,i,o,0)}var s=i-1,a=1;for(this[t+s]=e&255;--s>=0&&(a*=256);)this[t+s]=e/a&255;return t+i};l.prototype.writeUInt8=function(e,t,i){return e=+e,t=t|0,i||U(this,e,t,1,255,0),l.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=e&255,t+1};function De(r,e,t,i){e<0&&(e=65535+e+1);for(var n=0,o=Math.min(r.length-t,2);n<o;++n)r[t+n]=(e&255<<8*(i?n:1-n))>>>(i?n:1-n)*8}l.prototype.writeUInt16LE=function(e,t,i){return e=+e,t=t|0,i||U(this,e,t,2,65535,0),l.TYPED_ARRAY_SUPPORT?(this[t]=e&255,this[t+1]=e>>>8):De(this,e,t,!0),t+2};l.prototype.writeUInt16BE=function(e,t,i){return e=+e,t=t|0,i||U(this,e,t,2,65535,0),l.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=e&255):De(this,e,t,!1),t+2};function Ne(r,e,t,i){e<0&&(e=4294967295+e+1);for(var n=0,o=Math.min(r.length-t,4);n<o;++n)r[t+n]=e>>>(i?n:3-n)*8&255}l.prototype.writeUInt32LE=function(e,t,i){return e=+e,t=t|0,i||U(this,e,t,4,4294967295,0),l.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=e&255):Ne(this,e,t,!0),t+4};l.prototype.writeUInt32BE=function(e,t,i){return e=+e,t=t|0,i||U(this,e,t,4,4294967295,0),l.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=e&255):Ne(this,e,t,!1),t+4};l.prototype.writeIntLE=function(e,t,i,n){if(e=+e,t=t|0,!n){var o=Math.pow(2,8*i-1);U(this,e,t,i,o-1,-o)}var s=0,a=1,f=0;for(this[t]=e&255;++s<i&&(a*=256);)e<0&&f===0&&this[t+s-1]!==0&&(f=1),this[t+s]=(e/a>>0)-f&255;return t+i};l.prototype.writeIntBE=function(e,t,i,n){if(e=+e,t=t|0,!n){var o=Math.pow(2,8*i-1);U(this,e,t,i,o-1,-o)}var s=i-1,a=1,f=0;for(this[t+s]=e&255;--s>=0&&(a*=256);)e<0&&f===0&&this[t+s+1]!==0&&(f=1),this[t+s]=(e/a>>0)-f&255;return t+i};l.prototype.writeInt8=function(e,t,i){return e=+e,t=t|0,i||U(this,e,t,1,127,-128),l.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=e&255,t+1};l.prototype.writeInt16LE=function(e,t,i){return e=+e,t=t|0,i||U(this,e,t,2,32767,-32768),l.TYPED_ARRAY_SUPPORT?(this[t]=e&255,this[t+1]=e>>>8):De(this,e,t,!0),t+2};l.prototype.writeInt16BE=function(e,t,i){return e=+e,t=t|0,i||U(this,e,t,2,32767,-32768),l.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=e&255):De(this,e,t,!1),t+2};l.prototype.writeInt32LE=function(e,t,i){return e=+e,t=t|0,i||U(this,e,t,4,2147483647,-2147483648),l.TYPED_ARRAY_SUPPORT?(this[t]=e&255,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):Ne(this,e,t,!0),t+4};l.prototype.writeInt32BE=function(e,t,i){return e=+e,t=t|0,i||U(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),l.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=e&255):Ne(this,e,t,!1),t+4};function Ut(r,e,t,i,n,o){if(t+i>r.length)throw new RangeError("Index out of range");if(t<0)throw new RangeError("Index out of range")}function Pt(r,e,t,i,n){return n||Ut(r,e,t,4),Dt(r,e,t,i,23,4),t+4}l.prototype.writeFloatLE=function(e,t,i){return Pt(this,e,t,!0,i)};l.prototype.writeFloatBE=function(e,t,i){return Pt(this,e,t,!1,i)};function Vt(r,e,t,i,n){return n||Ut(r,e,t,8),Dt(r,e,t,i,52,8),t+8}l.prototype.writeDoubleLE=function(e,t,i){return Vt(this,e,t,!0,i)};l.prototype.writeDoubleBE=function(e,t,i){return Vt(this,e,t,!1,i)};l.prototype.copy=function(e,t,i,n){if(i||(i=0),!n&&n!==0&&(n=this.length),t>=e.length&&(t=e.length),t||(t=0),n>0&&n<i&&(n=i),n===i||e.length===0||this.length===0)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(i<0||i>=this.length)throw new RangeError("sourceStart out of bounds");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),e.length-t<n-i&&(n=e.length-t+i);var o=n-i,s;if(this===e&&i<t&&t<n)for(s=o-1;s>=0;--s)e[s+t]=this[s+i];else if(o<1e3||!l.TYPED_ARRAY_SUPPORT)for(s=0;s<o;++s)e[s+t]=this[s+i];else Uint8Array.prototype.set.call(e,this.subarray(i,i+o),t);return o};l.prototype.fill=function(e,t,i,n){if(typeof e=="string"){if(typeof t=="string"?(n=t,t=0,i=this.length):typeof i=="string"&&(n=i,i=this.length),e.length===1){var o=e.charCodeAt(0);o<256&&(e=o)}if(n!==void 0&&typeof n!="string")throw new TypeError("encoding must be a string");if(typeof n=="string"&&!l.isEncoding(n))throw new TypeError("Unknown encoding: "+n)}else typeof e=="number"&&(e=e&255);if(t<0||this.length<t||this.length<i)throw new RangeError("Out of range index");if(i<=t)return this;t=t>>>0,i=i===void 0?this.length:i>>>0,e||(e=0);var s;if(typeof e=="number")for(s=t;s<i;++s)this[s]=e;else{var a=X(e)?e:Te(new l(e,n).toString()),f=a.length;for(s=0;s<i-t;++s)this[s+t]=a[s%f]}return this};var si=/[^+\/0-9A-Za-z-_]/g;function ai(r){if(r=li(r).replace(si,""),r.length<2)return"";for(;r.length%4!==0;)r=r+"=";return r}function li(r){return r.trim?r.trim():r.replace(/^\s+|\s+$/g,"")}function fi(r){return r<16?"0"+r.toString(16):r.toString(16)}function Te(r,e){e=e||1/0;for(var t,i=r.length,n=null,o=[],s=0;s<i;++s){if(t=r.charCodeAt(s),t>55295&&t<57344){if(!n){if(t>56319){(e-=3)>-1&&o.push(239,191,189);continue}else if(s+1===i){(e-=3)>-1&&o.push(239,191,189);continue}n=t;continue}if(t<56320){(e-=3)>-1&&o.push(239,191,189),n=t;continue}t=(n-55296<<10|t-56320)+65536}else n&&(e-=3)>-1&&o.push(239,191,189);if(n=null,t<128){if((e-=1)<0)break;o.push(t)}else if(t<2048){if((e-=2)<0)break;o.push(t>>6|192,t&63|128)}else if(t<65536){if((e-=3)<0)break;o.push(t>>12|224,t>>6&63|128,t&63|128)}else if(t<1114112){if((e-=4)<0)break;o.push(t>>18|240,t>>12&63|128,t>>6&63|128,t&63|128)}else throw new Error("Invalid code point")}return o}function ui(r){for(var e=[],t=0;t<r.length;++t)e.push(r.charCodeAt(t)&255);return e}function ci(r,e){for(var t,i,n,o=[],s=0;s<r.length&&!((e-=2)<0);++s)t=r.charCodeAt(s),i=t>>8,n=t%256,o.push(n),o.push(i);return o}function qt(r){return Ur(ai(r))}function Oe(r,e,t,i){for(var n=0;n<i&&!(n+t>=e.length||n>=r.length);++n)e[n+t]=r[n];return n}function hi(r){return r!==r}function Q(r){return r!=null&&(!!r._isBuffer||Yt(r)||di(r))}function Yt(r){return!!r.constructor&&typeof r.constructor.isBuffer=="function"&&r.constructor.isBuffer(r)}function di(r){return typeof r.readFloatLE=="function"&&typeof r.slice=="function"&&Yt(r.slice(0,0))}class A extends Error{constructor(e,t,i,...n){Array.isArray(t)&&(t=t.join(" ").trim()),super(t),Error.captureStackTrace!==void 0&&Error.captureStackTrace(this,A),this.code=e;for(const o of n)for(const s in o){const a=o[s];this[s]=Q(a)?a.toString(i.encoding):a==null?a:JSON.parse(JSON.stringify(a))}}}const _i=function(r){return typeof r=="object"&&r!==null&&!Array.isArray(r)},Jt=function(r){const e=[];for(let t=0,i=r.length;t<i;t++){const n=r[t];if(n==null||n===!1)e[t]={disabled:!0};else if(typeof n=="string")e[t]={name:n};else if(_i(n)){if(typeof n.name!="string")throw new A("CSV_OPTION_COLUMNS_MISSING_NAME",["Option columns missing name:",`property "name" is required at position ${t}`,"when column is an object literal"]);e[t]=n}else throw new A("CSV_INVALID_COLUMN_DEFINITION",["Invalid column definition:","expect a string or a literal object,",`got ${JSON.stringify(n)} at position ${t}`])}return e};class wt{constructor(e=100){this.size=e,this.length=0,this.buf=l.allocUnsafe(e)}prepend(e){if(Q(e)){const t=this.length+e.length;if(t>=this.size&&(this.resize(),t>=this.size))throw Error("INVALID_BUFFER_STATE");const i=this.buf;this.buf=l.allocUnsafe(this.size),e.copy(this.buf,0),i.copy(this.buf,e.length),this.length+=e.length}else{const t=this.length++;t===this.size&&this.resize();const i=this.clone();this.buf[0]=e,i.copy(this.buf,1,0,t)}}append(e){const t=this.length++;t===this.size&&this.resize(),this.buf[t]=e}clone(){return l.from(this.buf.slice(0,this.length))}resize(){const e=this.length;this.size=this.size*2;const t=l.allocUnsafe(this.size);this.buf.copy(t,0,0,e),this.buf=t}toString(e){return e?this.buf.slice(0,this.length).toString(e):Uint8Array.prototype.slice.call(this.buf.slice(0,this.length))}toJSON(){return this.toString("utf8")}reset(){this.length=0}}const pi=12,mi=13,gi=10,wi=32,vi=9,xi=function(r){return{bomSkipped:!1,bufBytesStart:0,castField:r.cast_function,commenting:!1,error:void 0,enabled:r.from_line===1,escaping:!1,escapeIsQuote:Q(r.escape)&&Q(r.quote)&&l.compare(r.escape,r.quote)===0,expectedRecordLength:Array.isArray(r.columns)?r.columns.length:void 0,field:new wt(20),firstLineToHeaders:r.cast_first_line_to_header,needMoreDataSize:Math.max(r.comment!==null?r.comment.length:0,...r.delimiter.map(e=>e.length),r.quote!==null?r.quote.length:0),previousBuf:void 0,quoting:!1,stop:!1,rawBuffer:new wt(100),record:[],recordHasError:!1,record_length:0,recordDelimiterMaxLength:r.record_delimiter.length===0?0:Math.max(...r.record_delimiter.map(e=>e.length)),trimChars:[l.from(" ",r.encoding)[0],l.from("	",r.encoding)[0]],wasQuoting:!1,wasRowDelimiter:!1,timchars:[l.from(l.from([mi],"utf8").toString(),r.encoding),l.from(l.from([gi],"utf8").toString(),r.encoding),l.from(l.from([pi],"utf8").toString(),r.encoding),l.from(l.from([wi],"utf8").toString(),r.encoding),l.from(l.from([vi],"utf8").toString(),r.encoding)]}},yi=function(r){return r.replace(/([A-Z])/g,function(e,t){return"_"+t.toLowerCase()})},vt=function(r){const e={};for(const i in r)e[yi(i)]=r[i];if(e.encoding===void 0||e.encoding===!0)e.encoding="utf8";else if(e.encoding===null||e.encoding===!1)e.encoding=null;else if(typeof e.encoding!="string"&&e.encoding!==null)throw new A("CSV_INVALID_OPTION_ENCODING",["Invalid option encoding:","encoding must be a string or null to return a buffer,",`got ${JSON.stringify(e.encoding)}`],e);if(e.bom===void 0||e.bom===null||e.bom===!1)e.bom=!1;else if(e.bom!==!0)throw new A("CSV_INVALID_OPTION_BOM",["Invalid option bom:","bom must be true,",`got ${JSON.stringify(e.bom)}`],e);if(e.cast_function=null,e.cast===void 0||e.cast===null||e.cast===!1||e.cast==="")e.cast=void 0;else if(typeof e.cast=="function")e.cast_function=e.cast,e.cast=!0;else if(e.cast!==!0)throw new A("CSV_INVALID_OPTION_CAST",["Invalid option cast:","cast must be true or a function,",`got ${JSON.stringify(e.cast)}`],e);if(e.cast_date===void 0||e.cast_date===null||e.cast_date===!1||e.cast_date==="")e.cast_date=!1;else if(e.cast_date===!0)e.cast_date=function(i){const n=Date.parse(i);return isNaN(n)?i:new Date(n)};else if(typeof e.cast_date!="function")throw new A("CSV_INVALID_OPTION_CAST_DATE",["Invalid option cast_date:","cast_date must be true or a function,",`got ${JSON.stringify(e.cast_date)}`],e);if(e.cast_first_line_to_header=null,e.columns===!0)e.cast_first_line_to_header=void 0;else if(typeof e.columns=="function")e.cast_first_line_to_header=e.columns,e.columns=!0;else if(Array.isArray(e.columns))e.columns=Jt(e.columns);else if(e.columns===void 0||e.columns===null||e.columns===!1)e.columns=!1;else throw new A("CSV_INVALID_OPTION_COLUMNS",["Invalid option columns:","expect an array, a function or true,",`got ${JSON.stringify(e.columns)}`],e);if(e.group_columns_by_name===void 0||e.group_columns_by_name===null||e.group_columns_by_name===!1)e.group_columns_by_name=!1;else{if(e.group_columns_by_name!==!0)throw new A("CSV_INVALID_OPTION_GROUP_COLUMNS_BY_NAME",["Invalid option group_columns_by_name:","expect an boolean,",`got ${JSON.stringify(e.group_columns_by_name)}`],e);if(e.columns===!1)throw new A("CSV_INVALID_OPTION_GROUP_COLUMNS_BY_NAME",["Invalid option group_columns_by_name:","the `columns` mode must be activated."],e)}if(e.comment===void 0||e.comment===null||e.comment===!1||e.comment==="")e.comment=null;else if(typeof e.comment=="string"&&(e.comment=l.from(e.comment,e.encoding)),!Q(e.comment))throw new A("CSV_INVALID_OPTION_COMMENT",["Invalid option comment:","comment must be a buffer or a string,",`got ${JSON.stringify(e.comment)}`],e);if(e.comment_no_infix===void 0||e.comment_no_infix===null||e.comment_no_infix===!1)e.comment_no_infix=!1;else if(e.comment_no_infix!==!0)throw new A("CSV_INVALID_OPTION_COMMENT",["Invalid option comment_no_infix:","value must be a boolean,",`got ${JSON.stringify(e.comment_no_infix)}`],e);const t=JSON.stringify(e.delimiter);if(Array.isArray(e.delimiter)||(e.delimiter=[e.delimiter]),e.delimiter.length===0)throw new A("CSV_INVALID_OPTION_DELIMITER",["Invalid option delimiter:","delimiter must be a non empty string or buffer or array of string|buffer,",`got ${t}`],e);if(e.delimiter=e.delimiter.map(function(i){if(i==null||i===!1)return l.from(",",e.encoding);if(typeof i=="string"&&(i=l.from(i,e.encoding)),!Q(i)||i.length===0)throw new A("CSV_INVALID_OPTION_DELIMITER",["Invalid option delimiter:","delimiter must be a non empty string or buffer or array of string|buffer,",`got ${t}`],e);return i}),e.escape===void 0||e.escape===!0?e.escape=l.from('"',e.encoding):typeof e.escape=="string"?e.escape=l.from(e.escape,e.encoding):(e.escape===null||e.escape===!1)&&(e.escape=null),e.escape!==null&&!Q(e.escape))throw new Error(`Invalid Option: escape must be a buffer, a string or a boolean, got ${JSON.stringify(e.escape)}`);if(e.from===void 0||e.from===null)e.from=1;else if(typeof e.from=="string"&&/\d+/.test(e.from)&&(e.from=parseInt(e.from)),Number.isInteger(e.from)){if(e.from<0)throw new Error(`Invalid Option: from must be a positive integer, got ${JSON.stringify(r.from)}`)}else throw new Error(`Invalid Option: from must be an integer, got ${JSON.stringify(e.from)}`);if(e.from_line===void 0||e.from_line===null)e.from_line=1;else if(typeof e.from_line=="string"&&/\d+/.test(e.from_line)&&(e.from_line=parseInt(e.from_line)),Number.isInteger(e.from_line)){if(e.from_line<=0)throw new Error(`Invalid Option: from_line must be a positive integer greater than 0, got ${JSON.stringify(r.from_line)}`)}else throw new Error(`Invalid Option: from_line must be an integer, got ${JSON.stringify(r.from_line)}`);if(e.ignore_last_delimiters===void 0||e.ignore_last_delimiters===null)e.ignore_last_delimiters=!1;else if(typeof e.ignore_last_delimiters=="number")e.ignore_last_delimiters=Math.floor(e.ignore_last_delimiters),e.ignore_last_delimiters===0&&(e.ignore_last_delimiters=!1);else if(typeof e.ignore_last_delimiters!="boolean")throw new A("CSV_INVALID_OPTION_IGNORE_LAST_DELIMITERS",["Invalid option `ignore_last_delimiters`:","the value must be a boolean value or an integer,",`got ${JSON.stringify(e.ignore_last_delimiters)}`],e);if(e.ignore_last_delimiters===!0&&e.columns===!1)throw new A("CSV_IGNORE_LAST_DELIMITERS_REQUIRES_COLUMNS",["The option `ignore_last_delimiters`","requires the activation of the `columns` option"],e);if(e.info===void 0||e.info===null||e.info===!1)e.info=!1;else if(e.info!==!0)throw new Error(`Invalid Option: info must be true, got ${JSON.stringify(e.info)}`);if(e.max_record_size===void 0||e.max_record_size===null||e.max_record_size===!1)e.max_record_size=0;else if(!(Number.isInteger(e.max_record_size)&&e.max_record_size>=0))if(typeof e.max_record_size=="string"&&/\d+/.test(e.max_record_size))e.max_record_size=parseInt(e.max_record_size);else throw new Error(`Invalid Option: max_record_size must be a positive integer, got ${JSON.stringify(e.max_record_size)}`);if(e.objname===void 0||e.objname===null||e.objname===!1)e.objname=void 0;else if(Q(e.objname)){if(e.objname.length===0)throw new Error("Invalid Option: objname must be a non empty buffer");e.encoding===null||(e.objname=e.objname.toString(e.encoding))}else if(typeof e.objname=="string"){if(e.objname.length===0)throw new Error("Invalid Option: objname must be a non empty string")}else if(typeof e.objname!="number")throw new Error(`Invalid Option: objname must be a string or a buffer, got ${e.objname}`);if(e.objname!==void 0){if(typeof e.objname=="number"){if(e.columns!==!1)throw Error("Invalid Option: objname index cannot be combined with columns or be defined as a field")}else if(e.columns===!1)throw Error("Invalid Option: objname field must be combined with columns or be defined as an index")}if(e.on_record===void 0||e.on_record===null)e.on_record=void 0;else if(typeof e.on_record!="function")throw new A("CSV_INVALID_OPTION_ON_RECORD",["Invalid option `on_record`:","expect a function,",`got ${JSON.stringify(e.on_record)}`],e);if(e.on_skip!==void 0&&e.on_skip!==null&&typeof e.on_skip!="function")throw new Error(`Invalid Option: on_skip must be a function, got ${JSON.stringify(e.on_skip)}`);if(e.quote===null||e.quote===!1||e.quote==="")e.quote=null;else if(e.quote===void 0||e.quote===!0?e.quote=l.from('"',e.encoding):typeof e.quote=="string"&&(e.quote=l.from(e.quote,e.encoding)),!Q(e.quote))throw new Error(`Invalid Option: quote must be a buffer or a string, got ${JSON.stringify(e.quote)}`);if(e.raw===void 0||e.raw===null||e.raw===!1)e.raw=!1;else if(e.raw!==!0)throw new Error(`Invalid Option: raw must be true, got ${JSON.stringify(e.raw)}`);if(e.record_delimiter===void 0)e.record_delimiter=[];else if(typeof e.record_delimiter=="string"||Q(e.record_delimiter)){if(e.record_delimiter.length===0)throw new A("CSV_INVALID_OPTION_RECORD_DELIMITER",["Invalid option `record_delimiter`:","value must be a non empty string or buffer,",`got ${JSON.stringify(e.record_delimiter)}`],e);e.record_delimiter=[e.record_delimiter]}else if(!Array.isArray(e.record_delimiter))throw new A("CSV_INVALID_OPTION_RECORD_DELIMITER",["Invalid option `record_delimiter`:","value must be a string, a buffer or array of string|buffer,",`got ${JSON.stringify(e.record_delimiter)}`],e);if(e.record_delimiter=e.record_delimiter.map(function(i,n){if(typeof i!="string"&&!Q(i))throw new A("CSV_INVALID_OPTION_RECORD_DELIMITER",["Invalid option `record_delimiter`:","value must be a string, a buffer or array of string|buffer",`at index ${n},`,`got ${JSON.stringify(i)}`],e);if(i.length===0)throw new A("CSV_INVALID_OPTION_RECORD_DELIMITER",["Invalid option `record_delimiter`:","value must be a non empty string or buffer",`at index ${n},`,`got ${JSON.stringify(i)}`],e);return typeof i=="string"&&(i=l.from(i,e.encoding)),i}),typeof e.relax_column_count!="boolean")if(e.relax_column_count===void 0||e.relax_column_count===null)e.relax_column_count=!1;else throw new Error(`Invalid Option: relax_column_count must be a boolean, got ${JSON.stringify(e.relax_column_count)}`);if(typeof e.relax_column_count_less!="boolean")if(e.relax_column_count_less===void 0||e.relax_column_count_less===null)e.relax_column_count_less=!1;else throw new Error(`Invalid Option: relax_column_count_less must be a boolean, got ${JSON.stringify(e.relax_column_count_less)}`);if(typeof e.relax_column_count_more!="boolean")if(e.relax_column_count_more===void 0||e.relax_column_count_more===null)e.relax_column_count_more=!1;else throw new Error(`Invalid Option: relax_column_count_more must be a boolean, got ${JSON.stringify(e.relax_column_count_more)}`);if(typeof e.relax_quotes!="boolean")if(e.relax_quotes===void 0||e.relax_quotes===null)e.relax_quotes=!1;else throw new Error(`Invalid Option: relax_quotes must be a boolean, got ${JSON.stringify(e.relax_quotes)}`);if(typeof e.skip_empty_lines!="boolean")if(e.skip_empty_lines===void 0||e.skip_empty_lines===null)e.skip_empty_lines=!1;else throw new Error(`Invalid Option: skip_empty_lines must be a boolean, got ${JSON.stringify(e.skip_empty_lines)}`);if(typeof e.skip_records_with_empty_values!="boolean")if(e.skip_records_with_empty_values===void 0||e.skip_records_with_empty_values===null)e.skip_records_with_empty_values=!1;else throw new Error(`Invalid Option: skip_records_with_empty_values must be a boolean, got ${JSON.stringify(e.skip_records_with_empty_values)}`);if(typeof e.skip_records_with_error!="boolean")if(e.skip_records_with_error===void 0||e.skip_records_with_error===null)e.skip_records_with_error=!1;else throw new Error(`Invalid Option: skip_records_with_error must be a boolean, got ${JSON.stringify(e.skip_records_with_error)}`);if(e.rtrim===void 0||e.rtrim===null||e.rtrim===!1)e.rtrim=!1;else if(e.rtrim!==!0)throw new Error(`Invalid Option: rtrim must be a boolean, got ${JSON.stringify(e.rtrim)}`);if(e.ltrim===void 0||e.ltrim===null||e.ltrim===!1)e.ltrim=!1;else if(e.ltrim!==!0)throw new Error(`Invalid Option: ltrim must be a boolean, got ${JSON.stringify(e.ltrim)}`);if(e.trim===void 0||e.trim===null||e.trim===!1)e.trim=!1;else if(e.trim!==!0)throw new Error(`Invalid Option: trim must be a boolean, got ${JSON.stringify(e.trim)}`);if(e.trim===!0&&r.ltrim!==!1?e.ltrim=!0:e.ltrim!==!0&&(e.ltrim=!1),e.trim===!0&&r.rtrim!==!1?e.rtrim=!0:e.rtrim!==!0&&(e.rtrim=!1),e.to===void 0||e.to===null)e.to=-1;else if(typeof e.to=="string"&&/\d+/.test(e.to)&&(e.to=parseInt(e.to)),Number.isInteger(e.to)){if(e.to<=0)throw new Error(`Invalid Option: to must be a positive integer greater than 0, got ${JSON.stringify(r.to)}`)}else throw new Error(`Invalid Option: to must be an integer, got ${JSON.stringify(r.to)}`);if(e.to_line===void 0||e.to_line===null)e.to_line=-1;else if(typeof e.to_line=="string"&&/\d+/.test(e.to_line)&&(e.to_line=parseInt(e.to_line)),Number.isInteger(e.to_line)){if(e.to_line<=0)throw new Error(`Invalid Option: to_line must be a positive integer greater than 0, got ${JSON.stringify(r.to_line)}`)}else throw new Error(`Invalid Option: to_line must be an integer, got ${JSON.stringify(r.to_line)}`);return e},xt=function(r){return r.every(e=>e==null||e.toString&&e.toString().trim()==="")},Ei=13,Ii=10,_e={utf8:l.from([239,187,191]),utf16le:l.from([255,254])},bi=function(r={}){const e={bytes:0,comment_lines:0,empty_lines:0,invalid_field_length:0,lines:1,records:0},t=vt(r);return{info:e,original_options:r,options:t,state:xi(t),__needMoreData:function(i,n,o){if(o)return!1;const{encoding:s,escape:a,quote:f}=this.options,{quoting:u,needMoreDataSize:c,recordDelimiterMaxLength:h}=this.state,d=n-i-1,p=Math.max(c,h===0?l.from(`\r
`,s).length:h,u?(a===null?0:a.length)+f.length:0,u?f.length+h:0);return d<p},parse:function(i,n,o,s){const{bom:a,comment_no_infix:f,encoding:u,from_line:c,ltrim:h,max_record_size:d,raw:p,relax_quotes:m,rtrim:g,skip_empty_lines:F,to:E,to_line:I}=this.options;let{comment:x,escape:v,quote:b,record_delimiter:V}=this.options;const{bomSkipped:j,previousBuf:M,rawBuffer:he,escapeIsQuote:Z}=this.state;let S;if(M===void 0)if(i===void 0){s();return}else S=i;else M!==void 0&&i===void 0?S=M:S=l.concat([M,i]);if(j===!1)if(a===!1)this.state.bomSkipped=!0;else if(S.length<3){if(n===!1){this.state.previousBuf=S;return}}else{for(const D in _e)if(_e[D].compare(S,0,_e[D].length)===0){const w=_e[D].length;this.state.bufBytesStart+=w,S=S.slice(w),this.options=vt({...this.original_options,encoding:D}),{comment:x,escape:v,quote:b}=this.options;break}this.state.bomSkipped=!0}const K=S.length;let y;for(y=0;y<K&&!this.__needMoreData(y,K,n);y++){if(this.state.wasRowDelimiter===!0&&(this.info.lines++,this.state.wasRowDelimiter=!1),I!==-1&&this.info.lines>I){this.state.stop=!0,s();return}this.state.quoting===!1&&V.length===0&&this.__autoDiscoverRecordDelimiter(S,y)&&(V=this.options.record_delimiter);const D=S[y];if(p===!0&&he.append(D),(D===Ei||D===Ii)&&this.state.wasRowDelimiter===!1&&(this.state.wasRowDelimiter=!0),this.state.escaping===!0)this.state.escaping=!1;else{if(v!==null&&this.state.quoting===!0&&this.__isEscape(S,y,D)&&y+v.length<K)if(Z){if(this.__isQuote(S,y+v.length)){this.state.escaping=!0,y+=v.length-1;continue}}else{this.state.escaping=!0,y+=v.length-1;continue}if(this.state.commenting===!1&&this.__isQuote(S,y))if(this.state.quoting===!0){const C=S[y+b.length],O=g&&this.__isCharTrimable(S,y+b.length),k=x!==null&&this.__compareBytes(x,S,y+b.length,C),R=this.__isDelimiter(S,y+b.length,C),N=V.length===0?this.__autoDiscoverRecordDelimiter(S,y+b.length):this.__isRecordDelimiter(C,S,y+b.length);if(v!==null&&this.__isEscape(S,y,D)&&this.__isQuote(S,y+v.length))y+=v.length-1;else if(!C||R||N||k||O){this.state.quoting=!1,this.state.wasQuoting=!0,y+=b.length-1;continue}else if(m===!1){const q=this.__error(new A("CSV_INVALID_CLOSING_QUOTE",["Invalid Closing Quote:",`got "${String.fromCharCode(C)}"`,`at line ${this.info.lines}`,"instead of delimiter, record delimiter, trimable character","(if activated) or comment"],this.options,this.__infoField()));if(q!==void 0)return q}else this.state.quoting=!1,this.state.wasQuoting=!0,this.state.field.prepend(b),y+=b.length-1}else if(this.state.field.length!==0){if(m===!1){const C=this.__infoField(),O=Object.keys(_e).map(R=>_e[R].equals(this.state.field.toString())?R:!1).filter(Boolean)[0],k=this.__error(new A("INVALID_OPENING_QUOTE",["Invalid Opening Quote:",`a quote is found on field ${JSON.stringify(C.column)} at line ${C.lines}, value is ${JSON.stringify(this.state.field.toString(u))}`,O?`(${O} bom)`:void 0],this.options,C,{field:this.state.field}));if(k!==void 0)return k}}else{this.state.quoting=!0,y+=b.length-1;continue}if(this.state.quoting===!1){const C=this.__isRecordDelimiter(D,S,y);if(C!==0){if(this.state.commenting&&this.state.wasQuoting===!1&&this.state.record.length===0&&this.state.field.length===0)this.info.comment_lines++;else{if(this.state.enabled===!1&&this.info.lines+(this.state.wasRowDelimiter===!0?1:0)>=c){this.state.enabled=!0,this.__resetField(),this.__resetRecord(),y+=C-1;continue}if(F===!0&&this.state.wasQuoting===!1&&this.state.record.length===0&&this.state.field.length===0){this.info.empty_lines++,y+=C-1;continue}this.info.bytes=this.state.bufBytesStart+y;const R=this.__onField();if(R!==void 0)return R;this.info.bytes=this.state.bufBytesStart+y+C;const N=this.__onRecord(o);if(N!==void 0)return N;if(E!==-1&&this.info.records>=E){this.state.stop=!0,s();return}}this.state.commenting=!1,y+=C-1;continue}if(this.state.commenting)continue;if(x!==null&&(f===!1||this.state.record.length===0&&this.state.field.length===0)&&this.__compareBytes(x,S,y,D)!==0){this.state.commenting=!0;continue}const O=this.__isDelimiter(S,y,D);if(O!==0){this.info.bytes=this.state.bufBytesStart+y;const k=this.__onField();if(k!==void 0)return k;y+=O-1;continue}}}if(this.state.commenting===!1&&d!==0&&this.state.record_length+this.state.field.length>d)return this.__error(new A("CSV_MAX_RECORD_SIZE",["Max Record Size:","record exceed the maximum number of tolerated bytes",`of ${d}`,`at line ${this.info.lines}`],this.options,this.__infoField()));const w=h===!1||this.state.quoting===!0||this.state.field.length!==0||!this.__isCharTrimable(S,y),T=g===!1||this.state.wasQuoting===!1;if(w===!0&&T===!0)this.state.field.append(D);else{if(g===!0&&!this.__isCharTrimable(S,y))return this.__error(new A("CSV_NON_TRIMABLE_CHAR_AFTER_CLOSING_QUOTE",["Invalid Closing Quote:","found non trimable byte after quote",`at line ${this.info.lines}`],this.options,this.__infoField()));w===!1&&(y+=this.__isCharTrimable(S,y)-1);continue}}if(n===!0)if(this.state.quoting===!0){const D=this.__error(new A("CSV_QUOTE_NOT_CLOSED",["Quote Not Closed:",`the parsing is finished with an opening quote at line ${this.info.lines}`],this.options,this.__infoField()));if(D!==void 0)return D}else if(this.state.wasQuoting===!0||this.state.record.length!==0||this.state.field.length!==0){this.info.bytes=this.state.bufBytesStart+y;const D=this.__onField();if(D!==void 0)return D;const w=this.__onRecord(o);if(w!==void 0)return w}else this.state.wasRowDelimiter===!0?this.info.empty_lines++:this.state.commenting===!0&&this.info.comment_lines++;else this.state.bufBytesStart+=y,this.state.previousBuf=S.slice(y);this.state.wasRowDelimiter===!0&&(this.info.lines++,this.state.wasRowDelimiter=!1)},__onRecord:function(i){const{columns:n,group_columns_by_name:o,encoding:s,info:a,from:f,relax_column_count:u,relax_column_count_less:c,relax_column_count_more:h,raw:d,skip_records_with_empty_values:p}=this.options,{enabled:m,record:g}=this.state;if(m===!1)return this.__resetRecord();const F=g.length;if(n===!0){if(p===!0&&xt(g)){this.__resetRecord();return}return this.__firstLineToColumns(g)}if(n===!1&&this.info.records===0&&(this.state.expectedRecordLength=F),F!==this.state.expectedRecordLength){const E=n===!1?new A("CSV_RECORD_INCONSISTENT_FIELDS_LENGTH",["Invalid Record Length:",`expect ${this.state.expectedRecordLength},`,`got ${F} on line ${this.info.lines}`],this.options,this.__infoField(),{record:g}):new A("CSV_RECORD_INCONSISTENT_COLUMNS",["Invalid Record Length:",`columns length is ${n.length},`,`got ${F} on line ${this.info.lines}`],this.options,this.__infoField(),{record:g});if(u===!0||c===!0&&F<this.state.expectedRecordLength||h===!0&&F>this.state.expectedRecordLength)this.info.invalid_field_length++,this.state.error=E;else{const I=this.__error(E);if(I)return I}}if(p===!0&&xt(g)){this.__resetRecord();return}if(this.state.recordHasError===!0){this.__resetRecord(),this.state.recordHasError=!1;return}if(this.info.records++,f===1||this.info.records>=f){const{objname:E}=this.options;if(n!==!1){const I={};for(let x=0,v=g.length;x<v;x++)n[x]===void 0||n[x].disabled||(o===!0&&I[n[x].name]!==void 0?Array.isArray(I[n[x].name])?I[n[x].name]=I[n[x].name].concat(g[x]):I[n[x].name]=[I[n[x].name],g[x]]:I[n[x].name]=g[x]);if(d===!0||a===!0){const x=Object.assign({record:I},d===!0?{raw:this.state.rawBuffer.toString(s)}:{},a===!0?{info:this.__infoRecord()}:{}),v=this.__push(E===void 0?x:[I[E],x],i);if(v)return v}else{const x=this.__push(E===void 0?I:[I[E],I],i);if(x)return x}}else if(d===!0||a===!0){const I=Object.assign({record:g},d===!0?{raw:this.state.rawBuffer.toString(s)}:{},a===!0?{info:this.__infoRecord()}:{}),x=this.__push(E===void 0?I:[g[E],I],i);if(x)return x}else{const I=this.__push(E===void 0?g:[g[E],g],i);if(I)return I}}this.__resetRecord()},__firstLineToColumns:function(i){const{firstLineToHeaders:n}=this.state;try{const o=n===void 0?i:n.call(null,i);if(!Array.isArray(o))return this.__error(new A("CSV_INVALID_COLUMN_MAPPING",["Invalid Column Mapping:","expect an array from column function,",`got ${JSON.stringify(o)}`],this.options,this.__infoField(),{headers:o}));const s=Jt(o);this.state.expectedRecordLength=s.length,this.options.columns=s,this.__resetRecord();return}catch(o){return o}},__resetRecord:function(){this.options.raw===!0&&this.state.rawBuffer.reset(),this.state.error=void 0,this.state.record=[],this.state.record_length=0},__onField:function(){const{cast:i,encoding:n,rtrim:o,max_record_size:s}=this.options,{enabled:a,wasQuoting:f}=this.state;if(a===!1)return this.__resetField();let u=this.state.field.toString(n);if(o===!0&&f===!1&&(u=u.trimRight()),i===!0){const[c,h]=this.__cast(u);if(c!==void 0)return c;u=h}this.state.record.push(u),s!==0&&typeof u=="string"&&(this.state.record_length+=u.length),this.__resetField()},__resetField:function(){this.state.field.reset(),this.state.wasQuoting=!1},__push:function(i,n){const{on_record:o}=this.options;if(o!==void 0){const s=this.__infoRecord();try{i=o.call(null,i,s)}catch(a){return a}if(i==null)return}n(i)},__cast:function(i){const{columns:n,relax_column_count:o}=this.options;if(Array.isArray(n)===!0&&o&&this.options.columns.length<=this.state.record.length)return[void 0,void 0];if(this.state.castField!==null)try{const a=this.__infoField();return[void 0,this.state.castField.call(null,i,a)]}catch(a){return[a]}if(this.__isFloat(i))return[void 0,parseFloat(i)];if(this.options.cast_date!==!1){const a=this.__infoField();return[void 0,this.options.cast_date.call(null,i,a)]}return[void 0,i]},__isCharTrimable:function(i,n){return((s,a)=>{const{timchars:f}=this.state;e:for(let u=0;u<f.length;u++){const c=f[u];for(let h=0;h<c.length;h++)if(c[h]!==s[a+h])continue e;return c.length}return 0})(i,n)},__isFloat:function(i){return i-parseFloat(i)+1>=0},__compareBytes:function(i,n,o,s){if(i[0]!==s)return 0;const a=i.length;for(let f=1;f<a;f++)if(i[f]!==n[o+f])return 0;return a},__isDelimiter:function(i,n,o){const{delimiter:s,ignore_last_delimiters:a}=this.options;if(a===!0&&this.state.record.length===this.options.columns.length-1)return 0;if(a!==!1&&typeof a=="number"&&this.state.record.length===a-1)return 0;e:for(let f=0;f<s.length;f++){const u=s[f];if(u[0]===o){for(let c=1;c<u.length;c++)if(u[c]!==i[n+c])continue e;return u.length}}return 0},__isRecordDelimiter:function(i,n,o){const{record_delimiter:s}=this.options,a=s.length;e:for(let f=0;f<a;f++){const u=s[f],c=u.length;if(u[0]===i){for(let h=1;h<c;h++)if(u[h]!==n[o+h])continue e;return u.length}}return 0},__isEscape:function(i,n,o){const{escape:s}=this.options;if(s===null)return!1;const a=s.length;if(s[0]===o){for(let f=0;f<a;f++)if(s[f]!==i[n+f])return!1;return!0}return!1},__isQuote:function(i,n){const{quote:o}=this.options;if(o===null)return!1;const s=o.length;for(let a=0;a<s;a++)if(o[a]!==i[n+a])return!1;return!0},__autoDiscoverRecordDelimiter:function(i,n){const{encoding:o}=this.options,s=[l.from(`\r
`,o),l.from(`
`,o),l.from("\r",o)];e:for(let a=0;a<s.length;a++){const f=s[a].length;for(let u=0;u<f;u++)if(s[a][u]!==i[n+u])continue e;return this.options.record_delimiter.push(s[a]),this.state.recordDelimiterMaxLength=s[a].length,s[a].length}return 0},__error:function(i){const{encoding:n,raw:o,skip_records_with_error:s}=this.options,a=typeof i=="string"?new Error(i):i;if(s){this.state.recordHasError=!0,this.options.on_skip!==void 0&&this.options.on_skip(a,o?this.state.rawBuffer.toString(n):void 0);return}else return a},__infoDataSet:function(){return{...this.info,columns:this.options.columns}},__infoRecord:function(){const{columns:i,raw:n,encoding:o}=this.options;return{...this.__infoDataSet(),error:this.state.error,header:i===!0,index:this.state.record.length,raw:n?this.state.rawBuffer.toString(o):void 0}},__infoField:function(){const{columns:i}=this.options,n=Array.isArray(i);return{...this.__infoRecord(),column:n===!0?i.length>this.state.record.length?i[this.state.record.length].name:null:this.state.record.length,quoting:this.state.wasQuoting}}}},zt=function(r,e={}){typeof r=="string"&&(r=l.from(r));const t=e&&e.objname?{}:[],i=bi(e),n=f=>{i.options.objname===void 0?t.push(f):t[f[0]]=f[1]},o=()=>{},s=i.parse(r,!1,n,o);if(s!==void 0)throw s;const a=i.parse(void 0,!0,n,o);if(a!==void 0)throw a;return t};function Si(r){console.log("Parsing CSV content for unique cargos...");try{const e=zt(r,{columns:!0,skip_empty_lines:!0,trim:!0,delimiter:","}),t=[...new Set(e.map(i=>i.cargo))];return console.log("Found unique cargos:",t),t}catch(e){throw console.error("Error parsing CSV for cargos:",e),new Error("Failed to parse CSV for cargos: "+e.message)}}function Ci(r){console.log("Starting to parse CSV content to Funcionarios...");try{const e=zt(r,{columns:!0,skip_empty_lines:!0,trim:!0,delimiter:","});console.log(`Successfully parsed ${e.length} records from CSV`);const t=e.map((i,n)=>{var o,s;try{return{id:String(n+1),nombre:i.nombre,cargo:i.cargo,fechaInicio:yt(i.fecha_inicio),fechaFin:yt(i.fecha_fin),highlighted:((o=i.highlited)==null?void 0:o.toLowerCase())==="true",color:((s=i.highlited)==null?void 0:s.toLowerCase())==="true"?"#E57373":void 0}}catch(a){throw console.error(`Error processing record ${n}:`,i,a),a}});return console.log("Successfully transformed all records to Funcionarios"),t}catch(e){throw console.error("Error parsing CSV to Funcionarios:",e),new Error("Failed to parse CSV to Funcionarios: "+e.message)}}function yt(r){try{let e,t,i;if(r.includes("-")?[e,t,i]=r.split("-").map(o=>parseInt(o,10)):[i,t,e]=r.split("/").map(o=>parseInt(o,10)),isNaN(e)||isNaN(t)||isNaN(i))throw new Error(`Invalid date components in: ${r}`);const n=new Date(e,t-1,i,12,0,0);if(isNaN(n.getTime()))throw new Error(`Invalid date created from: ${r}`);return n}catch(e){throw new Error(`Failed to parse date: ${r} - ${e}`)}}class Fi{constructor(){Ee(this,"funcionarios",[]);Ee(this,"cargos",[]);Ee(this,"config",{startDate:new Date(2022,11,1),endDate:new Date(2025,2,21),timeScale:"month"})}async loadFuncionarios(){console.log("Loading funcionarios from CSV...");try{const e=`${ut}/data/funcionarios-mininter.csv`;console.log("Fetching CSV from:",e);const t=await fetch(e);if(!t.ok)throw console.error(`Failed to fetch CSV: ${t.status} ${t.statusText}, URL: ${e}`),new Error(`HTTP error! status: ${t.status}`);console.log("CSV file fetched successfully");const i=await t.text();if(!i.trim())throw new Error("CSV file is empty");return console.log("CSV content:",i.substring(0,200)+"..."),console.log("CSV content loaded, parsing data..."),this.funcionarios=Ci(i),console.log(`Parsed ${this.funcionarios.length} funcionarios`),this.cargos=Si(i),console.log(`Found ${this.cargos.length} unique cargos:`,this.cargos),this.funcionarios.sort((n,o)=>n.fechaInicio.getTime()-o.fechaInicio.getTime()),this.funcionarios}catch(e){return console.error("Error loading funcionarios:",e),e instanceof Error&&console.error("Error details:",{message:e.message,stack:e.stack,base:ut,location:window.location.href}),[]}}setTimeScale(e){this.config.timeScale=e}setDateRange(e,t){this.config.startDate=e,this.config.endDate=t}getConfig(){return{...this.config}}getFuncionarios(){return[...this.funcionarios]}getCargos(){return[...this.cargos]}getTimeIntervals(){const e=[];let t=new Date(this.config.startDate);for(;t<=this.config.endDate;)switch(e.push(new Date(t)),this.config.timeScale){case"day":t=new Date(t.setDate(t.getDate()+1));break;case"month":t=new Date(t.setMonth(t.getMonth()+1));break;case"year":t=new Date(t.setFullYear(t.getFullYear()+1));break}return e}}const ie=new Fi;var Ai=ae('<div class="loading svelte-1wpkvdx">Cargando datos...</div>'),Ti=ae('<div class="error svelte-1wpkvdx"> </div>'),Ri=ae('<span class="interim svelte-1wpkvdx">(encargado)</span>'),Di=ae('<div class="nombre svelte-1wpkvdx"> <!></div>'),Ni=ae('<div class="marker svelte-1wpkvdx"><span class="marker-label svelte-1wpkvdx"> </span> <div class="marker-line svelte-1wpkvdx"></div></div>'),Oi=ae('<div class="timeline svelte-1wpkvdx"><div class="connector-line svelte-1wpkvdx"></div> <div class="timeline-bar svelte-1wpkvdx"><span class="dot start svelte-1wpkvdx"></span> <span class="dot end svelte-1wpkvdx"></span> <span class="duration-text svelte-1wpkvdx"><span class="days-count svelte-1wpkvdx"> </span> <span class="end-date svelte-1wpkvdx"> </span></span></div></div>'),ki=ae('<div class="navigation-container svelte-1wpkvdx"><section class="cargo-section svelte-1wpkvdx"><div class="header-navigation svelte-1wpkvdx"><button class="nav-button prev svelte-1wpkvdx" aria-label="Ver cargo anterior"><svg class="arrow svelte-1wpkvdx" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><path d="M15 18l-6-6 6-6"></path></svg> <span class="nav-text svelte-1wpkvdx">Ver anterior</span></button> <h2 class="svelte-1wpkvdx"> </h2> <button class="nav-button next svelte-1wpkvdx" aria-label="Ver siguiente cargo"><span class="nav-text svelte-1wpkvdx">Ver siguiente</span> <svg class="arrow svelte-1wpkvdx" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><path d="M9 18l6-6-6-6"></path></svg></button></div> <div class="timeline-grid svelte-1wpkvdx"><div class="nombres-column svelte-1wpkvdx"><div class="spacer svelte-1wpkvdx"></div> <!></div> <div class="timeline-column svelte-1wpkvdx"><div class="year-markers svelte-1wpkvdx"></div> <div class="timelines-container svelte-1wpkvdx"></div></div></div></section></div>'),Mi=ae('<div class="visualization-container svelte-1wpkvdx"><div class="header svelte-1wpkvdx"><h1 class="title svelte-1wpkvdx">Cambios en puestos clave del Ministerio del Interior</h1> <p class="subtitle svelte-1wpkvdx">Durante el gobierno de Dina Boluarte, se registraron 55 cambios en puestos de alta direccin y rganos de lnea del Ministerio del Interior. Entre los cargos de mayor rotacin est el de ministro del Interior (6 veces) y jefe del gabinete de asesores (9).</p></div> <div class="timeline-container svelte-1wpkvdx"><!></div> <div class="footer svelte-1wpkvdx"><p class="footnote svelte-1wpkvdx">Nota: Se revisaron las resoluciones del Mininter y de El Peruano para determinar el periodo en que un funcionario se desempe en el cargo. Los nombres en rojo indican que el funcionario sigue ejerciendo. <br>*Juan Santivez Antnez fue censurado por el Congreso el 21 de marzo de 2025.</p> <div class="attribution svelte-1wpkvdx"><p class="credit svelte-1wpkvdx"><span class="label svelte-1wpkvdx">Desarrollo:</span> <span class="value svelte-1wpkvdx">Gianfranco Huamn / OjoPblico</span></p> <span class="separator svelte-1wpkvdx"></span> <p class="source svelte-1wpkvdx"><span class="label svelte-1wpkvdx">Fuente:</span> <span class="value svelte-1wpkvdx">Mininter y El Peruano</span></p></div></div></div>');function Hi(r,e){yr(e,!1);let t=[],i=ee(new Map),n=ee([]),o=ee(!0),s=ee(null),a=ee([]),f=ee(),u=ee(0),c=ee(0),h=ee(0);function d(w){return w<=480?12:w<=768?8:5}function p(w){const T=ie.getConfig(),C=T.startDate,O=T.endDate,k=O.getTime()-C.getTime(),R=[];let N=new Date(C);const q=d(w);for(;N<=O;){const pe=(N.getTime()-C.getTime())/k*100;R.push({date:new Date(N),position:pe}),N=new Date(N.setMonth(N.getMonth()+q))}return R}function m(){if(!_(i)||_(i).size===0)return;const w=Math.max(...Array.from(_(i).values()).map(N=>N.length));J(h,w*48+32+28+16+48)}function g(){J(f,window.innerWidth),J(a,p(_(f))),_(f)<=480?m():F()}function F(){if(!_(i)||_(i).size===0)return;const w=Math.max(...Array.from(_(i).values()).map(R=>R.length)),T=_(f)<=480?48:_(f)<=768?40:36,C=_(f)<=480?32:28,O=_(f)<=480?28:36,k=_(f)<=480?16:24;J(c,w*T+C+O+k)}ft(async()=>{try{if(J(o,!0),J(s,null),t=await ie.loadFuncionarios(),t.length===0)throw new Error("No se pudieron cargar los datos. Por favor, intente nuevamente.");J(n,ie.getCargos()),J(f,window.innerWidth),J(a,p(_(f))),J(i,new Map(_(n).map(w=>[w,t.filter(T=>T.cargo===w)]))),_(f)<=480?m():F(),window.addEventListener("resize",g)}catch(w){J(s,w.message),console.error("Error loading data:",w)}finally{J(o,!1)}}),ft(()=>()=>{window.removeEventListener("resize",g)});function E(w){return w.toLocaleDateString("es",{month:"short",year:"numeric"})}function I(w){const T=w.fechaInicio,C=w.fechaFin,O=ie.getConfig().endDate.getTime()-ie.getConfig().startDate.getTime(),k=T.getTime()-ie.getConfig().startDate.getTime(),R=C.getTime()-T.getTime(),N=k/O*100,q=R/O*100;return`left: ${N}%; width: ${q}%;`}function x(w){const T=ie.getConfig().endDate.getTime()-ie.getConfig().startDate.getTime(),C=w.fechaInicio.getTime()-ie.getConfig().startDate.getTime(),O=w.fechaFin.getTime()-w.fechaInicio.getTime(),k=C/T*100,R=O/T*100;return _(f)<=480?k+R<=75:_(f)<=768?k+R<=80:k+R<=85}function v(w,T){const C=Math.abs(T.getTime()-w.getTime());return Math.ceil(C/(1e3*60*60*24))}function b(w){return`${w} ${w===1?"da":"das"}`}function V(w){return w.toLocaleDateString("es",{day:"numeric",month:"short",year:"numeric"})}function j(){_(u)<_(n).length-1&&at(u)}function M(){_(u)>0&&at(u,-1)}function he(w){const T=_(f)<=480?48:36;return`${(_(f)<=480?32:28)+w*T}px`}Fr();var Z=Mi(),S=z($(Z),2),K=$(S);{var y=w=>{var T=Ai();Se(3,T,()=>Je),re(w,T)},D=w=>{var T=Cr(),C=Ir(T);{var O=R=>{var N=Ti(),q=$(N,!0);L(N),te(()=>de(q,_(s))),Se(3,N,()=>Je),re(R,N)},k=R=>{var N=ki(),q=$(N),pe=$(q),ke=$(pe),ye=z(ke,2),Ht=$(ye,!0);L(ye);var Ze=z(ye,2);L(pe);var Me=z(pe,2),Le=$(Me),Qt=z($(Le),2);Ye(Qt,1,()=>_(i).get(_(n)[_(u)])||[],qe,(me,Y)=>{var P=Di(),G=$(P),ge=z(G);{var le=fe=>{var we=Ri();re(fe,we)};Ve(ge,fe=>{_(Y).isInterim&&fe(le)})}L(P),te(()=>{ht(P,"highlighted",_(Y).highlighted),de(G,`${_(Y).nombre??""} `)}),re(me,P)}),L(Le);var Ke=z(Le,2),$e=$(Ke);Ye($e,5,()=>_(a),qe,(me,Y)=>{var P=Ni(),G=$(P),ge=$(G,!0);te(()=>de(ge,E(_(Y).date))),L(G);var le=z(G,2);const fe=Pe(()=>`height: ${he((_(i).get(_(n)[_(u)])||[]).length)??""}`);L(P),te(()=>{Ie(P,"style",`left: ${_(Y).position??""}%`),Ie(le,"style",_(fe))}),re(me,P)}),L($e);var et=z($e,2);Ye(et,5,()=>_(i).get(_(n)[_(u)])||[],qe,(me,Y)=>{var P=Oi(),G=z($(P),2);const ge=Pe(()=>I(_(Y)));var le=z($(G),4);const fe=Pe(()=>!x(_(Y)));te(()=>ht(le,"text-right",_(fe)));var we=$(le),jt=$(we,!0);te(()=>de(jt,b(v(_(Y).fechaInicio,_(Y).fechaFin)))),L(we);var tt=z(we,2),Gt=$(tt,!0);te(()=>de(Gt,V(_(Y).fechaFin))),L(tt),L(le),L(G),L(P),te(()=>Ie(G,"style",_(ge))),re(me,P)}),L(et),L(Ke),L(Me),L(q),L(N),te(()=>{Ie(q,"style",`min-height: ${(_(f)<=480?_(h):_(c))??""}px`),ke.disabled=_(u)===0,de(Ht,_(n)[_(u)]),Ze.disabled=_(u)===_(n).length-1}),lt("click",ke,M),Se(3,ye,()=>Je,()=>({duration:200})),lt("click",Ze,j),Se(3,Me,()=>$r,()=>({duration:300,axis:"y"})),re(R,N)};Ve(C,R=>{_(s)?R(O):R(k,!1)},!0)}re(w,T)};Ve(K,w=>{_(o)?w(y):w(D,!1)})}L(S),br(2),L(Z),re(r,Z),Er()}export{Hi as component};
