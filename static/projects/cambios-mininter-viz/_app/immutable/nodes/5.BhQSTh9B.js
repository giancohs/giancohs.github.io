var Pt=Object.defineProperty;var Vt=(r,e,t)=>e in r?Pt(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t;var xe=(r,e,t)=>Vt(r,typeof e!="symbol"?e+"":e,t);import"../chunks/disclose-version.Bg9kRutz.js";import"../chunks/legacy.CtaTdtmd.js";import{k as fe,G as Me,B as jt,A as qt,F as Jt,H as Yt,X as zt,a4 as mt,J as Ht,K as Ze,M as Le,E as we,a0 as Qt,aa as Ie,N as pt,O as gt,P as Gt,q as Wt,C as Ke,ab as qe,ac as et,ad as Je,ae as Xt,a3 as Zt,af as Kt,Q as er,ag as wt,V as tr,ah as rr,y as nr,ai as tt,aj as ir,_ as or,p as sr,n as ar,z as q,g as d,ak as K,v as J,o as B,m as lr,s as L,al as fr,t as ee,am as Be,an as rt}from"../chunks/runtime.7GcAVZQD.js";import{s as he,e as nt}from"../chunks/render.D1CM-7B1.js";import{o as ke,i as Ue}from"../chunks/index-client.D2tdXZ3S.js";import{a as te,t as se,c as ur}from"../chunks/template.B-ZxB-Qw.js";import{s as ye}from"../chunks/attributes.CdRgYw2C.js";import{t as Ee,a as it,f as $e,s as cr}from"../chunks/index.qhRdec76.js";import{i as hr}from"../chunks/lifecycle.CxmvOALt.js";import{b as ot}from"../chunks/paths.UT_IF2Xz.js";function Pe(r,e){return e}function dr(r,e,t,n){for(var i=[],o=e.length,s=0;s<o;s++)Xt(e[s].e,i,!0);var a=o>0&&i.length===0&&t!==null;if(a){var f=t.parentNode;Zt(f),f.append(t),n.clear(),oe(r,e[0].prev,e[o-1].next)}Kt(i,()=>{for(var u=0;u<o;u++){var c=e[u];a||(n.delete(c.k),oe(r,c.prev,c.next)),er(c.e,!a)}})}function Ve(r,e,t,n,i,o=null){var s=r,a={flags:e,items:new Map,first:null},f=(e&wt)!==0;if(f){var u=r;s=fe?Me(jt(u)):u.appendChild(qt())}fe&&Jt();var c=null,h=!1;Yt(()=>{var _=t(),p=zt(_)?_:_==null?[]:mt(_),x=p.length;if(h&&x===0)return;h=x===0;let S=!1;if(fe){var F=s.data===Ht;F!==(x===0)&&(s=Ze(),Me(s),Le(!1),S=!0)}if(fe){for(var R=null,I,w=0;w<x;w++){if(we.nodeType===8&&we.data===Qt){s=we,S=!0,Le(!1);break}var g=p[w],y=n(g,w);I=vt(we,a,R,null,g,y,w,i,e),a.items.set(y,I),R=I}x>0&&Me(Ze())}if(!fe){var W=tr;_r(p,a,s,i,e,(W.f&Ie)!==0,n)}o!==null&&(x===0?c?pt(c):c=gt(()=>o(s)):c!==null&&Gt(c,()=>{c=null})),S&&Le(!0),t()}),fe&&(s=we)}function _r(r,e,t,n,i,o,s){var D,m,A,b;var a=(i&rr)!==0,f=(i&(qe|Je))!==0,u=r.length,c=e.items,h=e.first,_=h,p,x=null,S,F=[],R=[],I,w,g,y;if(a)for(y=0;y<u;y+=1)I=r[y],w=s(I,y),g=c.get(w),g!==void 0&&((D=g.a)==null||D.measure(),(S??(S=new Set)).add(g));for(y=0;y<u;y+=1){if(I=r[y],w=s(I,y),g=c.get(w),g===void 0){var W=_?_.e.nodes_start:t;x=vt(W,e,x,x===null?e.first:x.next,I,w,y,n,i),c.set(w,x),F=[],R=[],_=x.next;continue}if(f&&mr(g,I,y,i),g.e.f&Ie&&(pt(g.e),a&&((m=g.a)==null||m.unfix(),(S??(S=new Set)).delete(g))),g!==_){if(p!==void 0&&p.has(g)){if(F.length<R.length){var ie=R[0],U;x=ie.prev;var ce=F[0],X=F[F.length-1];for(U=0;U<F.length;U+=1)st(F[U],ie,t);for(U=0;U<R.length;U+=1)p.delete(R[U]);oe(e,ce.prev,X.next),oe(e,x,ce),oe(e,X,ie),_=ie,x=X,y-=1,F=[],R=[]}else p.delete(g),st(g,_,t),oe(e,g.prev,g.next),oe(e,g,x===null?e.first:x.next),oe(e,x,g),x=g;continue}for(F=[],R=[];_!==null&&_.k!==w;)(o||!(_.e.f&Ie))&&(p??(p=new Set)).add(_),R.push(_),_=_.next;if(_===null)continue;g=_}F.push(g),x=g,_=g.next}if(_!==null||p!==void 0){for(var E=p===void 0?[]:mt(p);_!==null;)(o||!(_.e.f&Ie))&&E.push(_),_=_.next;var Z=E.length;if(Z>0){var v=i&wt&&u===0?t:null;if(a){for(y=0;y<Z;y+=1)(A=E[y].a)==null||A.measure();for(y=0;y<Z;y+=1)(b=E[y].a)==null||b.fix()}dr(e,E,v,c)}}a&&Wt(()=>{var O;if(S!==void 0)for(g of S)(O=g.a)==null||O.apply()}),Ke.first=e.first&&e.first.e,Ke.last=x&&x.e}function mr(r,e,t,n){n&qe&&et(r.v,e),n&Je?et(r.i,t):r.i=t}function vt(r,e,t,n,i,o,s,a,f){var u=(f&qe)!==0,c=(f&ir)===0,h=u?c?nr(i):tt(i):i,_=f&Je?tt(s):s,p={i:_,v:h,k:o,a:null,e:null,prev:t,next:n};try{return p.e=gt(()=>a(r,h,_),fe),p.e.prev=t&&t.e,p.e.next=n&&n.e,t===null?e.first=p:(t.next=p,t.e.next=p.e),n!==null&&(n.prev=p,n.e.prev=p.e),p}finally{}}function st(r,e,t){for(var n=r.next?r.next.e.nodes_start:t,i=e?e.e.nodes_start:t,o=r.e.nodes_start;o!==n;){var s=or(o);i.before(o),o=s}}function oe(r,e,t){e===null?r.first=t:(e.next=t,e.e.next=t&&t.e),t!==null&&(t.prev=e,t.e.prev=e&&e.e)}var at=typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{},Q=[],Y=[],pr=typeof Uint8Array<"u"?Uint8Array:Array,Ye=!1;function xt(){Ye=!0;for(var r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",e=0,t=r.length;e<t;++e)Q[e]=r[e],Y[r.charCodeAt(e)]=e;Y[45]=62,Y[95]=63}function gr(r){Ye||xt();var e,t,n,i,o,s,a=r.length;if(a%4>0)throw new Error("Invalid string. Length must be a multiple of 4");o=r[a-2]==="="?2:r[a-1]==="="?1:0,s=new pr(a*3/4-o),n=o>0?a-4:a;var f=0;for(e=0,t=0;e<n;e+=4,t+=3)i=Y[r.charCodeAt(e)]<<18|Y[r.charCodeAt(e+1)]<<12|Y[r.charCodeAt(e+2)]<<6|Y[r.charCodeAt(e+3)],s[f++]=i>>16&255,s[f++]=i>>8&255,s[f++]=i&255;return o===2?(i=Y[r.charCodeAt(e)]<<2|Y[r.charCodeAt(e+1)]>>4,s[f++]=i&255):o===1&&(i=Y[r.charCodeAt(e)]<<10|Y[r.charCodeAt(e+1)]<<4|Y[r.charCodeAt(e+2)]>>2,s[f++]=i>>8&255,s[f++]=i&255),s}function wr(r){return Q[r>>18&63]+Q[r>>12&63]+Q[r>>6&63]+Q[r&63]}function vr(r,e,t){for(var n,i=[],o=e;o<t;o+=3)n=(r[o]<<16)+(r[o+1]<<8)+r[o+2],i.push(wr(n));return i.join("")}function lt(r){Ye||xt();for(var e,t=r.length,n=t%3,i="",o=[],s=16383,a=0,f=t-n;a<f;a+=s)o.push(vr(r,a,a+s>f?f:a+s));return n===1?(e=r[t-1],i+=Q[e>>2],i+=Q[e<<4&63],i+="=="):n===2&&(e=(r[t-2]<<8)+r[t-1],i+=Q[e>>10],i+=Q[e>>4&63],i+=Q[e<<2&63],i+="="),o.push(i),o.join("")}function Ae(r,e,t,n,i){var o,s,a=i*8-n-1,f=(1<<a)-1,u=f>>1,c=-7,h=t?i-1:0,_=t?-1:1,p=r[e+h];for(h+=_,o=p&(1<<-c)-1,p>>=-c,c+=a;c>0;o=o*256+r[e+h],h+=_,c-=8);for(s=o&(1<<-c)-1,o>>=-c,c+=n;c>0;s=s*256+r[e+h],h+=_,c-=8);if(o===0)o=1-u;else{if(o===f)return s?NaN:(p?-1:1)*(1/0);s=s+Math.pow(2,n),o=o-u}return(p?-1:1)*s*Math.pow(2,o-n)}function yt(r,e,t,n,i,o){var s,a,f,u=o*8-i-1,c=(1<<u)-1,h=c>>1,_=i===23?Math.pow(2,-24)-Math.pow(2,-77):0,p=n?0:o-1,x=n?1:-1,S=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,s=c):(s=Math.floor(Math.log(e)/Math.LN2),e*(f=Math.pow(2,-s))<1&&(s--,f*=2),s+h>=1?e+=_/f:e+=_*Math.pow(2,1-h),e*f>=2&&(s++,f/=2),s+h>=c?(a=0,s=c):s+h>=1?(a=(e*f-1)*Math.pow(2,i),s=s+h):(a=e*Math.pow(2,h-1)*Math.pow(2,i),s=0));i>=8;r[t+p]=a&255,p+=x,a/=256,i-=8);for(s=s<<i|a,u+=i;u>0;r[t+p]=s&255,p+=x,s/=256,u-=8);r[t+p-x]|=S*128}var xr={}.toString,Et=Array.isArray||function(r){return xr.call(r)=="[object Array]"},yr=50;l.TYPED_ARRAY_SUPPORT=at.TYPED_ARRAY_SUPPORT!==void 0?at.TYPED_ARRAY_SUPPORT:!0;be();function be(){return l.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function ne(r,e){if(be()<e)throw new RangeError("Invalid typed array length");return l.TYPED_ARRAY_SUPPORT?(r=new Uint8Array(e),r.__proto__=l.prototype):(r===null&&(r=new l(e)),r.length=e),r}function l(r,e,t){if(!l.TYPED_ARRAY_SUPPORT&&!(this instanceof l))return new l(r,e,t);if(typeof r=="number"){if(typeof e=="string")throw new Error("If encoding is specified then the first argument must be a string");return ze(this,r)}return It(this,r,e,t)}l.poolSize=8192;l._augment=function(r){return r.__proto__=l.prototype,r};function It(r,e,t,n){if(typeof e=="number")throw new TypeError('"value" argument must not be a number');return typeof ArrayBuffer<"u"&&e instanceof ArrayBuffer?br(r,e,t,n):typeof e=="string"?Ir(r,e,t):Sr(r,e)}l.from=function(r,e,t){return It(null,r,e,t)};l.TYPED_ARRAY_SUPPORT&&(l.prototype.__proto__=Uint8Array.prototype,l.__proto__=Uint8Array,typeof Symbol<"u"&&Symbol.species&&l[Symbol.species]);function bt(r){if(typeof r!="number")throw new TypeError('"size" argument must be a number');if(r<0)throw new RangeError('"size" argument must not be negative')}function Er(r,e,t,n){return bt(e),e<=0?ne(r,e):t!==void 0?typeof n=="string"?ne(r,e).fill(t,n):ne(r,e).fill(t):ne(r,e)}l.alloc=function(r,e,t){return Er(null,r,e,t)};function ze(r,e){if(bt(e),r=ne(r,e<0?0:He(e)|0),!l.TYPED_ARRAY_SUPPORT)for(var t=0;t<e;++t)r[t]=0;return r}l.allocUnsafe=function(r){return ze(null,r)};l.allocUnsafeSlow=function(r){return ze(null,r)};function Ir(r,e,t){if((typeof t!="string"||t==="")&&(t="utf8"),!l.isEncoding(t))throw new TypeError('"encoding" must be a valid string encoding');var n=St(e,t)|0;r=ne(r,n);var i=r.write(e,t);return i!==n&&(r=r.slice(0,i)),r}function je(r,e){var t=e.length<0?0:He(e.length)|0;r=ne(r,t);for(var n=0;n<t;n+=1)r[n]=e[n]&255;return r}function br(r,e,t,n){if(e.byteLength,t<0||e.byteLength<t)throw new RangeError("'offset' is out of bounds");if(e.byteLength<t+(n||0))throw new RangeError("'length' is out of bounds");return t===void 0&&n===void 0?e=new Uint8Array(e):n===void 0?e=new Uint8Array(e,t):e=new Uint8Array(e,t,n),l.TYPED_ARRAY_SUPPORT?(r=e,r.__proto__=l.prototype):r=je(r,e),r}function Sr(r,e){if(G(e)){var t=He(e.length)|0;return r=ne(r,t),r.length===0||e.copy(r,0,0,t),r}if(e){if(typeof ArrayBuffer<"u"&&e.buffer instanceof ArrayBuffer||"length"in e)return typeof e.length!="number"||Jr(e.length)?ne(r,0):je(r,e);if(e.type==="Buffer"&&Et(e.data))return je(r,e.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function He(r){if(r>=be())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+be().toString(16)+" bytes");return r|0}l.isBuffer=z;function G(r){return!!(r!=null&&r._isBuffer)}l.compare=function(e,t){if(!G(e)||!G(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var n=e.length,i=t.length,o=0,s=Math.min(n,i);o<s;++o)if(e[o]!==t[o]){n=e[o],i=t[o];break}return n<i?-1:i<n?1:0};l.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}};l.concat=function(e,t){if(!Et(e))throw new TypeError('"list" argument must be an Array of Buffers');if(e.length===0)return l.alloc(0);var n;if(t===void 0)for(t=0,n=0;n<e.length;++n)t+=e[n].length;var i=l.allocUnsafe(t),o=0;for(n=0;n<e.length;++n){var s=e[n];if(!G(s))throw new TypeError('"list" argument must be an Array of Buffers');s.copy(i,o),o+=s.length}return i};function St(r,e){if(G(r))return r.length;if(typeof ArrayBuffer<"u"&&typeof ArrayBuffer.isView=="function"&&(ArrayBuffer.isView(r)||r instanceof ArrayBuffer))return r.byteLength;typeof r!="string"&&(r=""+r);var t=r.length;if(t===0)return 0;for(var n=!1;;)switch(e){case"ascii":case"latin1":case"binary":return t;case"utf8":case"utf-8":case void 0:return Se(r).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return t*2;case"hex":return t>>>1;case"base64":return Nt(r).length;default:if(n)return Se(r).length;e=(""+e).toLowerCase(),n=!0}}l.byteLength=St;function Ar(r,e,t){var n=!1;if((e===void 0||e<0)&&(e=0),e>this.length||((t===void 0||t>this.length)&&(t=this.length),t<=0)||(t>>>=0,e>>>=0,t<=e))return"";for(r||(r="utf8");;)switch(r){case"hex":return Br(this,e,t);case"utf8":case"utf-8":return Rt(this,e,t);case"ascii":return Mr(this,e,t);case"latin1":case"binary":return Lr(this,e,t);case"base64":return Nr(this,e,t);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return kr(this,e,t);default:if(n)throw new TypeError("Unknown encoding: "+r);r=(r+"").toLowerCase(),n=!0}}l.prototype._isBuffer=!0;function ue(r,e,t){var n=r[e];r[e]=r[t],r[t]=n}l.prototype.swap16=function(){var e=this.length;if(e%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)ue(this,t,t+1);return this};l.prototype.swap32=function(){var e=this.length;if(e%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)ue(this,t,t+3),ue(this,t+1,t+2);return this};l.prototype.swap64=function(){var e=this.length;if(e%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)ue(this,t,t+7),ue(this,t+1,t+6),ue(this,t+2,t+5),ue(this,t+3,t+4);return this};l.prototype.toString=function(){var e=this.length|0;return e===0?"":arguments.length===0?Rt(this,0,e):Ar.apply(this,arguments)};l.prototype.equals=function(e){if(!G(e))throw new TypeError("Argument must be a Buffer");return this===e?!0:l.compare(this,e)===0};l.prototype.inspect=function(){var e="",t=yr;return this.length>0&&(e=this.toString("hex",0,t).match(/.{2}/g).join(" "),this.length>t&&(e+=" ... ")),"<Buffer "+e+">"};l.prototype.compare=function(e,t,n,i,o){if(!G(e))throw new TypeError("Argument must be a Buffer");if(t===void 0&&(t=0),n===void 0&&(n=e?e.length:0),i===void 0&&(i=0),o===void 0&&(o=this.length),t<0||n>e.length||i<0||o>this.length)throw new RangeError("out of range index");if(i>=o&&t>=n)return 0;if(i>=o)return-1;if(t>=n)return 1;if(t>>>=0,n>>>=0,i>>>=0,o>>>=0,this===e)return 0;for(var s=o-i,a=n-t,f=Math.min(s,a),u=this.slice(i,o),c=e.slice(t,n),h=0;h<f;++h)if(u[h]!==c[h]){s=u[h],a=c[h];break}return s<a?-1:a<s?1:0};function At(r,e,t,n,i){if(r.length===0)return-1;if(typeof t=="string"?(n=t,t=0):t>2147483647?t=2147483647:t<-2147483648&&(t=-2147483648),t=+t,isNaN(t)&&(t=i?0:r.length-1),t<0&&(t=r.length+t),t>=r.length){if(i)return-1;t=r.length-1}else if(t<0)if(i)t=0;else return-1;if(typeof e=="string"&&(e=l.from(e,n)),G(e))return e.length===0?-1:ft(r,e,t,n,i);if(typeof e=="number")return e=e&255,l.TYPED_ARRAY_SUPPORT&&typeof Uint8Array.prototype.indexOf=="function"?i?Uint8Array.prototype.indexOf.call(r,e,t):Uint8Array.prototype.lastIndexOf.call(r,e,t):ft(r,[e],t,n,i);throw new TypeError("val must be string, number or Buffer")}function ft(r,e,t,n,i){var o=1,s=r.length,a=e.length;if(n!==void 0&&(n=String(n).toLowerCase(),n==="ucs2"||n==="ucs-2"||n==="utf16le"||n==="utf-16le")){if(r.length<2||e.length<2)return-1;o=2,s/=2,a/=2,t/=2}function f(p,x){return o===1?p[x]:p.readUInt16BE(x*o)}var u;if(i){var c=-1;for(u=t;u<s;u++)if(f(r,u)===f(e,c===-1?0:u-c)){if(c===-1&&(c=u),u-c+1===a)return c*o}else c!==-1&&(u-=u-c),c=-1}else for(t+a>s&&(t=s-a),u=t;u>=0;u--){for(var h=!0,_=0;_<a;_++)if(f(r,u+_)!==f(e,_)){h=!1;break}if(h)return u}return-1}l.prototype.includes=function(e,t,n){return this.indexOf(e,t,n)!==-1};l.prototype.indexOf=function(e,t,n){return At(this,e,t,n,!0)};l.prototype.lastIndexOf=function(e,t,n){return At(this,e,t,n,!1)};function Cr(r,e,t,n){t=Number(t)||0;var i=r.length-t;n?(n=Number(n),n>i&&(n=i)):n=i;var o=e.length;if(o%2!==0)throw new TypeError("Invalid hex string");n>o/2&&(n=o/2);for(var s=0;s<n;++s){var a=parseInt(e.substr(s*2,2),16);if(isNaN(a))return s;r[t+s]=a}return s}function Rr(r,e,t,n){return Te(Se(e,r.length-t),r,t,n)}function Ct(r,e,t,n){return Te(jr(e),r,t,n)}function Tr(r,e,t,n){return Ct(r,e,t,n)}function Dr(r,e,t,n){return Te(Nt(e),r,t,n)}function Fr(r,e,t,n){return Te(qr(e,r.length-t),r,t,n)}l.prototype.write=function(e,t,n,i){if(t===void 0)i="utf8",n=this.length,t=0;else if(n===void 0&&typeof t=="string")i=t,n=this.length,t=0;else if(isFinite(t))t=t|0,isFinite(n)?(n=n|0,i===void 0&&(i="utf8")):(i=n,n=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var o=this.length-t;if((n===void 0||n>o)&&(n=o),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");i||(i="utf8");for(var s=!1;;)switch(i){case"hex":return Cr(this,e,t,n);case"utf8":case"utf-8":return Rr(this,e,t,n);case"ascii":return Ct(this,e,t,n);case"latin1":case"binary":return Tr(this,e,t,n);case"base64":return Dr(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Fr(this,e,t,n);default:if(s)throw new TypeError("Unknown encoding: "+i);i=(""+i).toLowerCase(),s=!0}};l.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function Nr(r,e,t){return e===0&&t===r.length?lt(r):lt(r.slice(e,t))}function Rt(r,e,t){t=Math.min(r.length,t);for(var n=[],i=e;i<t;){var o=r[i],s=null,a=o>239?4:o>223?3:o>191?2:1;if(i+a<=t){var f,u,c,h;switch(a){case 1:o<128&&(s=o);break;case 2:f=r[i+1],(f&192)===128&&(h=(o&31)<<6|f&63,h>127&&(s=h));break;case 3:f=r[i+1],u=r[i+2],(f&192)===128&&(u&192)===128&&(h=(o&15)<<12|(f&63)<<6|u&63,h>2047&&(h<55296||h>57343)&&(s=h));break;case 4:f=r[i+1],u=r[i+2],c=r[i+3],(f&192)===128&&(u&192)===128&&(c&192)===128&&(h=(o&15)<<18|(f&63)<<12|(u&63)<<6|c&63,h>65535&&h<1114112&&(s=h))}}s===null?(s=65533,a=1):s>65535&&(s-=65536,n.push(s>>>10&1023|55296),s=56320|s&1023),n.push(s),i+=a}return Or(n)}var ut=4096;function Or(r){var e=r.length;if(e<=ut)return String.fromCharCode.apply(String,r);for(var t="",n=0;n<e;)t+=String.fromCharCode.apply(String,r.slice(n,n+=ut));return t}function Mr(r,e,t){var n="";t=Math.min(r.length,t);for(var i=e;i<t;++i)n+=String.fromCharCode(r[i]&127);return n}function Lr(r,e,t){var n="";t=Math.min(r.length,t);for(var i=e;i<t;++i)n+=String.fromCharCode(r[i]);return n}function Br(r,e,t){var n=r.length;(!e||e<0)&&(e=0),(!t||t<0||t>n)&&(t=n);for(var i="",o=e;o<t;++o)i+=Vr(r[o]);return i}function kr(r,e,t){for(var n=r.slice(e,t),i="",o=0;o<n.length;o+=2)i+=String.fromCharCode(n[o]+n[o+1]*256);return i}l.prototype.slice=function(e,t){var n=this.length;e=~~e,t=t===void 0?n:~~t,e<0?(e+=n,e<0&&(e=0)):e>n&&(e=n),t<0?(t+=n,t<0&&(t=0)):t>n&&(t=n),t<e&&(t=e);var i;if(l.TYPED_ARRAY_SUPPORT)i=this.subarray(e,t),i.__proto__=l.prototype;else{var o=t-e;i=new l(o,void 0);for(var s=0;s<o;++s)i[s]=this[s+e]}return i};function k(r,e,t){if(r%1!==0||r<0)throw new RangeError("offset is not uint");if(r+e>t)throw new RangeError("Trying to access beyond buffer length")}l.prototype.readUIntLE=function(e,t,n){e=e|0,t=t|0,n||k(e,t,this.length);for(var i=this[e],o=1,s=0;++s<t&&(o*=256);)i+=this[e+s]*o;return i};l.prototype.readUIntBE=function(e,t,n){e=e|0,t=t|0,n||k(e,t,this.length);for(var i=this[e+--t],o=1;t>0&&(o*=256);)i+=this[e+--t]*o;return i};l.prototype.readUInt8=function(e,t){return t||k(e,1,this.length),this[e]};l.prototype.readUInt16LE=function(e,t){return t||k(e,2,this.length),this[e]|this[e+1]<<8};l.prototype.readUInt16BE=function(e,t){return t||k(e,2,this.length),this[e]<<8|this[e+1]};l.prototype.readUInt32LE=function(e,t){return t||k(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+this[e+3]*16777216};l.prototype.readUInt32BE=function(e,t){return t||k(e,4,this.length),this[e]*16777216+(this[e+1]<<16|this[e+2]<<8|this[e+3])};l.prototype.readIntLE=function(e,t,n){e=e|0,t=t|0,n||k(e,t,this.length);for(var i=this[e],o=1,s=0;++s<t&&(o*=256);)i+=this[e+s]*o;return o*=128,i>=o&&(i-=Math.pow(2,8*t)),i};l.prototype.readIntBE=function(e,t,n){e=e|0,t=t|0,n||k(e,t,this.length);for(var i=t,o=1,s=this[e+--i];i>0&&(o*=256);)s+=this[e+--i]*o;return o*=128,s>=o&&(s-=Math.pow(2,8*t)),s};l.prototype.readInt8=function(e,t){return t||k(e,1,this.length),this[e]&128?(255-this[e]+1)*-1:this[e]};l.prototype.readInt16LE=function(e,t){t||k(e,2,this.length);var n=this[e]|this[e+1]<<8;return n&32768?n|4294901760:n};l.prototype.readInt16BE=function(e,t){t||k(e,2,this.length);var n=this[e+1]|this[e]<<8;return n&32768?n|4294901760:n};l.prototype.readInt32LE=function(e,t){return t||k(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24};l.prototype.readInt32BE=function(e,t){return t||k(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]};l.prototype.readFloatLE=function(e,t){return t||k(e,4,this.length),Ae(this,e,!0,23,4)};l.prototype.readFloatBE=function(e,t){return t||k(e,4,this.length),Ae(this,e,!1,23,4)};l.prototype.readDoubleLE=function(e,t){return t||k(e,8,this.length),Ae(this,e,!0,52,8)};l.prototype.readDoubleBE=function(e,t){return t||k(e,8,this.length),Ae(this,e,!1,52,8)};function $(r,e,t,n,i,o){if(!G(r))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>i||e<o)throw new RangeError('"value" argument is out of bounds');if(t+n>r.length)throw new RangeError("Index out of range")}l.prototype.writeUIntLE=function(e,t,n,i){if(e=+e,t=t|0,n=n|0,!i){var o=Math.pow(2,8*n)-1;$(this,e,t,n,o,0)}var s=1,a=0;for(this[t]=e&255;++a<n&&(s*=256);)this[t+a]=e/s&255;return t+n};l.prototype.writeUIntBE=function(e,t,n,i){if(e=+e,t=t|0,n=n|0,!i){var o=Math.pow(2,8*n)-1;$(this,e,t,n,o,0)}var s=n-1,a=1;for(this[t+s]=e&255;--s>=0&&(a*=256);)this[t+s]=e/a&255;return t+n};l.prototype.writeUInt8=function(e,t,n){return e=+e,t=t|0,n||$(this,e,t,1,255,0),l.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=e&255,t+1};function Ce(r,e,t,n){e<0&&(e=65535+e+1);for(var i=0,o=Math.min(r.length-t,2);i<o;++i)r[t+i]=(e&255<<8*(n?i:1-i))>>>(n?i:1-i)*8}l.prototype.writeUInt16LE=function(e,t,n){return e=+e,t=t|0,n||$(this,e,t,2,65535,0),l.TYPED_ARRAY_SUPPORT?(this[t]=e&255,this[t+1]=e>>>8):Ce(this,e,t,!0),t+2};l.prototype.writeUInt16BE=function(e,t,n){return e=+e,t=t|0,n||$(this,e,t,2,65535,0),l.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=e&255):Ce(this,e,t,!1),t+2};function Re(r,e,t,n){e<0&&(e=4294967295+e+1);for(var i=0,o=Math.min(r.length-t,4);i<o;++i)r[t+i]=e>>>(n?i:3-i)*8&255}l.prototype.writeUInt32LE=function(e,t,n){return e=+e,t=t|0,n||$(this,e,t,4,4294967295,0),l.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=e&255):Re(this,e,t,!0),t+4};l.prototype.writeUInt32BE=function(e,t,n){return e=+e,t=t|0,n||$(this,e,t,4,4294967295,0),l.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=e&255):Re(this,e,t,!1),t+4};l.prototype.writeIntLE=function(e,t,n,i){if(e=+e,t=t|0,!i){var o=Math.pow(2,8*n-1);$(this,e,t,n,o-1,-o)}var s=0,a=1,f=0;for(this[t]=e&255;++s<n&&(a*=256);)e<0&&f===0&&this[t+s-1]!==0&&(f=1),this[t+s]=(e/a>>0)-f&255;return t+n};l.prototype.writeIntBE=function(e,t,n,i){if(e=+e,t=t|0,!i){var o=Math.pow(2,8*n-1);$(this,e,t,n,o-1,-o)}var s=n-1,a=1,f=0;for(this[t+s]=e&255;--s>=0&&(a*=256);)e<0&&f===0&&this[t+s+1]!==0&&(f=1),this[t+s]=(e/a>>0)-f&255;return t+n};l.prototype.writeInt8=function(e,t,n){return e=+e,t=t|0,n||$(this,e,t,1,127,-128),l.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=e&255,t+1};l.prototype.writeInt16LE=function(e,t,n){return e=+e,t=t|0,n||$(this,e,t,2,32767,-32768),l.TYPED_ARRAY_SUPPORT?(this[t]=e&255,this[t+1]=e>>>8):Ce(this,e,t,!0),t+2};l.prototype.writeInt16BE=function(e,t,n){return e=+e,t=t|0,n||$(this,e,t,2,32767,-32768),l.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=e&255):Ce(this,e,t,!1),t+2};l.prototype.writeInt32LE=function(e,t,n){return e=+e,t=t|0,n||$(this,e,t,4,2147483647,-2147483648),l.TYPED_ARRAY_SUPPORT?(this[t]=e&255,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):Re(this,e,t,!0),t+4};l.prototype.writeInt32BE=function(e,t,n){return e=+e,t=t|0,n||$(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),l.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=e&255):Re(this,e,t,!1),t+4};function Tt(r,e,t,n,i,o){if(t+n>r.length)throw new RangeError("Index out of range");if(t<0)throw new RangeError("Index out of range")}function Dt(r,e,t,n,i){return i||Tt(r,e,t,4),yt(r,e,t,n,23,4),t+4}l.prototype.writeFloatLE=function(e,t,n){return Dt(this,e,t,!0,n)};l.prototype.writeFloatBE=function(e,t,n){return Dt(this,e,t,!1,n)};function Ft(r,e,t,n,i){return i||Tt(r,e,t,8),yt(r,e,t,n,52,8),t+8}l.prototype.writeDoubleLE=function(e,t,n){return Ft(this,e,t,!0,n)};l.prototype.writeDoubleBE=function(e,t,n){return Ft(this,e,t,!1,n)};l.prototype.copy=function(e,t,n,i){if(n||(n=0),!i&&i!==0&&(i=this.length),t>=e.length&&(t=e.length),t||(t=0),i>0&&i<n&&(i=n),i===n||e.length===0||this.length===0)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(i<0)throw new RangeError("sourceEnd out of bounds");i>this.length&&(i=this.length),e.length-t<i-n&&(i=e.length-t+n);var o=i-n,s;if(this===e&&n<t&&t<i)for(s=o-1;s>=0;--s)e[s+t]=this[s+n];else if(o<1e3||!l.TYPED_ARRAY_SUPPORT)for(s=0;s<o;++s)e[s+t]=this[s+n];else Uint8Array.prototype.set.call(e,this.subarray(n,n+o),t);return o};l.prototype.fill=function(e,t,n,i){if(typeof e=="string"){if(typeof t=="string"?(i=t,t=0,n=this.length):typeof n=="string"&&(i=n,n=this.length),e.length===1){var o=e.charCodeAt(0);o<256&&(e=o)}if(i!==void 0&&typeof i!="string")throw new TypeError("encoding must be a string");if(typeof i=="string"&&!l.isEncoding(i))throw new TypeError("Unknown encoding: "+i)}else typeof e=="number"&&(e=e&255);if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;t=t>>>0,n=n===void 0?this.length:n>>>0,e||(e=0);var s;if(typeof e=="number")for(s=t;s<n;++s)this[s]=e;else{var a=G(e)?e:Se(new l(e,i).toString()),f=a.length;for(s=0;s<n-t;++s)this[s+t]=a[s%f]}return this};var Ur=/[^+\/0-9A-Za-z-_]/g;function $r(r){if(r=Pr(r).replace(Ur,""),r.length<2)return"";for(;r.length%4!==0;)r=r+"=";return r}function Pr(r){return r.trim?r.trim():r.replace(/^\s+|\s+$/g,"")}function Vr(r){return r<16?"0"+r.toString(16):r.toString(16)}function Se(r,e){e=e||1/0;for(var t,n=r.length,i=null,o=[],s=0;s<n;++s){if(t=r.charCodeAt(s),t>55295&&t<57344){if(!i){if(t>56319){(e-=3)>-1&&o.push(239,191,189);continue}else if(s+1===n){(e-=3)>-1&&o.push(239,191,189);continue}i=t;continue}if(t<56320){(e-=3)>-1&&o.push(239,191,189),i=t;continue}t=(i-55296<<10|t-56320)+65536}else i&&(e-=3)>-1&&o.push(239,191,189);if(i=null,t<128){if((e-=1)<0)break;o.push(t)}else if(t<2048){if((e-=2)<0)break;o.push(t>>6|192,t&63|128)}else if(t<65536){if((e-=3)<0)break;o.push(t>>12|224,t>>6&63|128,t&63|128)}else if(t<1114112){if((e-=4)<0)break;o.push(t>>18|240,t>>12&63|128,t>>6&63|128,t&63|128)}else throw new Error("Invalid code point")}return o}function jr(r){for(var e=[],t=0;t<r.length;++t)e.push(r.charCodeAt(t)&255);return e}function qr(r,e){for(var t,n,i,o=[],s=0;s<r.length&&!((e-=2)<0);++s)t=r.charCodeAt(s),n=t>>8,i=t%256,o.push(i),o.push(n);return o}function Nt(r){return gr($r(r))}function Te(r,e,t,n){for(var i=0;i<n&&!(i+t>=e.length||i>=r.length);++i)e[i+t]=r[i];return i}function Jr(r){return r!==r}function z(r){return r!=null&&(!!r._isBuffer||Ot(r)||Yr(r))}function Ot(r){return!!r.constructor&&typeof r.constructor.isBuffer=="function"&&r.constructor.isBuffer(r)}function Yr(r){return typeof r.readFloatLE=="function"&&typeof r.slice=="function"&&Ot(r.slice(0,0))}class C extends Error{constructor(e,t,n,...i){Array.isArray(t)&&(t=t.join(" ").trim()),super(t),Error.captureStackTrace!==void 0&&Error.captureStackTrace(this,C),this.code=e;for(const o of i)for(const s in o){const a=o[s];this[s]=z(a)?a.toString(n.encoding):a==null?a:JSON.parse(JSON.stringify(a))}}}const zr=function(r){return typeof r=="object"&&r!==null&&!Array.isArray(r)},Mt=function(r){const e=[];for(let t=0,n=r.length;t<n;t++){const i=r[t];if(i==null||i===!1)e[t]={disabled:!0};else if(typeof i=="string")e[t]={name:i};else if(zr(i)){if(typeof i.name!="string")throw new C("CSV_OPTION_COLUMNS_MISSING_NAME",["Option columns missing name:",`property "name" is required at position ${t}`,"when column is an object literal"]);e[t]=i}else throw new C("CSV_INVALID_COLUMN_DEFINITION",["Invalid column definition:","expect a string or a literal object,",`got ${JSON.stringify(i)} at position ${t}`])}return e};class ct{constructor(e=100){this.size=e,this.length=0,this.buf=l.allocUnsafe(e)}prepend(e){if(z(e)){const t=this.length+e.length;if(t>=this.size&&(this.resize(),t>=this.size))throw Error("INVALID_BUFFER_STATE");const n=this.buf;this.buf=l.allocUnsafe(this.size),e.copy(this.buf,0),n.copy(this.buf,e.length),this.length+=e.length}else{const t=this.length++;t===this.size&&this.resize();const n=this.clone();this.buf[0]=e,n.copy(this.buf,1,0,t)}}append(e){const t=this.length++;t===this.size&&this.resize(),this.buf[t]=e}clone(){return l.from(this.buf.slice(0,this.length))}resize(){const e=this.length;this.size=this.size*2;const t=l.allocUnsafe(this.size);this.buf.copy(t,0,0,e),this.buf=t}toString(e){return e?this.buf.slice(0,this.length).toString(e):Uint8Array.prototype.slice.call(this.buf.slice(0,this.length))}toJSON(){return this.toString("utf8")}reset(){this.length=0}}const Hr=12,Qr=13,Gr=10,Wr=32,Xr=9,Zr=function(r){return{bomSkipped:!1,bufBytesStart:0,castField:r.cast_function,commenting:!1,error:void 0,enabled:r.from_line===1,escaping:!1,escapeIsQuote:z(r.escape)&&z(r.quote)&&l.compare(r.escape,r.quote)===0,expectedRecordLength:Array.isArray(r.columns)?r.columns.length:void 0,field:new ct(20),firstLineToHeaders:r.cast_first_line_to_header,needMoreDataSize:Math.max(r.comment!==null?r.comment.length:0,...r.delimiter.map(e=>e.length),r.quote!==null?r.quote.length:0),previousBuf:void 0,quoting:!1,stop:!1,rawBuffer:new ct(100),record:[],recordHasError:!1,record_length:0,recordDelimiterMaxLength:r.record_delimiter.length===0?0:Math.max(...r.record_delimiter.map(e=>e.length)),trimChars:[l.from(" ",r.encoding)[0],l.from("	",r.encoding)[0]],wasQuoting:!1,wasRowDelimiter:!1,timchars:[l.from(l.from([Qr],"utf8").toString(),r.encoding),l.from(l.from([Gr],"utf8").toString(),r.encoding),l.from(l.from([Hr],"utf8").toString(),r.encoding),l.from(l.from([Wr],"utf8").toString(),r.encoding),l.from(l.from([Xr],"utf8").toString(),r.encoding)]}},Kr=function(r){return r.replace(/([A-Z])/g,function(e,t){return"_"+t.toLowerCase()})},ht=function(r){const e={};for(const n in r)e[Kr(n)]=r[n];if(e.encoding===void 0||e.encoding===!0)e.encoding="utf8";else if(e.encoding===null||e.encoding===!1)e.encoding=null;else if(typeof e.encoding!="string"&&e.encoding!==null)throw new C("CSV_INVALID_OPTION_ENCODING",["Invalid option encoding:","encoding must be a string or null to return a buffer,",`got ${JSON.stringify(e.encoding)}`],e);if(e.bom===void 0||e.bom===null||e.bom===!1)e.bom=!1;else if(e.bom!==!0)throw new C("CSV_INVALID_OPTION_BOM",["Invalid option bom:","bom must be true,",`got ${JSON.stringify(e.bom)}`],e);if(e.cast_function=null,e.cast===void 0||e.cast===null||e.cast===!1||e.cast==="")e.cast=void 0;else if(typeof e.cast=="function")e.cast_function=e.cast,e.cast=!0;else if(e.cast!==!0)throw new C("CSV_INVALID_OPTION_CAST",["Invalid option cast:","cast must be true or a function,",`got ${JSON.stringify(e.cast)}`],e);if(e.cast_date===void 0||e.cast_date===null||e.cast_date===!1||e.cast_date==="")e.cast_date=!1;else if(e.cast_date===!0)e.cast_date=function(n){const i=Date.parse(n);return isNaN(i)?n:new Date(i)};else if(typeof e.cast_date!="function")throw new C("CSV_INVALID_OPTION_CAST_DATE",["Invalid option cast_date:","cast_date must be true or a function,",`got ${JSON.stringify(e.cast_date)}`],e);if(e.cast_first_line_to_header=null,e.columns===!0)e.cast_first_line_to_header=void 0;else if(typeof e.columns=="function")e.cast_first_line_to_header=e.columns,e.columns=!0;else if(Array.isArray(e.columns))e.columns=Mt(e.columns);else if(e.columns===void 0||e.columns===null||e.columns===!1)e.columns=!1;else throw new C("CSV_INVALID_OPTION_COLUMNS",["Invalid option columns:","expect an array, a function or true,",`got ${JSON.stringify(e.columns)}`],e);if(e.group_columns_by_name===void 0||e.group_columns_by_name===null||e.group_columns_by_name===!1)e.group_columns_by_name=!1;else{if(e.group_columns_by_name!==!0)throw new C("CSV_INVALID_OPTION_GROUP_COLUMNS_BY_NAME",["Invalid option group_columns_by_name:","expect an boolean,",`got ${JSON.stringify(e.group_columns_by_name)}`],e);if(e.columns===!1)throw new C("CSV_INVALID_OPTION_GROUP_COLUMNS_BY_NAME",["Invalid option group_columns_by_name:","the `columns` mode must be activated."],e)}if(e.comment===void 0||e.comment===null||e.comment===!1||e.comment==="")e.comment=null;else if(typeof e.comment=="string"&&(e.comment=l.from(e.comment,e.encoding)),!z(e.comment))throw new C("CSV_INVALID_OPTION_COMMENT",["Invalid option comment:","comment must be a buffer or a string,",`got ${JSON.stringify(e.comment)}`],e);if(e.comment_no_infix===void 0||e.comment_no_infix===null||e.comment_no_infix===!1)e.comment_no_infix=!1;else if(e.comment_no_infix!==!0)throw new C("CSV_INVALID_OPTION_COMMENT",["Invalid option comment_no_infix:","value must be a boolean,",`got ${JSON.stringify(e.comment_no_infix)}`],e);const t=JSON.stringify(e.delimiter);if(Array.isArray(e.delimiter)||(e.delimiter=[e.delimiter]),e.delimiter.length===0)throw new C("CSV_INVALID_OPTION_DELIMITER",["Invalid option delimiter:","delimiter must be a non empty string or buffer or array of string|buffer,",`got ${t}`],e);if(e.delimiter=e.delimiter.map(function(n){if(n==null||n===!1)return l.from(",",e.encoding);if(typeof n=="string"&&(n=l.from(n,e.encoding)),!z(n)||n.length===0)throw new C("CSV_INVALID_OPTION_DELIMITER",["Invalid option delimiter:","delimiter must be a non empty string or buffer or array of string|buffer,",`got ${t}`],e);return n}),e.escape===void 0||e.escape===!0?e.escape=l.from('"',e.encoding):typeof e.escape=="string"?e.escape=l.from(e.escape,e.encoding):(e.escape===null||e.escape===!1)&&(e.escape=null),e.escape!==null&&!z(e.escape))throw new Error(`Invalid Option: escape must be a buffer, a string or a boolean, got ${JSON.stringify(e.escape)}`);if(e.from===void 0||e.from===null)e.from=1;else if(typeof e.from=="string"&&/\d+/.test(e.from)&&(e.from=parseInt(e.from)),Number.isInteger(e.from)){if(e.from<0)throw new Error(`Invalid Option: from must be a positive integer, got ${JSON.stringify(r.from)}`)}else throw new Error(`Invalid Option: from must be an integer, got ${JSON.stringify(e.from)}`);if(e.from_line===void 0||e.from_line===null)e.from_line=1;else if(typeof e.from_line=="string"&&/\d+/.test(e.from_line)&&(e.from_line=parseInt(e.from_line)),Number.isInteger(e.from_line)){if(e.from_line<=0)throw new Error(`Invalid Option: from_line must be a positive integer greater than 0, got ${JSON.stringify(r.from_line)}`)}else throw new Error(`Invalid Option: from_line must be an integer, got ${JSON.stringify(r.from_line)}`);if(e.ignore_last_delimiters===void 0||e.ignore_last_delimiters===null)e.ignore_last_delimiters=!1;else if(typeof e.ignore_last_delimiters=="number")e.ignore_last_delimiters=Math.floor(e.ignore_last_delimiters),e.ignore_last_delimiters===0&&(e.ignore_last_delimiters=!1);else if(typeof e.ignore_last_delimiters!="boolean")throw new C("CSV_INVALID_OPTION_IGNORE_LAST_DELIMITERS",["Invalid option `ignore_last_delimiters`:","the value must be a boolean value or an integer,",`got ${JSON.stringify(e.ignore_last_delimiters)}`],e);if(e.ignore_last_delimiters===!0&&e.columns===!1)throw new C("CSV_IGNORE_LAST_DELIMITERS_REQUIRES_COLUMNS",["The option `ignore_last_delimiters`","requires the activation of the `columns` option"],e);if(e.info===void 0||e.info===null||e.info===!1)e.info=!1;else if(e.info!==!0)throw new Error(`Invalid Option: info must be true, got ${JSON.stringify(e.info)}`);if(e.max_record_size===void 0||e.max_record_size===null||e.max_record_size===!1)e.max_record_size=0;else if(!(Number.isInteger(e.max_record_size)&&e.max_record_size>=0))if(typeof e.max_record_size=="string"&&/\d+/.test(e.max_record_size))e.max_record_size=parseInt(e.max_record_size);else throw new Error(`Invalid Option: max_record_size must be a positive integer, got ${JSON.stringify(e.max_record_size)}`);if(e.objname===void 0||e.objname===null||e.objname===!1)e.objname=void 0;else if(z(e.objname)){if(e.objname.length===0)throw new Error("Invalid Option: objname must be a non empty buffer");e.encoding===null||(e.objname=e.objname.toString(e.encoding))}else if(typeof e.objname=="string"){if(e.objname.length===0)throw new Error("Invalid Option: objname must be a non empty string")}else if(typeof e.objname!="number")throw new Error(`Invalid Option: objname must be a string or a buffer, got ${e.objname}`);if(e.objname!==void 0){if(typeof e.objname=="number"){if(e.columns!==!1)throw Error("Invalid Option: objname index cannot be combined with columns or be defined as a field")}else if(e.columns===!1)throw Error("Invalid Option: objname field must be combined with columns or be defined as an index")}if(e.on_record===void 0||e.on_record===null)e.on_record=void 0;else if(typeof e.on_record!="function")throw new C("CSV_INVALID_OPTION_ON_RECORD",["Invalid option `on_record`:","expect a function,",`got ${JSON.stringify(e.on_record)}`],e);if(e.on_skip!==void 0&&e.on_skip!==null&&typeof e.on_skip!="function")throw new Error(`Invalid Option: on_skip must be a function, got ${JSON.stringify(e.on_skip)}`);if(e.quote===null||e.quote===!1||e.quote==="")e.quote=null;else if(e.quote===void 0||e.quote===!0?e.quote=l.from('"',e.encoding):typeof e.quote=="string"&&(e.quote=l.from(e.quote,e.encoding)),!z(e.quote))throw new Error(`Invalid Option: quote must be a buffer or a string, got ${JSON.stringify(e.quote)}`);if(e.raw===void 0||e.raw===null||e.raw===!1)e.raw=!1;else if(e.raw!==!0)throw new Error(`Invalid Option: raw must be true, got ${JSON.stringify(e.raw)}`);if(e.record_delimiter===void 0)e.record_delimiter=[];else if(typeof e.record_delimiter=="string"||z(e.record_delimiter)){if(e.record_delimiter.length===0)throw new C("CSV_INVALID_OPTION_RECORD_DELIMITER",["Invalid option `record_delimiter`:","value must be a non empty string or buffer,",`got ${JSON.stringify(e.record_delimiter)}`],e);e.record_delimiter=[e.record_delimiter]}else if(!Array.isArray(e.record_delimiter))throw new C("CSV_INVALID_OPTION_RECORD_DELIMITER",["Invalid option `record_delimiter`:","value must be a string, a buffer or array of string|buffer,",`got ${JSON.stringify(e.record_delimiter)}`],e);if(e.record_delimiter=e.record_delimiter.map(function(n,i){if(typeof n!="string"&&!z(n))throw new C("CSV_INVALID_OPTION_RECORD_DELIMITER",["Invalid option `record_delimiter`:","value must be a string, a buffer or array of string|buffer",`at index ${i},`,`got ${JSON.stringify(n)}`],e);if(n.length===0)throw new C("CSV_INVALID_OPTION_RECORD_DELIMITER",["Invalid option `record_delimiter`:","value must be a non empty string or buffer",`at index ${i},`,`got ${JSON.stringify(n)}`],e);return typeof n=="string"&&(n=l.from(n,e.encoding)),n}),typeof e.relax_column_count!="boolean")if(e.relax_column_count===void 0||e.relax_column_count===null)e.relax_column_count=!1;else throw new Error(`Invalid Option: relax_column_count must be a boolean, got ${JSON.stringify(e.relax_column_count)}`);if(typeof e.relax_column_count_less!="boolean")if(e.relax_column_count_less===void 0||e.relax_column_count_less===null)e.relax_column_count_less=!1;else throw new Error(`Invalid Option: relax_column_count_less must be a boolean, got ${JSON.stringify(e.relax_column_count_less)}`);if(typeof e.relax_column_count_more!="boolean")if(e.relax_column_count_more===void 0||e.relax_column_count_more===null)e.relax_column_count_more=!1;else throw new Error(`Invalid Option: relax_column_count_more must be a boolean, got ${JSON.stringify(e.relax_column_count_more)}`);if(typeof e.relax_quotes!="boolean")if(e.relax_quotes===void 0||e.relax_quotes===null)e.relax_quotes=!1;else throw new Error(`Invalid Option: relax_quotes must be a boolean, got ${JSON.stringify(e.relax_quotes)}`);if(typeof e.skip_empty_lines!="boolean")if(e.skip_empty_lines===void 0||e.skip_empty_lines===null)e.skip_empty_lines=!1;else throw new Error(`Invalid Option: skip_empty_lines must be a boolean, got ${JSON.stringify(e.skip_empty_lines)}`);if(typeof e.skip_records_with_empty_values!="boolean")if(e.skip_records_with_empty_values===void 0||e.skip_records_with_empty_values===null)e.skip_records_with_empty_values=!1;else throw new Error(`Invalid Option: skip_records_with_empty_values must be a boolean, got ${JSON.stringify(e.skip_records_with_empty_values)}`);if(typeof e.skip_records_with_error!="boolean")if(e.skip_records_with_error===void 0||e.skip_records_with_error===null)e.skip_records_with_error=!1;else throw new Error(`Invalid Option: skip_records_with_error must be a boolean, got ${JSON.stringify(e.skip_records_with_error)}`);if(e.rtrim===void 0||e.rtrim===null||e.rtrim===!1)e.rtrim=!1;else if(e.rtrim!==!0)throw new Error(`Invalid Option: rtrim must be a boolean, got ${JSON.stringify(e.rtrim)}`);if(e.ltrim===void 0||e.ltrim===null||e.ltrim===!1)e.ltrim=!1;else if(e.ltrim!==!0)throw new Error(`Invalid Option: ltrim must be a boolean, got ${JSON.stringify(e.ltrim)}`);if(e.trim===void 0||e.trim===null||e.trim===!1)e.trim=!1;else if(e.trim!==!0)throw new Error(`Invalid Option: trim must be a boolean, got ${JSON.stringify(e.trim)}`);if(e.trim===!0&&r.ltrim!==!1?e.ltrim=!0:e.ltrim!==!0&&(e.ltrim=!1),e.trim===!0&&r.rtrim!==!1?e.rtrim=!0:e.rtrim!==!0&&(e.rtrim=!1),e.to===void 0||e.to===null)e.to=-1;else if(typeof e.to=="string"&&/\d+/.test(e.to)&&(e.to=parseInt(e.to)),Number.isInteger(e.to)){if(e.to<=0)throw new Error(`Invalid Option: to must be a positive integer greater than 0, got ${JSON.stringify(r.to)}`)}else throw new Error(`Invalid Option: to must be an integer, got ${JSON.stringify(r.to)}`);if(e.to_line===void 0||e.to_line===null)e.to_line=-1;else if(typeof e.to_line=="string"&&/\d+/.test(e.to_line)&&(e.to_line=parseInt(e.to_line)),Number.isInteger(e.to_line)){if(e.to_line<=0)throw new Error(`Invalid Option: to_line must be a positive integer greater than 0, got ${JSON.stringify(r.to_line)}`)}else throw new Error(`Invalid Option: to_line must be an integer, got ${JSON.stringify(r.to_line)}`);return e},dt=function(r){return r.every(e=>e==null||e.toString&&e.toString().trim()==="")},en=13,tn=10,de={utf8:l.from([239,187,191]),utf16le:l.from([255,254])},rn=function(r={}){const e={bytes:0,comment_lines:0,empty_lines:0,invalid_field_length:0,lines:1,records:0},t=ht(r);return{info:e,original_options:r,options:t,state:Zr(t),__needMoreData:function(n,i,o){if(o)return!1;const{encoding:s,escape:a,quote:f}=this.options,{quoting:u,needMoreDataSize:c,recordDelimiterMaxLength:h}=this.state,_=i-n-1,p=Math.max(c,h===0?l.from(`\r
`,s).length:h,u?(a===null?0:a.length)+f.length:0,u?f.length+h:0);return _<p},parse:function(n,i,o,s){const{bom:a,comment_no_infix:f,encoding:u,from_line:c,ltrim:h,max_record_size:_,raw:p,relax_quotes:x,rtrim:S,skip_empty_lines:F,to:R,to_line:I}=this.options;let{comment:w,escape:g,quote:y,record_delimiter:W}=this.options;const{bomSkipped:ie,previousBuf:U,rawBuffer:ce,escapeIsQuote:X}=this.state;let E;if(U===void 0)if(n===void 0){s();return}else E=n;else U!==void 0&&n===void 0?E=U:E=l.concat([U,n]);if(ie===!1)if(a===!1)this.state.bomSkipped=!0;else if(E.length<3){if(i===!1){this.state.previousBuf=E;return}}else{for(const D in de)if(de[D].compare(E,0,de[D].length)===0){const m=de[D].length;this.state.bufBytesStart+=m,E=E.slice(m),this.options=ht({...this.original_options,encoding:D}),{comment:w,escape:g,quote:y}=this.options;break}this.state.bomSkipped=!0}const Z=E.length;let v;for(v=0;v<Z&&!this.__needMoreData(v,Z,i);v++){if(this.state.wasRowDelimiter===!0&&(this.info.lines++,this.state.wasRowDelimiter=!1),I!==-1&&this.info.lines>I){this.state.stop=!0,s();return}this.state.quoting===!1&&W.length===0&&this.__autoDiscoverRecordDelimiter(E,v)&&(W=this.options.record_delimiter);const D=E[v];if(p===!0&&ce.append(D),(D===en||D===tn)&&this.state.wasRowDelimiter===!1&&(this.state.wasRowDelimiter=!0),this.state.escaping===!0)this.state.escaping=!1;else{if(g!==null&&this.state.quoting===!0&&this.__isEscape(E,v,D)&&v+g.length<Z)if(X){if(this.__isQuote(E,v+g.length)){this.state.escaping=!0,v+=g.length-1;continue}}else{this.state.escaping=!0,v+=g.length-1;continue}if(this.state.commenting===!1&&this.__isQuote(E,v))if(this.state.quoting===!0){const b=E[v+y.length],O=S&&this.__isCharTrimable(E,v+y.length),M=w!==null&&this.__compareBytes(w,E,v+y.length,b),T=this.__isDelimiter(E,v+y.length,b),N=W.length===0?this.__autoDiscoverRecordDelimiter(E,v+y.length):this.__isRecordDelimiter(b,E,v+y.length);if(g!==null&&this.__isEscape(E,v,D)&&this.__isQuote(E,v+g.length))v+=g.length-1;else if(!b||T||N||M||O){this.state.quoting=!1,this.state.wasQuoting=!0,v+=y.length-1;continue}else if(x===!1){const V=this.__error(new C("CSV_INVALID_CLOSING_QUOTE",["Invalid Closing Quote:",`got "${String.fromCharCode(b)}"`,`at line ${this.info.lines}`,"instead of delimiter, record delimiter, trimable character","(if activated) or comment"],this.options,this.__infoField()));if(V!==void 0)return V}else this.state.quoting=!1,this.state.wasQuoting=!0,this.state.field.prepend(y),v+=y.length-1}else if(this.state.field.length!==0){if(x===!1){const b=this.__infoField(),O=Object.keys(de).map(T=>de[T].equals(this.state.field.toString())?T:!1).filter(Boolean)[0],M=this.__error(new C("INVALID_OPENING_QUOTE",["Invalid Opening Quote:",`a quote is found on field ${JSON.stringify(b.column)} at line ${b.lines}, value is ${JSON.stringify(this.state.field.toString(u))}`,O?`(${O} bom)`:void 0],this.options,b,{field:this.state.field}));if(M!==void 0)return M}}else{this.state.quoting=!0,v+=y.length-1;continue}if(this.state.quoting===!1){const b=this.__isRecordDelimiter(D,E,v);if(b!==0){if(this.state.commenting&&this.state.wasQuoting===!1&&this.state.record.length===0&&this.state.field.length===0)this.info.comment_lines++;else{if(this.state.enabled===!1&&this.info.lines+(this.state.wasRowDelimiter===!0?1:0)>=c){this.state.enabled=!0,this.__resetField(),this.__resetRecord(),v+=b-1;continue}if(F===!0&&this.state.wasQuoting===!1&&this.state.record.length===0&&this.state.field.length===0){this.info.empty_lines++,v+=b-1;continue}this.info.bytes=this.state.bufBytesStart+v;const T=this.__onField();if(T!==void 0)return T;this.info.bytes=this.state.bufBytesStart+v+b;const N=this.__onRecord(o);if(N!==void 0)return N;if(R!==-1&&this.info.records>=R){this.state.stop=!0,s();return}}this.state.commenting=!1,v+=b-1;continue}if(this.state.commenting)continue;if(w!==null&&(f===!1||this.state.record.length===0&&this.state.field.length===0)&&this.__compareBytes(w,E,v,D)!==0){this.state.commenting=!0;continue}const O=this.__isDelimiter(E,v,D);if(O!==0){this.info.bytes=this.state.bufBytesStart+v;const M=this.__onField();if(M!==void 0)return M;v+=O-1;continue}}}if(this.state.commenting===!1&&_!==0&&this.state.record_length+this.state.field.length>_)return this.__error(new C("CSV_MAX_RECORD_SIZE",["Max Record Size:","record exceed the maximum number of tolerated bytes",`of ${_}`,`at line ${this.info.lines}`],this.options,this.__infoField()));const m=h===!1||this.state.quoting===!0||this.state.field.length!==0||!this.__isCharTrimable(E,v),A=S===!1||this.state.wasQuoting===!1;if(m===!0&&A===!0)this.state.field.append(D);else{if(S===!0&&!this.__isCharTrimable(E,v))return this.__error(new C("CSV_NON_TRIMABLE_CHAR_AFTER_CLOSING_QUOTE",["Invalid Closing Quote:","found non trimable byte after quote",`at line ${this.info.lines}`],this.options,this.__infoField()));m===!1&&(v+=this.__isCharTrimable(E,v)-1);continue}}if(i===!0)if(this.state.quoting===!0){const D=this.__error(new C("CSV_QUOTE_NOT_CLOSED",["Quote Not Closed:",`the parsing is finished with an opening quote at line ${this.info.lines}`],this.options,this.__infoField()));if(D!==void 0)return D}else if(this.state.wasQuoting===!0||this.state.record.length!==0||this.state.field.length!==0){this.info.bytes=this.state.bufBytesStart+v;const D=this.__onField();if(D!==void 0)return D;const m=this.__onRecord(o);if(m!==void 0)return m}else this.state.wasRowDelimiter===!0?this.info.empty_lines++:this.state.commenting===!0&&this.info.comment_lines++;else this.state.bufBytesStart+=v,this.state.previousBuf=E.slice(v);this.state.wasRowDelimiter===!0&&(this.info.lines++,this.state.wasRowDelimiter=!1)},__onRecord:function(n){const{columns:i,group_columns_by_name:o,encoding:s,info:a,from:f,relax_column_count:u,relax_column_count_less:c,relax_column_count_more:h,raw:_,skip_records_with_empty_values:p}=this.options,{enabled:x,record:S}=this.state;if(x===!1)return this.__resetRecord();const F=S.length;if(i===!0){if(p===!0&&dt(S)){this.__resetRecord();return}return this.__firstLineToColumns(S)}if(i===!1&&this.info.records===0&&(this.state.expectedRecordLength=F),F!==this.state.expectedRecordLength){const R=i===!1?new C("CSV_RECORD_INCONSISTENT_FIELDS_LENGTH",["Invalid Record Length:",`expect ${this.state.expectedRecordLength},`,`got ${F} on line ${this.info.lines}`],this.options,this.__infoField(),{record:S}):new C("CSV_RECORD_INCONSISTENT_COLUMNS",["Invalid Record Length:",`columns length is ${i.length},`,`got ${F} on line ${this.info.lines}`],this.options,this.__infoField(),{record:S});if(u===!0||c===!0&&F<this.state.expectedRecordLength||h===!0&&F>this.state.expectedRecordLength)this.info.invalid_field_length++,this.state.error=R;else{const I=this.__error(R);if(I)return I}}if(p===!0&&dt(S)){this.__resetRecord();return}if(this.state.recordHasError===!0){this.__resetRecord(),this.state.recordHasError=!1;return}if(this.info.records++,f===1||this.info.records>=f){const{objname:R}=this.options;if(i!==!1){const I={};for(let w=0,g=S.length;w<g;w++)i[w]===void 0||i[w].disabled||(o===!0&&I[i[w].name]!==void 0?Array.isArray(I[i[w].name])?I[i[w].name]=I[i[w].name].concat(S[w]):I[i[w].name]=[I[i[w].name],S[w]]:I[i[w].name]=S[w]);if(_===!0||a===!0){const w=Object.assign({record:I},_===!0?{raw:this.state.rawBuffer.toString(s)}:{},a===!0?{info:this.__infoRecord()}:{}),g=this.__push(R===void 0?w:[I[R],w],n);if(g)return g}else{const w=this.__push(R===void 0?I:[I[R],I],n);if(w)return w}}else if(_===!0||a===!0){const I=Object.assign({record:S},_===!0?{raw:this.state.rawBuffer.toString(s)}:{},a===!0?{info:this.__infoRecord()}:{}),w=this.__push(R===void 0?I:[S[R],I],n);if(w)return w}else{const I=this.__push(R===void 0?S:[S[R],S],n);if(I)return I}}this.__resetRecord()},__firstLineToColumns:function(n){const{firstLineToHeaders:i}=this.state;try{const o=i===void 0?n:i.call(null,n);if(!Array.isArray(o))return this.__error(new C("CSV_INVALID_COLUMN_MAPPING",["Invalid Column Mapping:","expect an array from column function,",`got ${JSON.stringify(o)}`],this.options,this.__infoField(),{headers:o}));const s=Mt(o);this.state.expectedRecordLength=s.length,this.options.columns=s,this.__resetRecord();return}catch(o){return o}},__resetRecord:function(){this.options.raw===!0&&this.state.rawBuffer.reset(),this.state.error=void 0,this.state.record=[],this.state.record_length=0},__onField:function(){const{cast:n,encoding:i,rtrim:o,max_record_size:s}=this.options,{enabled:a,wasQuoting:f}=this.state;if(a===!1)return this.__resetField();let u=this.state.field.toString(i);if(o===!0&&f===!1&&(u=u.trimRight()),n===!0){const[c,h]=this.__cast(u);if(c!==void 0)return c;u=h}this.state.record.push(u),s!==0&&typeof u=="string"&&(this.state.record_length+=u.length),this.__resetField()},__resetField:function(){this.state.field.reset(),this.state.wasQuoting=!1},__push:function(n,i){const{on_record:o}=this.options;if(o!==void 0){const s=this.__infoRecord();try{n=o.call(null,n,s)}catch(a){return a}if(n==null)return}i(n)},__cast:function(n){const{columns:i,relax_column_count:o}=this.options;if(Array.isArray(i)===!0&&o&&this.options.columns.length<=this.state.record.length)return[void 0,void 0];if(this.state.castField!==null)try{const a=this.__infoField();return[void 0,this.state.castField.call(null,n,a)]}catch(a){return[a]}if(this.__isFloat(n))return[void 0,parseFloat(n)];if(this.options.cast_date!==!1){const a=this.__infoField();return[void 0,this.options.cast_date.call(null,n,a)]}return[void 0,n]},__isCharTrimable:function(n,i){return((s,a)=>{const{timchars:f}=this.state;e:for(let u=0;u<f.length;u++){const c=f[u];for(let h=0;h<c.length;h++)if(c[h]!==s[a+h])continue e;return c.length}return 0})(n,i)},__isFloat:function(n){return n-parseFloat(n)+1>=0},__compareBytes:function(n,i,o,s){if(n[0]!==s)return 0;const a=n.length;for(let f=1;f<a;f++)if(n[f]!==i[o+f])return 0;return a},__isDelimiter:function(n,i,o){const{delimiter:s,ignore_last_delimiters:a}=this.options;if(a===!0&&this.state.record.length===this.options.columns.length-1)return 0;if(a!==!1&&typeof a=="number"&&this.state.record.length===a-1)return 0;e:for(let f=0;f<s.length;f++){const u=s[f];if(u[0]===o){for(let c=1;c<u.length;c++)if(u[c]!==n[i+c])continue e;return u.length}}return 0},__isRecordDelimiter:function(n,i,o){const{record_delimiter:s}=this.options,a=s.length;e:for(let f=0;f<a;f++){const u=s[f],c=u.length;if(u[0]===n){for(let h=1;h<c;h++)if(u[h]!==i[o+h])continue e;return u.length}}return 0},__isEscape:function(n,i,o){const{escape:s}=this.options;if(s===null)return!1;const a=s.length;if(s[0]===o){for(let f=0;f<a;f++)if(s[f]!==n[i+f])return!1;return!0}return!1},__isQuote:function(n,i){const{quote:o}=this.options;if(o===null)return!1;const s=o.length;for(let a=0;a<s;a++)if(o[a]!==n[i+a])return!1;return!0},__autoDiscoverRecordDelimiter:function(n,i){const{encoding:o}=this.options,s=[l.from(`\r
`,o),l.from(`
`,o),l.from("\r",o)];e:for(let a=0;a<s.length;a++){const f=s[a].length;for(let u=0;u<f;u++)if(s[a][u]!==n[i+u])continue e;return this.options.record_delimiter.push(s[a]),this.state.recordDelimiterMaxLength=s[a].length,s[a].length}return 0},__error:function(n){const{encoding:i,raw:o,skip_records_with_error:s}=this.options,a=typeof n=="string"?new Error(n):n;if(s){this.state.recordHasError=!0,this.options.on_skip!==void 0&&this.options.on_skip(a,o?this.state.rawBuffer.toString(i):void 0);return}else return a},__infoDataSet:function(){return{...this.info,columns:this.options.columns}},__infoRecord:function(){const{columns:n,raw:i,encoding:o}=this.options;return{...this.__infoDataSet(),error:this.state.error,header:n===!0,index:this.state.record.length,raw:i?this.state.rawBuffer.toString(o):void 0}},__infoField:function(){const{columns:n}=this.options,i=Array.isArray(n);return{...this.__infoRecord(),column:i===!0?n.length>this.state.record.length?n[this.state.record.length].name:null:this.state.record.length,quoting:this.state.wasQuoting}}}},Lt=function(r,e={}){typeof r=="string"&&(r=l.from(r));const t=e&&e.objname?{}:[],n=rn(e),i=f=>{n.options.objname===void 0?t.push(f):t[f[0]]=f[1]},o=()=>{},s=n.parse(r,!1,i,o);if(s!==void 0)throw s;const a=n.parse(void 0,!0,i,o);if(a!==void 0)throw a;return t};function nn(r){console.log("Parsing CSV content for unique cargos...");try{const e=Lt(r,{columns:!0,skip_empty_lines:!0,trim:!0,delimiter:","}),t=[...new Set(e.map(n=>n.cargo))];return console.log("Found unique cargos:",t),t}catch(e){throw console.error("Error parsing CSV for cargos:",e),new Error("Failed to parse CSV for cargos: "+e.message)}}function on(r){console.log("Starting to parse CSV content to Funcionarios...");try{const e=Lt(r,{columns:!0,skip_empty_lines:!0,trim:!0,delimiter:","});console.log(`Successfully parsed ${e.length} records from CSV`);const t=e.map((n,i)=>{var o,s;try{return{id:String(i+1),nombre:n.nombre,cargo:n.cargo,fechaInicio:_t(n.fecha_inicio),fechaFin:_t(n.fecha_fin),highlighted:((o=n.highlited)==null?void 0:o.toLowerCase())==="true",color:((s=n.highlited)==null?void 0:s.toLowerCase())==="true"?"#E57373":void 0}}catch(a){throw console.error(`Error processing record ${i}:`,n,a),a}});return console.log("Successfully transformed all records to Funcionarios"),t}catch(e){throw console.error("Error parsing CSV to Funcionarios:",e),new Error("Failed to parse CSV to Funcionarios: "+e.message)}}function _t(r){try{let e,t,n;if(r.includes("-")?[e,t,n]=r.split("-").map(o=>parseInt(o,10)):[n,t,e]=r.split("/").map(o=>parseInt(o,10)),isNaN(e)||isNaN(t)||isNaN(n))throw new Error(`Invalid date components in: ${r}`);const i=new Date(e,t-1,n,12,0,0);if(isNaN(i.getTime()))throw new Error(`Invalid date created from: ${r}`);return i}catch(e){throw new Error(`Failed to parse date: ${r} - ${e}`)}}class sn{constructor(){xe(this,"funcionarios",[]);xe(this,"cargos",[]);xe(this,"config",{startDate:new Date(2022,11,1),endDate:new Date(2025,2,21),timeScale:"month"})}async loadFuncionarios(){console.log("Loading funcionarios from CSV...");try{const e=`${ot}/data/funcionarios-mininter.csv`;console.log("Fetching CSV from:",e);const t=await fetch(e);if(!t.ok)throw console.error(`Failed to fetch CSV: ${t.status} ${t.statusText}, URL: ${e}`),new Error(`HTTP error! status: ${t.status}`);console.log("CSV file fetched successfully");const n=await t.text();if(!n.trim())throw new Error("CSV file is empty");return console.log("CSV content:",n.substring(0,200)+"..."),console.log("CSV content loaded, parsing data..."),this.funcionarios=on(n),console.log(`Parsed ${this.funcionarios.length} funcionarios`),this.cargos=nn(n),console.log(`Found ${this.cargos.length} unique cargos:`,this.cargos),this.funcionarios.sort((i,o)=>i.fechaInicio.getTime()-o.fechaInicio.getTime()),this.funcionarios}catch(e){return console.error("Error loading funcionarios:",e),e instanceof Error&&console.error("Error details:",{message:e.message,stack:e.stack,base:ot,location:window.location.href}),[]}}setTimeScale(e){this.config.timeScale=e}setDateRange(e,t){this.config.startDate=e,this.config.endDate=t}getConfig(){return{...this.config}}getFuncionarios(){return[...this.funcionarios]}getCargos(){return[...this.cargos]}getTimeIntervals(){const e=[];let t=new Date(this.config.startDate);for(;t<=this.config.endDate;)switch(e.push(new Date(t)),this.config.timeScale){case"day":t=new Date(t.setDate(t.getDate()+1));break;case"month":t=new Date(t.setMonth(t.getMonth()+1));break;case"year":t=new Date(t.setFullYear(t.getFullYear()+1));break}return e}}const re=new sn;var an=se('<div class="loading svelte-bwlj3a">Cargando datos...</div>'),ln=se('<div class="error svelte-bwlj3a"> </div>'),fn=se('<span class="interim svelte-bwlj3a">(encargado)</span>'),un=se('<div class="nombre svelte-bwlj3a"> <!></div>'),cn=se('<div class="marker svelte-bwlj3a"><span class="marker-label svelte-bwlj3a"> </span> <div class="marker-line svelte-bwlj3a"></div></div>'),hn=se('<div class="timeline svelte-bwlj3a"><div class="connector-line svelte-bwlj3a"></div> <div class="timeline-bar svelte-bwlj3a"><span class="dot start svelte-bwlj3a"></span> <span class="dot end svelte-bwlj3a"></span> <span class="duration-text svelte-bwlj3a"><span class="days-count svelte-bwlj3a"> </span> <span class="end-date svelte-bwlj3a"> </span></span></div></div>'),dn=se('<div class="navigation-container svelte-bwlj3a"><section class="cargo-section svelte-bwlj3a"><div class="header-navigation svelte-bwlj3a"><button class="nav-button prev svelte-bwlj3a" aria-label="Ver cargo anterior"><svg class="arrow svelte-bwlj3a" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><path d="M15 18l-6-6 6-6"></path></svg> <span class="nav-text svelte-bwlj3a">Ver anterior</span></button> <h2 class="svelte-bwlj3a"> </h2> <button class="nav-button next svelte-bwlj3a" aria-label="Ver siguiente cargo"><span class="nav-text svelte-bwlj3a">Ver siguiente</span> <svg class="arrow svelte-bwlj3a" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><path d="M9 18l6-6-6-6"></path></svg></button></div> <div class="timeline-grid svelte-bwlj3a"><div class="nombres-column svelte-bwlj3a"><div class="spacer svelte-bwlj3a"></div> <!></div> <div class="timeline-column svelte-bwlj3a"><div class="year-markers svelte-bwlj3a"></div> <div class="timelines-container svelte-bwlj3a"></div></div></div></section></div>'),_n=se(`<div class="visualization-container svelte-bwlj3a"><div class="header svelte-bwlj3a"><h1 class="title svelte-bwlj3a">Cambios en puestos clave del Ministerio del Interior</h1> <p class="subtitle svelte-bwlj3a">Durante el gobierno de Dina Boluarte, se registraron 56 cambios de altos funcionarios en el
			Ministerio del Interior, incluyendo la incorporacin del sucesor de Juan Jos Santivez.
			Entre los cargos de mayor rotacin est el de ministro del Interior y jefe del gabinete de
			asesores.</p></div> <div class="timeline-container svelte-bwlj3a"><!></div> <div class="footer svelte-bwlj3a"><p class="footnote svelte-bwlj3a">Nota: Se revisaron las resoluciones del Mininter y de El Peruano para determinar el periodo en
			que un funcionario se desempe en el cargo. Los nombres en rojo indican que el funcionario
			sigue ejerciendo. <br>*Juan Santivez Antnez fue censurado por el Congreso el 21 de marzo
			de 2025.</p> <div class="attribution svelte-bwlj3a"><p class="credit svelte-bwlj3a"><span class="label svelte-bwlj3a">Desarrollo:</span> <span class="value svelte-bwlj3a">Gianfranco Huamn</span></p> <span class="separator svelte-bwlj3a"></span> <p class="source svelte-bwlj3a"><span class="label svelte-bwlj3a">Fuente:</span> <span class="value svelte-bwlj3a">Mininter y El Peruano</span></p></div></div></div>`);function An(r,e){sr(e,!1);let t=[],n=K(new Map),i=K([]),o=K(!0),s=K(null),a=K([]),f=K(),u=K(0),c=K(0),h=K(0);function _(m){return m<=480?12:m<=768?8:5}function p(m){const A=re.getConfig(),b=A.startDate,O=A.endDate,M=O.getTime()-b.getTime(),T=[];let N=new Date(b);const V=_(m);for(;N<=O;){const _e=(N.getTime()-b.getTime())/M*100;T.push({date:new Date(N),position:_e}),N=new Date(N.setMonth(N.getMonth()+V))}return T}function x(){if(!d(n)||d(n).size===0)return;const m=Math.max(...Array.from(d(n).values()).map(N=>N.length));q(h,m*48+32+28+16+48)}function S(){q(f,window.innerWidth),q(a,p(d(f))),d(f)<=480?x():F()}function F(){if(!d(n)||d(n).size===0)return;const m=Math.max(...Array.from(d(n).values()).map(T=>T.length)),A=d(f)<=480?48:d(f)<=768?40:36,b=d(f)<=480?32:28,O=d(f)<=480?28:36,M=d(f)<=480?16:24;q(c,m*A+b+O+M)}ke(async()=>{try{if(q(o,!0),q(s,null),t=await re.loadFuncionarios(),t.length===0)throw new Error("No se pudieron cargar los datos. Por favor, intente nuevamente.");q(i,re.getCargos()),q(f,window.innerWidth),q(a,p(d(f))),q(n,new Map(d(i).map(m=>[m,t.filter(A=>A.cargo===m)]))),d(f)<=480?x():F(),window.addEventListener("resize",S)}catch(m){q(s,m.message),console.error("Error loading data:",m)}finally{q(o,!1)}}),ke(()=>()=>{window.removeEventListener("resize",S)});function R(m){return m.toLocaleDateString("es",{month:"short",year:"numeric"})}function I(m){const A=m.fechaInicio,b=m.fechaFin,O=re.getConfig().endDate.getTime()-re.getConfig().startDate.getTime(),M=A.getTime()-re.getConfig().startDate.getTime(),T=b.getTime()-A.getTime(),N=M/O*100,V=T/O*100;return`left: ${N}%; width: ${V}%;`}function w(m){const A=re.getConfig().endDate.getTime()-re.getConfig().startDate.getTime(),b=m.fechaInicio.getTime()-re.getConfig().startDate.getTime(),O=m.fechaFin.getTime()-m.fechaInicio.getTime(),M=b/A*100,T=O/A*100;return d(f)<=480?M+T<=75:d(f)<=768?M+T<=80:M+T<=85}function g(m,A){const b=Math.abs(A.getTime()-m.getTime());return Math.ceil(b/(1e3*60*60*24))}function y(m){return`${m} ${m===1?"da":"das"}`}function W(m){return m.toLocaleDateString("es",{day:"numeric",month:"short",year:"numeric"})}function ie(){d(u)<d(i).length-1&&rt(u)}function U(){d(u)>0&&rt(u,-1)}function ce(m){const A=d(f)<=480?48:36;return`${(d(f)<=480?32:28)+m*A}px`}ke(()=>{function m(){const A=Math.max(document.body.scrollHeight,document.documentElement.scrollHeight);parent.postMessage({"datawrapper-height":{"lista-funcionarios":A}},"*")}m(),window.addEventListener("resize",m)}),hr();var X=_n(),E=J(B(X),2),Z=B(E);{var v=m=>{var A=an();Ee(3,A,()=>$e),te(m,A)},D=m=>{var A=ur(),b=lr(A);{var O=T=>{var N=ln(),V=B(N,!0);L(N),ee(()=>he(V,d(s))),Ee(3,N,()=>$e),te(T,N)},M=T=>{var N=dn(),V=B(N),_e=B(V),De=B(_e),ve=J(De,2),Bt=B(ve,!0);L(ve);var Qe=J(ve,2);L(_e);var Fe=J(_e,2),Ne=B(Fe),kt=J(B(Ne),2);Ve(kt,1,()=>d(n).get(d(i)[d(u)])||[],Pe,(me,j)=>{var P=un(),H=B(P),pe=J(H);{var ae=le=>{var ge=fn();te(le,ge)};Ue(pe,le=>{d(j).isInterim&&le(ae)})}L(P),ee(()=>{it(P,"highlighted",d(j).highlighted),he(H,`${d(j).nombre??""} `)}),te(me,P)}),L(Ne);var Ge=J(Ne,2),Oe=B(Ge);Ve(Oe,5,()=>d(a),Pe,(me,j)=>{var P=cn(),H=B(P),pe=B(H,!0);ee(()=>he(pe,R(d(j).date))),L(H);var ae=J(H,2);const le=Be(()=>`height: ${ce((d(n).get(d(i)[d(u)])||[]).length)??""}`);L(P),ee(()=>{ye(P,"style",`left: ${d(j).position??""}%`),ye(ae,"style",d(le))}),te(me,P)}),L(Oe);var We=J(Oe,2);Ve(We,5,()=>d(n).get(d(i)[d(u)])||[],Pe,(me,j)=>{var P=hn(),H=J(B(P),2);const pe=Be(()=>I(d(j)));var ae=J(B(H),4);const le=Be(()=>!w(d(j)));ee(()=>it(ae,"text-right",d(le)));var ge=B(ae),Ut=B(ge,!0);ee(()=>he(Ut,y(g(d(j).fechaInicio,d(j).fechaFin)))),L(ge);var Xe=J(ge,2),$t=B(Xe,!0);ee(()=>he($t,W(d(j).fechaFin))),L(Xe),L(ae),L(H),L(P),ee(()=>ye(H,"style",d(pe))),te(me,P)}),L(We),L(Ge),L(Fe),L(V),L(N),ee(()=>{ye(V,"style",`min-height: ${(d(f)<=480?d(h):d(c))??""}px`),De.disabled=d(u)===0,he(Bt,d(i)[d(u)]),Qe.disabled=d(u)===d(i).length-1}),nt("click",De,U),Ee(3,ve,()=>$e,()=>({duration:200})),nt("click",Qe,ie),Ee(3,Fe,()=>cr,()=>({duration:300,axis:"y"})),te(T,N)};Ue(b,T=>{d(s)?T(O):T(M,!1)},!0)}te(m,A)};Ue(Z,m=>{d(o)?m(v):m(D,!1)})}L(E),fr(2),L(X),te(r,X),ar()}export{An as component};
